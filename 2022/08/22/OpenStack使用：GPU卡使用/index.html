<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>OpenStack使用：GPU卡使用 | 任翌博的个人博客</title><meta name="description" content="含有多个设备的GPU常见型号：Quadro RTX 6000&#x2F;8000 简述系统内lspci查看显卡信息如下，可以看到同一个PCI插槽上（b1）包含了4个设备：VGA compatible、Audio device、USB、Serial bus，同时4个设备对应的驱动各不相同。   目前cyborg暂不支持此类加速设备的管理，cyborg采集的attach handle info中，只包含了fun"><meta name="keywords" content="OpenStack"><meta name="author" content="任翌博"><meta name="copyright" content="任翌博"><meta name="format-detection" content="telephone=no"><link rel="shortcut icon" href="/img/icon.png"><link rel="canonical" href="https://renyb2.github.io/2022/08/22/OpenStack%E4%BD%BF%E7%94%A8%EF%BC%9AGPU%E5%8D%A1%E4%BD%BF%E7%94%A8/"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//fonts.googleapis.com" crossorigin="crossorigin"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><meta property="og:type" content="article"><meta property="og:title" content="OpenStack使用：GPU卡使用"><meta property="og:url" content="https://renyb2.github.io/2022/08/22/OpenStack%E4%BD%BF%E7%94%A8%EF%BC%9AGPU%E5%8D%A1%E4%BD%BF%E7%94%A8/"><meta property="og:site_name" content="任翌博的个人博客"><meta property="og:description" content="含有多个设备的GPU常见型号：Quadro RTX 6000&#x2F;8000 简述系统内lspci查看显卡信息如下，可以看到同一个PCI插槽上（b1）包含了4个设备：VGA compatible、Audio device、USB、Serial bus，同时4个设备对应的驱动各不相同。   目前cyborg暂不支持此类加速设备的管理，cyborg采集的attach handle info中，只包含了fun"><meta property="og:image" content="https://www.leixue.com/uploads/2019/07/OpenStack.png"><meta property="article:published_time" content="2022-08-22T02:57:57.000Z"><meta property="article:modified_time" content="2022-09-01T01:56:19.161Z"><meta name="twitter:card" content="summary"><script>var activateDarkMode = function () {
  document.documentElement.setAttribute('data-theme', 'dark')
  if (document.querySelector('meta[name="theme-color"]') !== null) {
    document.querySelector('meta[name="theme-color"]').setAttribute('content', '#000')
  }
}
var activateLightMode = function () {
  document.documentElement.setAttribute('data-theme', 'light')
  if (document.querySelector('meta[name="theme-color"]') !== null) {
    document.querySelector('meta[name="theme-color"]').setAttribute('content', '#fff')
  }
}

var getCookies = function (name) {
  const value = `; ${document.cookie}`
  const parts = value.split(`; ${name}=`)
  if (parts.length === 2) return parts.pop().split(';').shift()
}

var autoChangeMode = 'false'
var t = getCookies('theme')
if (autoChangeMode === '1') {
  var isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
  var isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
  var isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
  var hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

  if (t === undefined) {
    if (isLightMode) activateLightMode()
    else if (isDarkMode) activateDarkMode()
    else if (isNotSpecified || hasNoSupport) {
      console.log('You specified no preference for a color scheme or your browser does not support it. I Schedule dark mode during night time.')
      var now = new Date()
      var hour = now.getHours()
      var isNight = hour <= 6 || hour >= 18
      isNight ? activateDarkMode() : activateLightMode()
    }
    window.matchMedia('(prefers-color-scheme: dark)').addListener(function (e) {
      if (Cookies.get('theme') === undefined) {
        e.matches ? activateDarkMode() : activateLightMode()
      }
    })
  } else if (t === 'light') activateLightMode()
  else activateDarkMode()
} else if (autoChangeMode === '2') {
  now = new Date()
  hour = now.getHours()
  isNight = hour <= 6 || hour >= 18
  if (t === undefined) isNight ? activateDarkMode() : activateLightMode()
  else if (t === 'light') activateLightMode()
  else activateDarkMode()
} else {
  if (t === 'dark') activateDarkMode()
  else if (t === 'light') activateLightMode()
}</script><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web&amp;display=swap"><script>var GLOBAL_CONFIG = { 
  root: '/',
  hexoversion: '5.1.1',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"找不到您查询的内容：${query}"}},
  translate: undefined,
  noticeOutdate: undefined,
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  bookmark: {
    message_prev: '按',
    message_next: '键将本页加入书签'
  },
  runtime_unit: '天',
  runtime: false,
  copyright: {"limitCount":50,"languages":{"author":"作者: 任翌博","link":"链接: ","source":"来源: 任翌博的个人博客","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。"}},
  ClickShowText: undefined,
  medium_zoom: false,
  fancybox: true,
  Snackbar: undefined,
  justifiedGallery: {
    js: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
    css: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
  },
  baiduPush: false,
  highlightCopy: true,
  highlightLang: true,
  isPhotoFigcaption: false,
  islazyload: false,
  isanchor: false    
}</script><script id="config_change">var GLOBAL_CONFIG_SITE = { 
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isSidebar: true,
  postUpdate: '2022-09-01 09:56:19'
}</script><noscript><style>
#nav {
  opacity: 1
}
.justified-gallery img {
  opacity: 1
}
</style></noscript><meta name="generator" content="Hexo 5.1.1"><link rel="alternate" href="/atom.xml" title="任翌博的个人博客" type="application/atom+xml">
</head><body><div id="mobile-sidebar"><div id="menu_mask"></div><div id="mobile-sidebar-menus"><div class="mobile_author_icon"><img class="avatar-img" src="/img/avatar.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="mobile_post_data"><div class="mobile_data_item is-center"><div class="mobile_data_link"><a href="/archives/"><div class="headline">文章</div><div class="length_num">75</div></a></div></div><div class="mobile_data_item is-center">      <div class="mobile_data_link"><a href="/tags/"><div class="headline">标签</div><div class="length_num">60</div></a></div></div><div class="mobile_data_item is-center">     <div class="mobile_data_link"><a href="/categories/"><div class="headline">分类</div><div class="length_num">18</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div></div></div><div id="body-wrap"><div id="sidebar"><i class="fas fa-arrow-right on" id="toggle-sidebar"></i><div class="sidebar-toc"><div class="sidebar-toc__title">目录</div><div class="sidebar-toc__progress"><span class="progress-notice">你已经读了</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar">     </div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%90%AB%E6%9C%89%E5%A4%9A%E4%B8%AA%E8%AE%BE%E5%A4%87%E7%9A%84GPU"><span class="toc-number">1.</span> <span class="toc-text">含有多个设备的GPU</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AE%80%E8%BF%B0"><span class="toc-number">1.1.</span> <span class="toc-text">简述</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%93%8D%E4%BD%9C"><span class="toc-number">1.2.</span> <span class="toc-text">操作</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#a-%E6%9B%B4%E6%8D%A2%E8%AE%BE%E5%A4%87%E7%9A%84%E9%A9%B1%E5%8A%A8%E4%B8%BAvfio-pci"><span class="toc-number">1.2.1.</span> <span class="toc-text">a. 更换设备的驱动为vfio_pci</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#b-%E6%9B%B4%E6%94%B9nova%E9%85%8D%E7%BD%AE%E4%BF%A1%E6%81%AF"><span class="toc-number">1.2.2.</span> <span class="toc-text">b. 更改nova配置信息</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#c-%E5%88%9B%E5%BB%BAGPU-Flavor"><span class="toc-number">1.2.3.</span> <span class="toc-text">c. 创建GPU Flavor</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%87%E6%B3%A8"><span class="toc-number">1.3.</span> <span class="toc-text">备注</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8F%82%E8%80%83%E6%96%87%E6%A1%A3"><span class="toc-number">2.</span> <span class="toc-text">参考文档</span></a></li></ol></div></div></div><header class="post-bg" id="page-header" style="background-image: url(https://www.leixue.com/uploads/2019/07/OpenStack.png)"><nav id="nav"><span class="pull-left" id="blog_name"><a class="blog_title" id="site-name" href="/">任翌博的个人博客</a></span><span class="pull-right menus"><div id="search_button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div><span class="toggle-menu close"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></span></span></nav><div id="post-info"><div id="post-title"><div class="posttitle">OpenStack使用：GPU卡使用</div></div><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2022-08-22T02:57:57.000Z" title="发表于 2022-08-22 10:57:57">2022-08-22</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2022-09-01T01:56:19.161Z" title="更新于 2022-09-01 09:56:19">2022-09-01</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/OpenStack/">OpenStack</a></span></div><div class="meta-secondline"> <span class="post-meta-separator">|</span><span class="post-meta-pv-cv"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"></span></span></div></div></div></header><main class="layout_post" id="content-inner"><article id="post"><div class="post-content" id="article-container"><h2 id="含有多个设备的GPU"><a href="#含有多个设备的GPU" class="headerlink" title="含有多个设备的GPU"></a>含有多个设备的GPU</h2><p>常见型号：Quadro RTX 6000/8000</p>
<h3 id="简述"><a href="#简述" class="headerlink" title="简述"></a>简述</h3><p>系统内<code>lspci</code>查看显卡信息如下，可以看到同一个PCI插槽上（b1）包含了4个设备：VGA compatible、Audio device、USB、Serial bus，同时4个设备对应的驱动各不相同。</p>
<p><img src="/2022/08/22/OpenStack%E4%BD%BF%E7%94%A8%EF%BC%9AGPU%E5%8D%A1%E4%BD%BF%E7%94%A8/lspci%E4%BF%A1%E6%81%AF.png" alt="lspci信息"></p>
<p><img src="/2022/08/22/OpenStack%E4%BD%BF%E7%94%A8%EF%BC%9AGPU%E5%8D%A1%E4%BD%BF%E7%94%A8/%E5%8E%9F%E5%A7%8B%E9%A9%B1%E5%8A%A8.png" alt="原始驱动"></p>
<p>目前cyborg暂不支持此类加速设备的管理，cyborg采集的attach handle info中，只包含了function 0，即生成的xml中仅会透传GPU中的1个设备进入虚机，由于设备不完整，会导致libvirt会无法拉起虚机。</p>
<p><img src="/2022/08/22/OpenStack%E4%BD%BF%E7%94%A8%EF%BC%9AGPU%E5%8D%A1%E4%BD%BF%E7%94%A8/cyborg%E9%87%87%E9%9B%86%E5%88%B0%E7%9A%84%E4%BF%A1%E6%81%AF.png" alt="cyborg采集到的信息"></p>
<p>使用此类GPU，需要通过nova compute的PCI透传功能实现，<strong>总体思路</strong>如下：</p>
<ol>
<li>切换GPU卡各类设备的驱动为vfio_pci。</li>
<li>透传GPU卡的所有设备至虚机。</li>
</ol>
<p>若这两点有一点不满足，libvirt在拉起虚机时均会报如下报错：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br></pre></td><td class="code"><pre><span class="line">2022-08-20 16:39:06.047 3711 INFO nova.compute.claims [req-5656f7a4-5fcf-4f5a-b72b-2f425087cfb4 20f2649ce88142f19048b0aa090b78a1 a1670d65a7e644e2a78fa31a001f284b - default default] [instance: 285e807d-426d-4b4a-b500-e89f92b9172a] Claim successful on node node01</span><br><span class="line">2022-08-20 16:39:06.259 3711 WARNING nova.virt.osinfo [req-5656f7a4-5fcf-4f5a-b72b-2f425087cfb4 20f2649ce88142f19048b0aa090b78a1 a1670d65a7e644e2a78fa31a001f284b - default default] Cannot find OS information - Reason: (No configuration information found for operating system Windows): OsInfoNotFound: No configuration information found for operating system Windows</span><br><span class="line">2022-08-20 16:39:06.282 3711 INFO nova.virt.libvirt.driver [req-5656f7a4-5fcf-4f5a-b72b-2f425087cfb4 20f2649ce88142f19048b0aa090b78a1 a1670d65a7e644e2a78fa31a001f284b - default default] [instance: 285e807d-426d-4b4a-b500-e89f92b9172a] Ignoring supplied device name: /dev/vda. Libvirt can&#x27;t honour user-supplied dev names</span><br><span class="line">2022-08-20 16:39:06.283 3711 WARNING nova.virt.osinfo [req-5656f7a4-5fcf-4f5a-b72b-2f425087cfb4 20f2649ce88142f19048b0aa090b78a1 a1670d65a7e644e2a78fa31a001f284b - default default] Cannot find OS information - Reason: (No configuration information found for operating system Windows): OsInfoNotFound: No configuration information found for operating system Windows</span><br><span class="line">2022-08-20 16:39:06.402 3711 INFO nova.virt.block_device [req-5656f7a4-5fcf-4f5a-b72b-2f425087cfb4 20f2649ce88142f19048b0aa090b78a1 a1670d65a7e644e2a78fa31a001f284b - default default] [instance: 285e807d-426d-4b4a-b500-e89f92b9172a] Booting with volume-backed-image eb3aee11-f487-45e3-ac36-984904ad010a at /dev/vda</span><br><span class="line">2022-08-20 16:39:12.973 3711 WARNING nova.virt.osinfo [req-5656f7a4-5fcf-4f5a-b72b-2f425087cfb4 20f2649ce88142f19048b0aa090b78a1 a1670d65a7e644e2a78fa31a001f284b - default default] Cannot find OS information - Reason: (No configuration information found for operating system Windows): OsInfoNotFound: No configuration information found for operating system Windows</span><br><span class="line">2022-08-20 16:39:12.975 3711 INFO nova.virt.libvirt.driver [req-5656f7a4-5fcf-4f5a-b72b-2f425087cfb4 20f2649ce88142f19048b0aa090b78a1 a1670d65a7e644e2a78fa31a001f284b - default default] [instance: 285e807d-426d-4b4a-b500-e89f92b9172a] Creating image</span><br><span class="line">2022-08-20 16:39:13.008 3711 WARNING nova.virt.osinfo [req-5656f7a4-5fcf-4f5a-b72b-2f425087cfb4 20f2649ce88142f19048b0aa090b78a1 a1670d65a7e644e2a78fa31a001f284b - default default] Cannot find OS information - Reason: (No configuration information found for operating system Windows): OsInfoNotFound: No configuration information found for operating system Windows</span><br><span class="line">2022-08-20 16:39:13.013 3711 WARNING nova.virt.libvirt.driver [req-5656f7a4-5fcf-4f5a-b72b-2f425087cfb4 20f2649ce88142f19048b0aa090b78a1 a1670d65a7e644e2a78fa31a001f284b - default default] USB tablet requested for guests by host configuration. In order to accept this request VNC should be enabled or SPICE and SPICE agent disabled on host.</span><br><span class="line">2022-08-20 16:39:15.811 3711 ERROR nova.virt.libvirt.guest [req-5656f7a4-5fcf-4f5a-b72b-2f425087cfb4 20f2649ce88142f19048b0aa090b78a1 a1670d65a7e644e2a78fa31a001f284b - default default] Error launching a defined domain with XML: &lt;domain type=&#x27;kvm&#x27;&gt;</span><br><span class="line">  &lt;name&gt;instance-00000007&lt;/name&gt;</span><br><span class="line">  &lt;uuid&gt;285e807d-426d-4b4a-b500-e89f92b9172a&lt;/uuid&gt;</span><br><span class="line">  &lt;metadata&gt;</span><br><span class="line">    &lt;nova:instance xmlns:nova=&quot;http://openstack.org/xmlns/libvirt/nova/1.0&quot;&gt;</span><br><span class="line">      &lt;nova:package version=&quot;20.6.1&quot;/&gt;</span><br><span class="line">      &lt;nova:name&gt;win10-1&lt;/nova:name&gt;</span><br><span class="line">      &lt;nova:creationTime&gt;2022-08-20 16:39:12&lt;/nova:creationTime&gt;</span><br><span class="line">      &lt;nova:flavor name=&quot;win10_8C16G&quot;&gt;</span><br><span class="line">        &lt;nova:memory&gt;16384&lt;/nova:memory&gt;</span><br><span class="line">        &lt;nova:disk&gt;100&lt;/nova:disk&gt;</span><br><span class="line">        &lt;nova:swap&gt;0&lt;/nova:swap&gt;</span><br><span class="line">        &lt;nova:ephemeral&gt;0&lt;/nova:ephemeral&gt;</span><br><span class="line">        &lt;nova:vcpus&gt;8&lt;/nova:vcpus&gt;</span><br><span class="line">      &lt;/nova:flavor&gt;</span><br><span class="line">      &lt;nova:owner&gt;</span><br><span class="line">        &lt;nova:user uuid=&quot;20f2649ce88142f19048b0aa090b78a1&quot;&gt;admin&lt;/nova:user&gt;</span><br><span class="line">        &lt;nova:project uuid=&quot;a1670d65a7e644e2a78fa31a001f284b&quot;&gt;admin&lt;/nova:project&gt;</span><br><span class="line">      &lt;/nova:owner&gt;</span><br><span class="line">    &lt;/nova:instance&gt;</span><br><span class="line">  &lt;/metadata&gt;</span><br><span class="line">  &lt;memory unit=&#x27;KiB&#x27;&gt;16777216&lt;/memory&gt;</span><br><span class="line">  &lt;currentMemory unit=&#x27;KiB&#x27;&gt;16777216&lt;/currentMemory&gt;</span><br><span class="line">  &lt;memoryBacking&gt;</span><br><span class="line">    &lt;hugepages&gt;</span><br><span class="line">      &lt;page size=&#x27;1048576&#x27; unit=&#x27;KiB&#x27; nodeset=&#x27;0&#x27;/&gt;</span><br><span class="line">    &lt;/hugepages&gt;</span><br><span class="line">  &lt;/memoryBacking&gt;</span><br><span class="line">  &lt;vcpu placement=&#x27;static&#x27;&gt;8&lt;/vcpu&gt;</span><br><span class="line">  &lt;cputune&gt;</span><br><span class="line">    &lt;shares&gt;8192&lt;/shares&gt;</span><br><span class="line">    &lt;vcpupin vcpu=&#x27;0&#x27; cpuset=&#x27;3-15,35-47&#x27;/&gt;</span><br><span class="line">    &lt;vcpupin vcpu=&#x27;1&#x27; cpuset=&#x27;3-15,35-47&#x27;/&gt;</span><br><span class="line">    &lt;vcpupin vcpu=&#x27;2&#x27; cpuset=&#x27;3-15,35-47&#x27;/&gt;</span><br><span class="line">    &lt;vcpupin vcpu=&#x27;3&#x27; cpuset=&#x27;3-15,35-47&#x27;/&gt;</span><br><span class="line">    &lt;vcpupin vcpu=&#x27;4&#x27; cpuset=&#x27;3-15,35-47&#x27;/&gt;</span><br><span class="line">    &lt;vcpupin vcpu=&#x27;5&#x27; cpuset=&#x27;3-15,35-47&#x27;/&gt;</span><br><span class="line">    &lt;vcpupin vcpu=&#x27;6&#x27; cpuset=&#x27;3-15,35-47&#x27;/&gt;</span><br><span class="line">    &lt;vcpupin vcpu=&#x27;7&#x27; cpuset=&#x27;3-15,35-47&#x27;/&gt;</span><br><span class="line">    &lt;emulatorpin cpuset=&#x27;3-15,35-47&#x27;/&gt;</span><br><span class="line">  &lt;/cputune&gt;</span><br><span class="line">  &lt;numatune&gt;</span><br><span class="line">    &lt;memory mode=&#x27;strict&#x27; nodeset=&#x27;0&#x27;/&gt;</span><br><span class="line">    &lt;memnode cellid=&#x27;0&#x27; mode=&#x27;strict&#x27; nodeset=&#x27;0&#x27;/&gt;</span><br><span class="line">  &lt;/numatune&gt;</span><br><span class="line">  &lt;sysinfo type=&#x27;smbios&#x27;&gt;</span><br><span class="line">    &lt;system&gt;</span><br><span class="line">      &lt;entry name=&#x27;manufacturer&#x27;&gt;OpenStack Foundation&lt;/entry&gt;</span><br><span class="line">      &lt;entry name=&#x27;product&#x27;&gt;OpenStack Nova&lt;/entry&gt;</span><br><span class="line">      &lt;entry name=&#x27;version&#x27;&gt;20.6.1&lt;/entry&gt;</span><br><span class="line">      &lt;entry name=&#x27;serial&#x27;&gt;285e807d-426d-4b4a-b500-e89f92b9172a&lt;/entry&gt;</span><br><span class="line">      &lt;entry name=&#x27;uuid&#x27;&gt;285e807d-426d-4b4a-b500-e89f92b9172a&lt;/entry&gt;</span><br><span class="line">      &lt;entry name=&#x27;family&#x27;&gt;Virtual Machine&lt;/entry&gt;</span><br><span class="line">    &lt;/system&gt;</span><br><span class="line">  &lt;/sysinfo&gt;</span><br><span class="line">  &lt;os&gt;</span><br><span class="line">    &lt;type arch=&#x27;x86_64&#x27; machine=&#x27;pc-i440fx-rhel7.2.0&#x27;&gt;hvm&lt;/type&gt;</span><br><span class="line">    &lt;boot dev=&#x27;hd&#x27;/&gt;</span><br><span class="line">    &lt;smbios mode=&#x27;sysinfo&#x27;/&gt;</span><br><span class="line">  &lt;/os&gt;</span><br><span class="line">  &lt;features&gt;</span><br><span class="line">    &lt;acpi/&gt;</span><br><span class="line">    &lt;apic/&gt;</span><br><span class="line">  &lt;/features&gt;</span><br><span class="line">  &lt;cpu mode=&#x27;host-model&#x27; check=&#x27;partial&#x27;&gt;</span><br><span class="line">    &lt;model fallback=&#x27;allow&#x27;/&gt;</span><br><span class="line">    &lt;topology sockets=&#x27;2&#x27; cores=&#x27;1&#x27; threads=&#x27;4&#x27;/&gt;</span><br><span class="line">    &lt;numa&gt;</span><br><span class="line">      &lt;cell id=&#x27;0&#x27; cpus=&#x27;0-7&#x27; memory=&#x27;16777216&#x27; unit=&#x27;KiB&#x27; memAccess=&#x27;shared&#x27;/&gt;</span><br><span class="line">    &lt;/numa&gt;</span><br><span class="line">  &lt;/cpu&gt;</span><br><span class="line">  &lt;clock offset=&#x27;utc&#x27;&gt;</span><br><span class="line">    &lt;timer name=&#x27;pit&#x27; tickpolicy=&#x27;delay&#x27;/&gt;</span><br><span class="line">    &lt;timer name=&#x27;rtc&#x27; tickpolicy=&#x27;catchup&#x27;/&gt;</span><br><span class="line">    &lt;timer name=&#x27;hpet&#x27; present=&#x27;no&#x27;/&gt;</span><br><span class="line">  &lt;/clock&gt;</span><br><span class="line">  &lt;on_poweroff&gt;destroy&lt;/on_poweroff&gt;</span><br><span class="line">  &lt;on_reboot&gt;restart&lt;/on_reboot&gt;</span><br><span class="line">  &lt;on_crash&gt;destroy&lt;/on_crash&gt;</span><br><span class="line">  &lt;devices&gt;</span><br><span class="line">    &lt;emulator&gt;/usr/libexec/qemu-kvm&lt;/emulator&gt;</span><br><span class="line">    &lt;disk type=&#x27;network&#x27; device=&#x27;disk&#x27;&gt;</span><br><span class="line">      &lt;driver name=&#x27;qemu&#x27; type=&#x27;raw&#x27; cache=&#x27;writeback&#x27; discard=&#x27;unmap&#x27;/&gt;</span><br><span class="line">      &lt;auth username=&#x27;cinder&#x27;&gt;</span><br><span class="line">        &lt;secret type=&#x27;ceph&#x27; uuid=&#x27;457eb676-33da-42ec-9a8c-9293d545c337&#x27;/&gt;</span><br><span class="line">      &lt;/auth&gt;</span><br><span class="line">      &lt;source protocol=&#x27;rbd&#x27; name=&#x27;cinder-volumes/a728e5a5-ca72-4d70-8d2f-4b193d88a595&#x27;&gt;</span><br><span class="line">        &lt;host name=&#x27;10.99.22.45&#x27; port=&#x27;6789&#x27;/&gt;</span><br><span class="line">      &lt;/source&gt;</span><br><span class="line">      &lt;target dev=&#x27;vda&#x27; bus=&#x27;virtio&#x27;/&gt;</span><br><span class="line">      &lt;serial&gt;a728e5a5-ca72-4d70-8d2f-4b193d88a595&lt;/serial&gt;</span><br><span class="line">      &lt;address type=&#x27;pci&#x27; domain=&#x27;0x0000&#x27; bus=&#x27;0x00&#x27; slot=&#x27;0x0a&#x27; function=&#x27;0x0&#x27;/&gt;</span><br><span class="line">    &lt;/disk&gt;</span><br><span class="line">    &lt;controller type=&#x27;usb&#x27; index=&#x27;0&#x27; model=&#x27;piix3-uhci&#x27;&gt;</span><br><span class="line">      &lt;address type=&#x27;pci&#x27; domain=&#x27;0x0000&#x27; bus=&#x27;0x00&#x27; slot=&#x27;0x01&#x27; function=&#x27;0x2&#x27;/&gt;</span><br><span class="line">    &lt;/controller&gt;</span><br><span class="line">    &lt;controller type=&#x27;usb&#x27; index=&#x27;1&#x27; model=&#x27;ehci&#x27;&gt;</span><br><span class="line">      &lt;address type=&#x27;pci&#x27; domain=&#x27;0x0000&#x27; bus=&#x27;0x00&#x27; slot=&#x27;0x05&#x27; function=&#x27;0x0&#x27;/&gt;</span><br><span class="line">    &lt;/controller&gt;</span><br><span class="line">    &lt;controller type=&#x27;usb&#x27; index=&#x27;2&#x27; model=&#x27;nec-xhci&#x27;&gt;</span><br><span class="line">      &lt;address type=&#x27;pci&#x27; domain=&#x27;0x0000&#x27; bus=&#x27;0x00&#x27; slot=&#x27;0x06&#x27; function=&#x27;0x0&#x27;/&gt;</span><br><span class="line">    &lt;/controller&gt;</span><br><span class="line">    &lt;controller type=&#x27;usb&#x27; index=&#x27;3&#x27; model=&#x27;ehci&#x27;&gt;</span><br><span class="line">      &lt;address type=&#x27;pci&#x27; domain=&#x27;0x0000&#x27; bus=&#x27;0x00&#x27; slot=&#x27;0x07&#x27; function=&#x27;0x0&#x27;/&gt;</span><br><span class="line">    &lt;/controller&gt;</span><br><span class="line">    &lt;controller type=&#x27;usb&#x27; index=&#x27;4&#x27; model=&#x27;nec-xhci&#x27;&gt;</span><br><span class="line">      &lt;address type=&#x27;pci&#x27; domain=&#x27;0x0000&#x27; bus=&#x27;0x00&#x27; slot=&#x27;0x08&#x27; function=&#x27;0x0&#x27;/&gt;</span><br><span class="line">    &lt;/controller&gt;</span><br><span class="line">    &lt;controller type=&#x27;pci&#x27; index=&#x27;0&#x27; model=&#x27;pci-root&#x27;/&gt;</span><br><span class="line">    &lt;controller type=&#x27;virtio-serial&#x27; index=&#x27;0&#x27;&gt;</span><br><span class="line">      &lt;address type=&#x27;pci&#x27; domain=&#x27;0x0000&#x27; bus=&#x27;0x00&#x27; slot=&#x27;0x09&#x27; function=&#x27;0x0&#x27;/&gt;</span><br><span class="line">    &lt;/controller&gt;</span><br><span class="line">    &lt;interface type=&#x27;bridge&#x27;&gt;</span><br><span class="line">      &lt;mac address=&#x27;fa:16:3e:58:02:a6&#x27;/&gt;</span><br><span class="line">      &lt;source bridge=&#x27;br-int&#x27;/&gt;</span><br><span class="line">      &lt;virtualport type=&#x27;openvswitch&#x27;&gt;</span><br><span class="line">        &lt;parameters interfaceid=&#x27;2fdb3a80-a1ca-4927-b11e-2c40024dad69&#x27;/&gt;</span><br><span class="line">      &lt;/virtualport&gt;</span><br><span class="line">      &lt;target dev=&#x27;tap2fdb3a80-a1&#x27;/&gt;</span><br><span class="line">      &lt;model type=&#x27;virtio&#x27;/&gt;</span><br><span class="line">      &lt;mtu size=&#x27;1500&#x27;/&gt;</span><br><span class="line">      &lt;address type=&#x27;pci&#x27; domain=&#x27;0x0000&#x27; bus=&#x27;0x00&#x27; slot=&#x27;0x03&#x27; function=&#x27;0x0&#x27;/&gt;</span><br><span class="line">    &lt;/interface&gt;</span><br><span class="line">    &lt;serial type=&#x27;pty&#x27;&gt;</span><br><span class="line">      &lt;log file=&#x27;/var/lib/nova/instances/285e807d-426d-4b4a-b500-e89f92b9172a/console.log&#x27; append=&#x27;off&#x27;/&gt;</span><br><span class="line">      &lt;target type=&#x27;isa-serial&#x27; port=&#x27;0&#x27;&gt;</span><br><span class="line">        &lt;model name=&#x27;isa-serial&#x27;/&gt;</span><br><span class="line">      &lt;/target&gt;</span><br><span class="line">    &lt;/serial&gt;</span><br><span class="line">    &lt;console type=&#x27;pty&#x27;&gt;</span><br><span class="line">      &lt;log file=&#x27;/var/lib/nova/instances/285e807d-426d-4b4a-b500-e89f92b9172a/console.log&#x27; append=&#x27;off&#x27;/&gt;</span><br><span class="line">      &lt;target type=&#x27;serial&#x27; port=&#x27;0&#x27;/&gt;</span><br><span class="line">    &lt;/console&gt;</span><br><span class="line">    &lt;channel type=&#x27;spicevmc&#x27;&gt;</span><br><span class="line">      &lt;target type=&#x27;virtio&#x27; name=&#x27;com.redhat.spice.0&#x27;/&gt;</span><br><span class="line">      &lt;address type=&#x27;virtio-serial&#x27; controller=&#x27;0&#x27; bus=&#x27;0&#x27; port=&#x27;1&#x27;/&gt;</span><br><span class="line">    &lt;/channel&gt;</span><br><span class="line">    &lt;channel type=&#x27;unix&#x27;&gt;</span><br><span class="line">      &lt;source mode=&#x27;bind&#x27; path=&#x27;/var/lib/libvirt/qemu/org.qemu.guest_agent.0.instance-00000007.sock&#x27;/&gt;</span><br><span class="line">      &lt;target type=&#x27;virtio&#x27; name=&#x27;org.qemu.guest_agent.0&#x27;/&gt;</span><br><span class="line">      &lt;address type=&#x27;virtio-serial&#x27; controller=&#x27;0&#x27; bus=&#x27;0&#x27; port=&#x27;2&#x27;/&gt;</span><br><span class="line">    &lt;/channel&gt;</span><br><span class="line">    &lt;input type=&#x27;mouse&#x27; bus=&#x27;ps2&#x27;/&gt;</span><br><span class="line">    &lt;input type=&#x27;keyboard&#x27; bus=&#x27;ps2&#x27;/&gt;</span><br><span class="line">    &lt;graphics type=&#x27;spice&#x27; autoport=&#x27;yes&#x27; listen=&#x27;0.0.0.0&#x27;&gt;</span><br><span class="line">      &lt;listen type=&#x27;address&#x27; address=&#x27;0.0.0.0&#x27;/&gt;</span><br><span class="line">    &lt;/graphics&gt;</span><br><span class="line">    &lt;sound model=&#x27;ac97&#x27;&gt;</span><br><span class="line">      &lt;address type=&#x27;pci&#x27; domain=&#x27;0x0000&#x27; bus=&#x27;0x00&#x27; slot=&#x27;0x04&#x27; function=&#x27;0x0&#x27;/&gt;</span><br><span class="line">    &lt;/sound&gt;</span><br><span class="line">    &lt;video&gt;</span><br><span class="line">      &lt;model type=&#x27;qxl&#x27; ram=&#x27;65536&#x27; vram=&#x27;65536&#x27; vgamem=&#x27;32768&#x27; heads=&#x27;1&#x27; primary=&#x27;yes&#x27;/&gt;</span><br><span class="line">      &lt;address type=&#x27;pci&#x27; domain=&#x27;0x0000&#x27; bus=&#x27;0x00&#x27; slot=&#x27;0x02&#x27; function=&#x27;0x0&#x27;/&gt;</span><br><span class="line">    &lt;/video&gt;</span><br><span class="line">    &lt;hostdev mode=&#x27;subsystem&#x27; type=&#x27;pci&#x27; managed=&#x27;yes&#x27;&gt;</span><br><span class="line">      &lt;source&gt;</span><br><span class="line">        &lt;address domain=&#x27;0x0000&#x27; bus=&#x27;0xb1&#x27; slot=&#x27;0x00&#x27; function=&#x27;0x0&#x27;/&gt;</span><br><span class="line">      &lt;/source&gt;</span><br><span class="line">      &lt;address type=&#x27;pci&#x27; domain=&#x27;0x0000&#x27; bus=&#x27;0x00&#x27; slot=&#x27;0x0b&#x27; function=&#x27;0x0&#x27;/&gt;</span><br><span class="line">    &lt;/hostdev&gt;</span><br><span class="line">    &lt;redirdev bus=&#x27;usb&#x27; type=&#x27;spicevmc&#x27;&gt;</span><br><span class="line">      &lt;address type=&#x27;usb&#x27; bus=&#x27;3&#x27; port=&#x27;1&#x27;/&gt;</span><br><span class="line">    &lt;/redirdev&gt;</span><br><span class="line">    &lt;redirdev bus=&#x27;usb&#x27; type=&#x27;spicevmc&#x27;&gt;</span><br><span class="line">      &lt;address type=&#x27;usb&#x27; bus=&#x27;3&#x27; port=&#x27;2&#x27;/&gt;</span><br><span class="line">    &lt;/redirdev&gt;</span><br><span class="line">    &lt;redirdev bus=&#x27;usb&#x27; type=&#x27;spicevmc&#x27;&gt;</span><br><span class="line">      &lt;address type=&#x27;usb&#x27; bus=&#x27;4&#x27; port=&#x27;1&#x27;/&gt;</span><br><span class="line">    &lt;/redirdev&gt;</span><br><span class="line">    &lt;redirdev bus=&#x27;usb&#x27; type=&#x27;spicevmc&#x27;&gt;</span><br><span class="line">      &lt;address type=&#x27;usb&#x27; bus=&#x27;4&#x27; port=&#x27;2&#x27;/&gt;</span><br><span class="line">    &lt;/redirdev&gt;</span><br><span class="line">    &lt;redirdev bus=&#x27;usb&#x27; type=&#x27;spicevmc&#x27;&gt;</span><br><span class="line">      &lt;address type=&#x27;usb&#x27; bus=&#x27;3&#x27; port=&#x27;3&#x27;/&gt;</span><br><span class="line">    &lt;/redirdev&gt;</span><br><span class="line">    &lt;redirdev bus=&#x27;usb&#x27; type=&#x27;spicevmc&#x27;&gt;</span><br><span class="line">      &lt;address type=&#x27;usb&#x27; bus=&#x27;3&#x27; port=&#x27;4&#x27;/&gt;</span><br><span class="line">    &lt;/redirdev&gt;</span><br><span class="line">    &lt;redirdev bus=&#x27;usb&#x27; type=&#x27;spicevmc&#x27;&gt;</span><br><span class="line">      &lt;address type=&#x27;usb&#x27; bus=&#x27;4&#x27; port=&#x27;3&#x27;/&gt;</span><br><span class="line">    &lt;/redirdev&gt;</span><br><span class="line">    &lt;redirdev bus=&#x27;usb&#x27; type=&#x27;spicevmc&#x27;&gt;</span><br><span class="line">      &lt;address type=&#x27;usb&#x27; bus=&#x27;4&#x27; port=&#x27;4&#x27;/&gt;</span><br><span class="line">    &lt;/redirdev&gt;</span><br><span class="line">    &lt;memballoon model=&#x27;virtio&#x27;&gt;</span><br><span class="line">      &lt;stats period=&#x27;10&#x27;/&gt;</span><br><span class="line">      &lt;address type=&#x27;pci&#x27; domain=&#x27;0x0000&#x27; bus=&#x27;0x00&#x27; slot=&#x27;0x0c&#x27; function=&#x27;0x0&#x27;/&gt;</span><br><span class="line">    &lt;/memballoon&gt;</span><br><span class="line">  &lt;/devices&gt;</span><br><span class="line">&lt;/domain&gt;</span><br><span class="line">: libvirtError: internal error: process exited while connecting to monitor: 2022-08-20T16:39:15.220119Z qemu-kvm: -device qxl-vga,id=video0,ram_size=67108864,vram_size=67108864,vram64_size_mb=0,vgamem_mb=32,max_outputs=1,bus=pci.0,addr=0x2: vhost_region_add_section:Section rounded to 0 prior to previous c0000</span><br><span class="line">2022-08-20 16:39:15.813 3711 ERROR nova.virt.libvirt.driver [req-5656f7a4-5fcf-4f5a-b72b-2f425087cfb4 20f2649ce88142f19048b0aa090b78a1 a1670d65a7e644e2a78fa31a001f284b - default default] [instance: 285e807d-426d-4b4a-b500-e89f92b9172a] Failed to start libvirt guest: libvirtError: internal error: process exited while connecting to monitor: 2022-08-20T16:39:15.220119Z qemu-kvm: -device qxl-vga,id=video0,ram_size=67108864,vram_size=67108864,vram64_size_mb=0,vgamem_mb=32,max_outputs=1,bus=pci.0,addr=0x2: vhost_region_add_section:Section rounded to 0 prior to previous c0000</span><br><span class="line">2022-08-20 16:39:15.864 3711 INFO nova.virt.libvirt.driver [req-5656f7a4-5fcf-4f5a-b72b-2f425087cfb4 20f2649ce88142f19048b0aa090b78a1 a1670d65a7e644e2a78fa31a001f284b - default default] [instance: 285e807d-426d-4b4a-b500-e89f92b9172a] Deleting instance files /var/lib/nova/instances/285e807d-426d-4b4a-b500-e89f92b9172a_del</span><br><span class="line">2022-08-20 16:39:15.865 3711 INFO nova.virt.libvirt.driver [req-5656f7a4-5fcf-4f5a-b72b-2f425087cfb4 20f2649ce88142f19048b0aa090b78a1 a1670d65a7e644e2a78fa31a001f284b - default default] [instance: 285e807d-426d-4b4a-b500-e89f92b9172a] Deletion of /var/lib/nova/instances/285e807d-426d-4b4a-b500-e89f92b9172a_del complete</span><br><span class="line">2022-08-20 16:39:15.950 3711 ERROR nova.compute.manager [req-5656f7a4-5fcf-4f5a-b72b-2f425087cfb4 20f2649ce88142f19048b0aa090b78a1 a1670d65a7e644e2a78fa31a001f284b - default default] [instance: 285e807d-426d-4b4a-b500-e89f92b9172a] Instance failed to spawn: libvirtError: internal error: process exited while connecting to monitor: 2022-08-20T16:39:15.220119Z qemu-kvm: -device qxl-vga,id=video0,ram_size=67108864,vram_size=67108864,vram64_size_mb=0,vgamem_mb=32,max_outputs=1,bus=pci.0,addr=0x2: vhost_region_add_section:Section rounded to 0 prior to previous c0000</span><br><span class="line">2022-08-20T16:39:15.220245Z qemu-kvm: -device qxl-vga,id=video0,ram_size=67108864,vram_size=67108864,vram64_size_mb=0,vgamem_mb=32,max_outputs=1,bus=pci.0,addr=0x2: vhost_region_add_section:Section rounded to 0 prior to previous c0000</span><br><span class="line">2022-08-20T16:39:15.224010Z qemu-kvm: -device vfio-pci,host=0000:b1:00.0,id=hostdev0,bus=pci.0,addr=0xb: vfio error: 0000:b1:00.0: group 183 is not viable</span><br><span class="line">Please ensure all devices within the iommu_group are bound to their vfio bus driver.</span><br><span class="line">unload codec helper module</span><br><span class="line">unload codec helper module done</span><br><span class="line">unload x264 encoder module done</span><br><span class="line">unload aac encode compress module</span><br><span class="line">unload aac encode compress done</span><br><span class="line">unload aac decode compress module</span><br><span class="line">unload aac decode compress done</span><br><span class="line">2022-08-20 16:39:15.950 3711 ERROR nova.compute.manager [instance: 285e807d-426d-4b4a-b500-e89f92b9172a] Traceback (most recent call last):</span><br><span class="line">2022-08-20 16:39:15.950 3711 ERROR nova.compute.manager [instance: 285e807d-426d-4b4a-b500-e89f92b9172a]   File &quot;/var/lib/kolla/venv/lib/python2.7/site-packages/nova/compute/manager.py&quot;, line 2808, in _build_resources</span><br><span class="line">2022-08-20 16:39:15.950 3711 ERROR nova.compute.manager [instance: 285e807d-426d-4b4a-b500-e89f92b9172a]     yield resources</span><br><span class="line">2022-08-20 16:39:15.950 3711 ERROR nova.compute.manager [instance: 285e807d-426d-4b4a-b500-e89f92b9172a]   File &quot;/var/lib/kolla/venv/lib/python2.7/site-packages/nova/compute/manager.py&quot;, line 2567, in _build_and_run_instance</span><br><span class="line">2022-08-20 16:39:15.950 3711 ERROR nova.compute.manager [instance: 285e807d-426d-4b4a-b500-e89f92b9172a]     accel_info=accel_info)</span><br><span class="line">2022-08-20 16:39:15.950 3711 ERROR nova.compute.manager [instance: 285e807d-426d-4b4a-b500-e89f92b9172a]   File &quot;/var/lib/kolla/venv/lib/python2.7/site-packages/nova/virt/libvirt/driver.py&quot;, line 3524, in spawn</span><br><span class="line">2022-08-20 16:39:15.950 3711 ERROR nova.compute.manager [instance: 285e807d-426d-4b4a-b500-e89f92b9172a]     power_on=power_on)</span><br><span class="line">2022-08-20 16:39:15.950 3711 ERROR nova.compute.manager [instance: 285e807d-426d-4b4a-b500-e89f92b9172a]   File &quot;/var/lib/kolla/venv/lib/python2.7/site-packages/nova/virt/libvirt/driver.py&quot;, line 6431, in _create_domain_and_network</span><br><span class="line">2022-08-20 16:39:15.950 3711 ERROR nova.compute.manager [instance: 285e807d-426d-4b4a-b500-e89f92b9172a]     destroy_disks_on_failure)</span><br><span class="line">2022-08-20 16:39:15.950 3711 ERROR nova.compute.manager [instance: 285e807d-426d-4b4a-b500-e89f92b9172a]   File &quot;/var/lib/kolla/venv/lib/python2.7/site-packages/oslo_utils/excutils.py&quot;, line 220, in __exit__</span><br><span class="line">2022-08-20 16:39:15.950 3711 ERROR nova.compute.manager [instance: 285e807d-426d-4b4a-b500-e89f92b9172a]     self.force_reraise()</span><br><span class="line">2022-08-20 16:39:15.950 3711 ERROR nova.compute.manager [instance: 285e807d-426d-4b4a-b500-e89f92b9172a]   File &quot;/var/lib/kolla/venv/lib/python2.7/site-packages/oslo_utils/excutils.py&quot;, line 196, in force_reraise</span><br><span class="line">2022-08-20 16:39:15.950 3711 ERROR nova.compute.manager [instance: 285e807d-426d-4b4a-b500-e89f92b9172a]     six.reraise(self.type_, self.value, self.tb)</span><br><span class="line">2022-08-20 16:39:15.950 3711 ERROR nova.compute.manager [instance: 285e807d-426d-4b4a-b500-e89f92b9172a]   File &quot;/var/lib/kolla/venv/lib/python2.7/site-packages/nova/virt/libvirt/driver.py&quot;, line 6397, in _create_domain_and_network</span><br><span class="line">2022-08-20 16:39:15.950 3711 ERROR nova.compute.manager [instance: 285e807d-426d-4b4a-b500-e89f92b9172a]     post_xml_callback=post_xml_callback)</span><br><span class="line">2022-08-20 16:39:15.950 3711 ERROR nova.compute.manager [instance: 285e807d-426d-4b4a-b500-e89f92b9172a]   File &quot;/var/lib/kolla/venv/lib/python2.7/site-packages/nova/virt/libvirt/driver.py&quot;, line 6328, in _create_domain</span><br><span class="line">2022-08-20 16:39:15.950 3711 ERROR nova.compute.manager [instance: 285e807d-426d-4b4a-b500-e89f92b9172a]     guest.launch(pause=pause)</span><br><span class="line">2022-08-20 16:39:15.950 3711 ERROR nova.compute.manager [instance: 285e807d-426d-4b4a-b500-e89f92b9172a]   File &quot;/var/lib/kolla/venv/lib/python2.7/site-packages/nova/virt/libvirt/guest.py&quot;, line 145, in launch</span><br><span class="line">2022-08-20 16:39:15.950 3711 ERROR nova.compute.manager [instance: 285e807d-426d-4b4a-b500-e89f92b9172a]     self._encoded_xml, errors=&#x27;ignore&#x27;)</span><br><span class="line">2022-08-20 16:39:15.950 3711 ERROR nova.compute.manager [instance: 285e807d-426d-4b4a-b500-e89f92b9172a]   File &quot;/var/lib/kolla/venv/lib/python2.7/site-packages/oslo_utils/excutils.py&quot;, line 220, in __exit__</span><br><span class="line">2022-08-20 16:39:15.950 3711 ERROR nova.compute.manager [instance: 285e807d-426d-4b4a-b500-e89f92b9172a]     self.force_reraise()</span><br><span class="line">2022-08-20 16:39:15.950 3711 ERROR nova.compute.manager [instance: 285e807d-426d-4b4a-b500-e89f92b9172a]   File &quot;/var/lib/kolla/venv/lib/python2.7/site-packages/oslo_utils/excutils.py&quot;, line 196, in force_reraise</span><br><span class="line">2022-08-20 16:39:15.950 3711 ERROR nova.compute.manager [instance: 285e807d-426d-4b4a-b500-e89f92b9172a]     six.reraise(self.type_, self.value, self.tb)</span><br><span class="line">2022-08-20 16:39:15.950 3711 ERROR nova.compute.manager [instance: 285e807d-426d-4b4a-b500-e89f92b9172a]   File &quot;/var/lib/kolla/venv/lib/python2.7/site-packages/nova/virt/libvirt/guest.py&quot;, line 140, in launch</span><br><span class="line">2022-08-20 16:39:15.950 3711 ERROR nova.compute.manager [instance: 285e807d-426d-4b4a-b500-e89f92b9172a]     return self._domain.createWithFlags(flags)</span><br><span class="line">2022-08-20 16:39:15.950 3711 ERROR nova.compute.manager [instance: 285e807d-426d-4b4a-b500-e89f92b9172a]   File &quot;/var/lib/kolla/venv/lib/python2.7/site-packages/eventlet/tpool.py&quot;, line 190, in doit</span><br><span class="line">2022-08-20 16:39:15.950 3711 ERROR nova.compute.manager [instance: 285e807d-426d-4b4a-b500-e89f92b9172a]     result = proxy_call(self._autowrap, f, *args, **kwargs)</span><br><span class="line">2022-08-20 16:39:15.950 3711 ERROR nova.compute.manager [instance: 285e807d-426d-4b4a-b500-e89f92b9172a]   File &quot;/var/lib/kolla/venv/lib/python2.7/site-packages/eventlet/tpool.py&quot;, line 148, in proxy_call</span><br><span class="line">2022-08-20 16:39:15.950 3711 ERROR nova.compute.manager [instance: 285e807d-426d-4b4a-b500-e89f92b9172a]     rv = execute(f, *args, **kwargs)</span><br><span class="line">2022-08-20 16:39:15.950 3711 ERROR nova.compute.manager [instance: 285e807d-426d-4b4a-b500-e89f92b9172a]   File &quot;/var/lib/kolla/venv/lib/python2.7/site-packages/eventlet/tpool.py&quot;, line 129, in execute</span><br><span class="line">2022-08-20 16:39:15.950 3711 ERROR nova.compute.manager [instance: 285e807d-426d-4b4a-b500-e89f92b9172a]     six.reraise(c, e, tb)</span><br><span class="line">2022-08-20 16:39:15.950 3711 ERROR nova.compute.manager [instance: 285e807d-426d-4b4a-b500-e89f92b9172a]   File &quot;/var/lib/kolla/venv/lib/python2.7/site-packages/eventlet/tpool.py&quot;, line 83, in tworker</span><br><span class="line">2022-08-20 16:39:15.950 3711 ERROR nova.compute.manager [instance: 285e807d-426d-4b4a-b500-e89f92b9172a]     rv = meth(*args, **kwargs)</span><br><span class="line">2022-08-20 16:39:15.950 3711 ERROR nova.compute.manager [instance: 285e807d-426d-4b4a-b500-e89f92b9172a]   File &quot;/usr/lib64/python2.7/site-packages/libvirt.py&quot;, line 1110, in createWithFlags</span><br><span class="line">2022-08-20 16:39:15.950 3711 ERROR nova.compute.manager [instance: 285e807d-426d-4b4a-b500-e89f92b9172a]     if ret == -1: raise libvirtError (&#x27;virDomainCreateWithFlags() failed&#x27;, dom=self)</span><br><span class="line">2022-08-20 16:39:15.950 3711 ERROR nova.compute.manager [instance: 285e807d-426d-4b4a-b500-e89f92b9172a] libvirtError: internal error: process exited while connecting to monitor: 2022-08-20T16:39:15.220119Z qemu-kvm: -device qxl-vga,id=video0,ram_size=67108864,vram_size=67108864,vram64_size_mb=0,vgamem_mb=32,max_outputs=1,bus=pci.0,addr=0x2: vhost_region_add_section:Section rounded to 0 prior to previous c0000</span><br><span class="line">2022-08-20 16:39:15.950 3711 ERROR nova.compute.manager [instance: 285e807d-426d-4b4a-b500-e89f92b9172a] 2022-08-20T16:39:15.220245Z qemu-kvm: -device qxl-vga,id=video0,ram_size=67108864,vram_size=67108864,vram64_size_mb=0,vgamem_mb=32,max_outputs=1,bus=pci.0,addr=0x2: vhost_region_add_section:Section rounded to 0 prior to previous c0000</span><br><span class="line">2022-08-20 16:39:15.950 3711 ERROR nova.compute.manager [instance: 285e807d-426d-4b4a-b500-e89f92b9172a] 2022-08-20T16:39:15.224010Z qemu-kvm: -device vfio-pci,host=0000:b1:00.0,id=hostdev0,bus=pci.0,addr=0xb: vfio error: 0000:b1:00.0: group 183 is not viable</span><br><span class="line">2022-08-20 16:39:15.950 3711 ERROR nova.compute.manager [instance: 285e807d-426d-4b4a-b500-e89f92b9172a] Please ensure all devices within the iommu_group are bound to their vfio bus driver.</span><br><span class="line">2022-08-20 16:39:15.950 3711 ERROR nova.compute.manager [instance: 285e807d-426d-4b4a-b500-e89f92b9172a] unload codec helper module</span><br><span class="line">2022-08-20 16:39:15.950 3711 ERROR nova.compute.manager [instance: 285e807d-426d-4b4a-b500-e89f92b9172a] unload codec helper module done</span><br><span class="line">2022-08-20 16:39:15.950 3711 ERROR nova.compute.manager [instance: 285e807d-426d-4b4a-b500-e89f92b9172a] unload x264 encoder module done</span><br><span class="line">2022-08-20 16:39:15.950 3711 ERROR nova.compute.manager [instance: 285e807d-426d-4b4a-b500-e89f92b9172a] unload aac encode compress module</span><br><span class="line">2022-08-20 16:39:15.950 3711 ERROR nova.compute.manager [instance: 285e807d-426d-4b4a-b500-e89f92b9172a] unload aac encode compress done</span><br><span class="line">2022-08-20 16:39:15.950 3711 ERROR nova.compute.manager [instance: 285e807d-426d-4b4a-b500-e89f92b9172a] unload aac decode compress module</span><br><span class="line">2022-08-20 16:39:15.950 3711 ERROR nova.compute.manager [instance: 285e807d-426d-4b4a-b500-e89f92b9172a] unload aac decode compress done</span><br><span class="line">2022-08-20 16:39:15.950 3711 ERROR nova.compute.manager [instance: 285e807d-426d-4b4a-b500-e89f92b9172a]</span><br><span class="line">2022-08-20 16:39:15.956 3711 INFO nova.compute.manager [req-5656f7a4-5fcf-4f5a-b72b-2f425087cfb4 20f2649ce88142f19048b0aa090b78a1 a1670d65a7e644e2a78fa31a001f284b - default default] [instance: 285e807d-426d-4b4a-b500-e89f92b9172a] Terminating instance</span><br><span class="line">2022-08-20 16:39:15.961 3711 INFO nova.virt.libvirt.driver [-] [instance: 285e807d-426d-4b4a-b500-e89f92b9172a] Instance destroyed successfully.</span><br><span class="line">2022-08-20 16:39:15.998 3711 INFO nova.virt.libvirt.driver [req-5656f7a4-5fcf-4f5a-b72b-2f425087cfb4 20f2649ce88142f19048b0aa090b78a1 a1670d65a7e644e2a78fa31a001f284b - default default] [instance: 285e807d-426d-4b4a-b500-e89f92b9172a] Deletion of /var/lib/nova/instances/285e807d-426d-4b4a-b500-e89f92b9172a_del complete</span><br><span class="line">2022-08-20 16:39:16.104 3711 INFO nova.compute.manager [req-5656f7a4-5fcf-4f5a-b72b-2f425087cfb4 20f2649ce88142f19048b0aa090b78a1 a1670d65a7e644e2a78fa31a001f284b - default default] [instance: 285e807d-426d-4b4a-b500-e89f92b9172a] Took 0.15 seconds to destroy the instance on the hypervisor.</span><br><span class="line">2022-08-20 16:39:16.412 3711 INFO nova.compute.manager [req-5656f7a4-5fcf-4f5a-b72b-2f425087cfb4 20f2649ce88142f19048b0aa090b78a1 a1670d65a7e644e2a78fa31a001f284b - default default] [instance: 285e807d-426d-4b4a-b500-e89f92b9172a] Took 0.31 seconds to detach 1 volumes for instance.</span><br><span class="line">2022-08-20 16:39:16.770 3711 ERROR nova.compute.manager [req-5656f7a4-5fcf-4f5a-b72b-2f425087cfb4 20f2649ce88142f19048b0aa090b78a1 a1670d65a7e644e2a78fa31a001f284b - default default] [instance: 285e807d-426d-4b4a-b500-e89f92b9172a] Failed to build and run instance: libvirtError: internal error: process exited while connecting to monitor: 2022-08-20T16:39:15.220119Z qemu-kvm: -device qxl-vga,id=video0,ram_size=67108864,vram_size=67108864,vram64_size_mb=0,vgamem_mb=32,max_outputs=1,bus=pci.0,addr=0x2: vhost_region_add_section:Section rounded to 0 prior to previous c0000</span><br><span class="line">2022-08-20T16:39:15.220245Z qemu-kvm: -device qxl-vga,id=video0,ram_size=67108864,vram_size=67108864,vram64_size_mb=0,vgamem_mb=32,max_outputs=1,bus=pci.0,addr=0x2: vhost_region_add_section:Section rounded to 0 prior to previous c0000</span><br><span class="line">2022-08-20T16:39:15.224010Z qemu-kvm: -device vfio-pci,host=0000:b1:00.0,id=hostdev0,bus=pci.0,addr=0xb: vfio error: 0000:b1:00.0: group 183 is not viable</span><br><span class="line">Please ensure all devices within the iommu_group are bound to their vfio bus driver.</span><br><span class="line">unload codec helper module</span><br><span class="line">unload codec helper module done</span><br><span class="line">unload x264 encoder module done</span><br><span class="line">unload aac encode compress module</span><br><span class="line">unload aac encode compress done</span><br><span class="line">unload aac decode compress module</span><br><span class="line">unload aac decode compress done</span><br><span class="line">2022-08-20 16:39:16.770 3711 ERROR nova.compute.manager [instance: 285e807d-426d-4b4a-b500-e89f92b9172a] Traceback (most recent call last):</span><br><span class="line">2022-08-20 16:39:16.770 3711 ERROR nova.compute.manager [instance: 285e807d-426d-4b4a-b500-e89f92b9172a]   File &quot;/var/lib/kolla/venv/lib/python2.7/site-packages/nova/compute/manager.py&quot;, line 2567, in _build_and_run_instance</span><br><span class="line">2022-08-20 16:39:16.770 3711 ERROR nova.compute.manager [instance: 285e807d-426d-4b4a-b500-e89f92b9172a]     accel_info=accel_info)</span><br><span class="line">2022-08-20 16:39:16.770 3711 ERROR nova.compute.manager [instance: 285e807d-426d-4b4a-b500-e89f92b9172a]   File &quot;/var/lib/kolla/venv/lib/python2.7/site-packages/nova/virt/libvirt/driver.py&quot;, line 3524, in spawn</span><br><span class="line">2022-08-20 16:39:16.770 3711 ERROR nova.compute.manager [instance: 285e807d-426d-4b4a-b500-e89f92b9172a]     power_on=power_on)</span><br><span class="line">2022-08-20 16:39:16.770 3711 ERROR nova.compute.manager [instance: 285e807d-426d-4b4a-b500-e89f92b9172a]   File &quot;/var/lib/kolla/venv/lib/python2.7/site-packages/nova/virt/libvirt/driver.py&quot;, line 6431, in _create_domain_and_network</span><br><span class="line">2022-08-20 16:39:16.770 3711 ERROR nova.compute.manager [instance: 285e807d-426d-4b4a-b500-e89f92b9172a]     destroy_disks_on_failure)</span><br><span class="line">2022-08-20 16:39:16.770 3711 ERROR nova.compute.manager [instance: 285e807d-426d-4b4a-b500-e89f92b9172a]   File &quot;/var/lib/kolla/venv/lib/python2.7/site-packages/oslo_utils/excutils.py&quot;, line 220, in __exit__</span><br><span class="line">2022-08-20 16:39:16.770 3711 ERROR nova.compute.manager [instance: 285e807d-426d-4b4a-b500-e89f92b9172a]     self.force_reraise()</span><br><span class="line">2022-08-20 16:39:16.770 3711 ERROR nova.compute.manager [instance: 285e807d-426d-4b4a-b500-e89f92b9172a]   File &quot;/var/lib/kolla/venv/lib/python2.7/site-packages/oslo_utils/excutils.py&quot;, line 196, in force_reraise</span><br><span class="line">2022-08-20 16:39:16.770 3711 ERROR nova.compute.manager [instance: 285e807d-426d-4b4a-b500-e89f92b9172a]     six.reraise(self.type_, self.value, self.tb)</span><br><span class="line">2022-08-20 16:39:16.770 3711 ERROR nova.compute.manager [instance: 285e807d-426d-4b4a-b500-e89f92b9172a]   File &quot;/var/lib/kolla/venv/lib/python2.7/site-packages/nova/virt/libvirt/driver.py&quot;, line 6397, in _create_domain_and_network</span><br><span class="line">2022-08-20 16:39:16.770 3711 ERROR nova.compute.manager [instance: 285e807d-426d-4b4a-b500-e89f92b9172a]     post_xml_callback=post_xml_callback)</span><br><span class="line">2022-08-20 16:39:16.770 3711 ERROR nova.compute.manager [instance: 285e807d-426d-4b4a-b500-e89f92b9172a]   File &quot;/var/lib/kolla/venv/lib/python2.7/site-packages/nova/virt/libvirt/driver.py&quot;, line 6328, in _create_domain</span><br><span class="line">2022-08-20 16:39:16.770 3711 ERROR nova.compute.manager [instance: 285e807d-426d-4b4a-b500-e89f92b9172a]     guest.launch(pause=pause)</span><br><span class="line">2022-08-20 16:39:16.770 3711 ERROR nova.compute.manager [instance: 285e807d-426d-4b4a-b500-e89f92b9172a]   File &quot;/var/lib/kolla/venv/lib/python2.7/site-packages/nova/virt/libvirt/guest.py&quot;, line 145, in launch</span><br><span class="line">2022-08-20 16:39:16.770 3711 ERROR nova.compute.manager [instance: 285e807d-426d-4b4a-b500-e89f92b9172a]     self._encoded_xml, errors=&#x27;ignore&#x27;)</span><br><span class="line">2022-08-20 16:39:16.770 3711 ERROR nova.compute.manager [instance: 285e807d-426d-4b4a-b500-e89f92b9172a]   File &quot;/var/lib/kolla/venv/lib/python2.7/site-packages/oslo_utils/excutils.py&quot;, line 220, in __exit__</span><br><span class="line">2022-08-20 16:39:16.770 3711 ERROR nova.compute.manager [instance: 285e807d-426d-4b4a-b500-e89f92b9172a]     self.force_reraise()</span><br><span class="line">2022-08-20 16:39:16.770 3711 ERROR nova.compute.manager [instance: 285e807d-426d-4b4a-b500-e89f92b9172a]   File &quot;/var/lib/kolla/venv/lib/python2.7/site-packages/oslo_utils/excutils.py&quot;, line 196, in force_reraise</span><br><span class="line">2022-08-20 16:39:16.770 3711 ERROR nova.compute.manager [instance: 285e807d-426d-4b4a-b500-e89f92b9172a]     six.reraise(self.type_, self.value, self.tb)</span><br><span class="line">2022-08-20 16:39:16.770 3711 ERROR nova.compute.manager [instance: 285e807d-426d-4b4a-b500-e89f92b9172a]   File &quot;/var/lib/kolla/venv/lib/python2.7/site-packages/nova/virt/libvirt/guest.py&quot;, line 140, in launch</span><br><span class="line">2022-08-20 16:39:16.770 3711 ERROR nova.compute.manager [instance: 285e807d-426d-4b4a-b500-e89f92b9172a]     return self._domain.createWithFlags(flags)</span><br><span class="line">2022-08-20 16:39:16.770 3711 ERROR nova.compute.manager [instance: 285e807d-426d-4b4a-b500-e89f92b9172a]   File &quot;/var/lib/kolla/venv/lib/python2.7/site-packages/eventlet/tpool.py&quot;, line 190, in doit</span><br><span class="line">2022-08-20 16:39:16.770 3711 ERROR nova.compute.manager [instance: 285e807d-426d-4b4a-b500-e89f92b9172a]     result = proxy_call(self._autowrap, f, *args, **kwargs)</span><br><span class="line">2022-08-20 16:39:16.770 3711 ERROR nova.compute.manager [instance: 285e807d-426d-4b4a-b500-e89f92b9172a]   File &quot;/var/lib/kolla/venv/lib/python2.7/site-packages/eventlet/tpool.py&quot;, line 148, in proxy_call</span><br><span class="line">2022-08-20 16:39:16.770 3711 ERROR nova.compute.manager [instance: 285e807d-426d-4b4a-b500-e89f92b9172a]     rv = execute(f, *args, **kwargs)</span><br><span class="line">2022-08-20 16:39:16.770 3711 ERROR nova.compute.manager [instance: 285e807d-426d-4b4a-b500-e89f92b9172a]   File &quot;/var/lib/kolla/venv/lib/python2.7/site-packages/eventlet/tpool.py&quot;, line 129, in execute</span><br><span class="line">2022-08-20 16:39:16.770 3711 ERROR nova.compute.manager [instance: 285e807d-426d-4b4a-b500-e89f92b9172a]     six.reraise(c, e, tb)</span><br><span class="line">2022-08-20 16:39:16.770 3711 ERROR nova.compute.manager [instance: 285e807d-426d-4b4a-b500-e89f92b9172a]   File &quot;/var/lib/kolla/venv/lib/python2.7/site-packages/eventlet/tpool.py&quot;, line 83, in tworker</span><br><span class="line">2022-08-20 16:39:16.770 3711 ERROR nova.compute.manager [instance: 285e807d-426d-4b4a-b500-e89f92b9172a]     rv = meth(*args, **kwargs)</span><br><span class="line">2022-08-20 16:39:16.770 3711 ERROR nova.compute.manager [instance: 285e807d-426d-4b4a-b500-e89f92b9172a]   File &quot;/usr/lib64/python2.7/site-packages/libvirt.py&quot;, line 1110, in createWithFlags</span><br><span class="line">2022-08-20 16:39:16.770 3711 ERROR nova.compute.manager [instance: 285e807d-426d-4b4a-b500-e89f92b9172a]     if ret == -1: raise libvirtError (&#x27;virDomainCreateWithFlags() failed&#x27;, dom=self)</span><br><span class="line">2022-08-20 16:39:16.770 3711 ERROR nova.compute.manager [instance: 285e807d-426d-4b4a-b500-e89f92b9172a] libvirtError: internal error: process exited while connecting to monitor: 2022-08-20T16:39:15.220119Z qemu-kvm: -device qxl-vga,id=video0,ram_size=67108864,vram_size=67108864,vram64_size_mb=0,vgamem_mb=32,max_outputs=1,bus=pci.0,addr=0x2: vhost_region_add_section:Section rounded to 0 prior to previous c0000</span><br><span class="line">2022-08-20 16:39:16.770 3711 ERROR nova.compute.manager [instance: 285e807d-426d-4b4a-b500-e89f92b9172a] 2022-08-20T16:39:15.220245Z qemu-kvm: -device qxl-vga,id=video0,ram_size=67108864,vram_size=67108864,vram64_size_mb=0,vgamem_mb=32,max_outputs=1,bus=pci.0,addr=0x2: vhost_region_add_section:Section rounded to 0 prior to previous c0000</span><br><span class="line">2022-08-20 16:39:16.770 3711 ERROR nova.compute.manager [instance: 285e807d-426d-4b4a-b500-e89f92b9172a] 2022-08-20T16:39:15.224010Z qemu-kvm: -device vfio-pci,host=0000:b1:00.0,id=hostdev0,bus=pci.0,addr=0xb: vfio error: 0000:b1:00.0: group 183 is not viable</span><br><span class="line">2022-08-20 16:39:16.770 3711 ERROR nova.compute.manager [instance: 285e807d-426d-4b4a-b500-e89f92b9172a] Please ensure all devices within the iommu_group are bound to their vfio bus driver.</span><br><span class="line">2022-08-20 16:39:16.770 3711 ERROR nova.compute.manager [instance: 285e807d-426d-4b4a-b500-e89f92b9172a] unload codec helper module</span><br><span class="line">2022-08-20 16:39:16.770 3711 ERROR nova.compute.manager [instance: 285e807d-426d-4b4a-b500-e89f92b9172a] unload codec helper module done</span><br><span class="line">2022-08-20 16:39:16.770 3711 ERROR nova.compute.manager [instance: 285e807d-426d-4b4a-b500-e89f92b9172a] unload x264 encoder module done</span><br><span class="line">2022-08-20 16:39:16.770 3711 ERROR nova.compute.manager [instance: 285e807d-426d-4b4a-b500-e89f92b9172a] unload aac encode compress module</span><br><span class="line">2022-08-20 16:39:16.770 3711 ERROR nova.compute.manager [instance: 285e807d-426d-4b4a-b500-e89f92b9172a] unload aac encode compress done</span><br><span class="line">2022-08-20 16:39:16.770 3711 ERROR nova.compute.manager [instance: 285e807d-426d-4b4a-b500-e89f92b9172a] unload aac decode compress module</span><br><span class="line">2022-08-20 16:39:16.770 3711 ERROR nova.compute.manager [instance: 285e807d-426d-4b4a-b500-e89f92b9172a] unload aac decode compress done</span><br><span class="line">2022-08-20 16:39:16.770 3711 ERROR nova.compute.manager [instance: 285e807d-426d-4b4a-b500-e89f92b9172a]</span><br><span class="line">2022-08-20 16:39:18.018 3711 INFO nova.compute.manager [req-5656f7a4-5fcf-4f5a-b72b-2f425087cfb4 20f2649ce88142f19048b0aa090b78a1 a1670d65a7e644e2a78fa31a001f284b - default default] [instance: 285e807d-426d-4b4a-b500-e89f92b9172a] Took 1.20 seconds to deallocate network for instance.</span><br><span class="line">2022-08-20 16:39:18.330 3711 INFO nova.scheduler.client.report [req-5656f7a4-5fcf-4f5a-b72b-2f425087cfb4 20f2649ce88142f19048b0aa090b78a1 a1670d65a7e644e2a78fa31a001f284b - default default] Deleted allocation for instance 285e807d-426d-4b4a-b500-e89f92b9172a</span><br><span class="line">2022-08-20 17:00:09.337 3711 INFO nova.compute.manager [req-c902ff9e-9ef9-484a-87ed-30e51a8c7b03 - - - - -] Running instance usage audit for host node01 from 2022-08-20 16:00:00 to 2022-08-20 17:00:00. 3 instances.</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="操作"><a href="#操作" class="headerlink" title="操作"></a>操作</h3><h4 id="a-更换设备的驱动为vfio-pci"><a href="#a-更换设备的驱动为vfio-pci" class="headerlink" title="a. 更换设备的驱动为vfio_pci"></a>a. 更换设备的驱动为vfio_pci</h4><ol>
<li><p>配置加载vfio-pci模块，编辑<code>/etc/modules-load.d/openstack-gpu.conf</code>，添加如下内容：</p>
 <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">vfio_pci</span><br><span class="line">pci_stub</span><br><span class="line">vfio</span><br><span class="line">vfio_iommu_type1</span><br><span class="line">kvm</span><br><span class="line">kvm_intel</span><br></pre></td></tr></table></figure>
</li>
<li><p>配置使用vfio驱动的设备（这里的设备就是<code>lspci</code>查到的GPU设备信息），编辑<code>/etc/modprobe.d/vfio.conf</code>，添加如下配置：</p>
 <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">options vfio-pci ids=10de:1e30,10de:10f7,10de:1ad6,10de:1ad7</span><br></pre></td></tr></table></figure>
</li>
<li><p>重启系统，通过<code>dmesg</code>查看驱动加载情况。</p>
</li>
</ol>
<p><img src="/2022/08/22/OpenStack%E4%BD%BF%E7%94%A8%EF%BC%9AGPU%E5%8D%A1%E4%BD%BF%E7%94%A8/dmesg%E4%BF%A1%E6%81%AF.png" alt="dmesg信息"></p>
<ol start="4">
<li>更新驱动后，GPU卡的各类设备驱动信息如下，Audio device与Serial bus的驱动变为vfio-pci。</li>
</ol>
<p><img src="/2022/08/22/OpenStack%E4%BD%BF%E7%94%A8%EF%BC%9AGPU%E5%8D%A1%E4%BD%BF%E7%94%A8/%E6%9B%B4%E6%8D%A2vfio%E9%A9%B1%E5%8A%A8%E5%90%8E.png" alt="更换vfio驱动后"></p>
<h4 id="b-更改nova配置信息"><a href="#b-更改nova配置信息" class="headerlink" title="b. 更改nova配置信息"></a>b. 更改nova配置信息</h4><ol>
<li><p>修改nova-api.conf，增加如下PCI信息：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[pci]</span><br><span class="line">alias = &#123;&quot;name&quot;:&quot;a1&quot;,&quot;product_id&quot;:&quot;1e30&quot;,&quot;vendor_id&quot;:&quot;10de&quot;,&quot;device_type&quot;:&quot;type-PCI&quot;&#125;</span><br><span class="line">alias = &#123;&quot;name&quot;:&quot;a2&quot;,&quot;product_id&quot;:&quot;10f7&quot;,&quot;vendor_id&quot;:&quot;10de&quot;,&quot;device_type&quot;:&quot;type-PCI&quot;&#125;</span><br><span class="line">alias = &#123;&quot;name&quot;:&quot;a3&quot;,&quot;product_id&quot;:&quot;1ad6&quot;,&quot;vendor_id&quot;:&quot;10de&quot;,&quot;device_type&quot;:&quot;type-PCI&quot;&#125;</span><br><span class="line">alias = &#123;&quot;name&quot;:&quot;a4&quot;,&quot;product_id&quot;:&quot;1ad7&quot;,&quot;vendor_id&quot;:&quot;10de&quot;,&quot;device_type&quot;:&quot;type-PCI&quot;&#125;</span><br></pre></td></tr></table></figure>


</li>
</ol>
<ol start="2">
<li><p>修改nova-scheduler.conf文件，添加<code>PciPassthroughFilter</code>，同时添加<code>available_filters = nova.scheduler.filters.all_filters</code>，如下：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[filter_scheduler]</span><br><span class="line">enabled_filters = RetryFilter,AvailabilityZoneFilter,ComputeFilter,ComputeCapabilitiesFilter,ImagePropertiesFilter,ServerGroupAntiAffinityFilter,ServerGroupAffinityFilter,AggregateCoreFilter,AggregateDiskFilter,DifferentHostFilter,SameHostFilter,PciPassthroughFilter</span><br><span class="line">available_filters = nova.scheduler.filters.all_filters</span><br></pre></td></tr></table></figure>
</li>
<li><p>配置计算节点，编辑nova-compute.conf文件，如下：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[pci]</span><br><span class="line">alias = &#123;&quot;name&quot;:&quot;a1&quot;,&quot;product_id&quot;:&quot;1e30&quot;,&quot;vendor_id&quot;:&quot;10de&quot;,&quot;device_type&quot;:&quot;type-PCI&quot;&#125;</span><br><span class="line">alias = &#123;&quot;name&quot;:&quot;a2&quot;,&quot;product_id&quot;:&quot;10f7&quot;,&quot;vendor_id&quot;:&quot;10de&quot;,&quot;device_type&quot;:&quot;type-PCI&quot;&#125;</span><br><span class="line">alias = &#123;&quot;name&quot;:&quot;a3&quot;,&quot;product_id&quot;:&quot;1ad6&quot;,&quot;vendor_id&quot;:&quot;10de&quot;,&quot;device_type&quot;:&quot;type-PCI&quot;&#125;</span><br><span class="line">alias = &#123;&quot;name&quot;:&quot;a4&quot;,&quot;product_id&quot;:&quot;1ad7&quot;,&quot;vendor_id&quot;:&quot;10de&quot;,&quot;device_type&quot;:&quot;type-PCI&quot;&#125;</span><br><span class="line">passthrough_whitelist = [&#123;&quot;vendor_id&quot;: &quot;10de&quot;, &quot;product_id&quot;: &quot;1e30&quot;&#125;, &#123;&quot;vendor_id&quot;: &quot;10de&quot;, &quot;product_id&quot;: &quot;10f7&quot;&#125;, &#123;&quot;vendor_id&quot;: &quot;10de&quot;, &quot;product_id&quot;: &quot;1ad6&quot;&#125;, &#123;&quot;vendor_id&quot;: &quot;10de&quot;, &quot;product_id&quot;: &quot;1ad7&quot;&#125;]</span><br></pre></td></tr></table></figure>

</li>
</ol>
<h4 id="c-创建GPU-Flavor"><a href="#c-创建GPU-Flavor" class="headerlink" title="c. 创建GPU Flavor"></a>c. 创建GPU Flavor</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">openstack flavor create --ram 2048 --disk 20 --vcpus 2 m1.large</span><br><span class="line">openstack flavor set m1.large --property pci_passthrough:alias=&#x27;a1:1,a2:1,a3:1,a4:1&#x27;</span><br></pre></td></tr></table></figure>

<p>使用该flavor创建虚机即可。</p>
<h3 id="备注"><a href="#备注" class="headerlink" title="备注"></a>备注</h3><p>正确instacne xml内容如下：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br></pre></td><td class="code"><pre><span class="line">()[root@node01 /]# virsh dumpxml instance-00000008</span><br><span class="line"><span class="tag">&lt;<span class="name">domain</span> <span class="attr">type</span>=<span class="string">&#x27;kvm&#x27;</span> <span class="attr">id</span>=<span class="string">&#x27;5&#x27;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">name</span>&gt;</span>instance-00000008<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">uuid</span>&gt;</span>1f4bb25c-d665-4f03-a0f4-6857af066781<span class="tag">&lt;/<span class="name">uuid</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">metadata</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">nova:instance</span> <span class="attr">xmlns:nova</span>=<span class="string">&quot;http://openstack.org/xmlns/libvirt/nova/1.0&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">nova:package</span> <span class="attr">version</span>=<span class="string">&quot;20.6.1&quot;</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">nova:name</span>&gt;</span>win10-1<span class="tag">&lt;/<span class="name">nova:name</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">nova:creationTime</span>&gt;</span>2022-08-20 17:14:33<span class="tag">&lt;/<span class="name">nova:creationTime</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">nova:flavor</span> <span class="attr">name</span>=<span class="string">&quot;win10_4C8G_GPU&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">nova:memory</span>&gt;</span>8192<span class="tag">&lt;/<span class="name">nova:memory</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">nova:disk</span>&gt;</span>100<span class="tag">&lt;/<span class="name">nova:disk</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">nova:swap</span>&gt;</span>0<span class="tag">&lt;/<span class="name">nova:swap</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">nova:ephemeral</span>&gt;</span>0<span class="tag">&lt;/<span class="name">nova:ephemeral</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">nova:vcpus</span>&gt;</span>4<span class="tag">&lt;/<span class="name">nova:vcpus</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">nova:flavor</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">nova:owner</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">nova:user</span> <span class="attr">uuid</span>=<span class="string">&quot;20f2649ce88142f19048b0aa090b78a1&quot;</span>&gt;</span>admin<span class="tag">&lt;/<span class="name">nova:user</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">nova:project</span> <span class="attr">uuid</span>=<span class="string">&quot;a1670d65a7e644e2a78fa31a001f284b&quot;</span>&gt;</span>admin<span class="tag">&lt;/<span class="name">nova:project</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">nova:owner</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">nova:instance</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">metadata</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">memory</span> <span class="attr">unit</span>=<span class="string">&#x27;KiB&#x27;</span>&gt;</span>8388608<span class="tag">&lt;/<span class="name">memory</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">currentMemory</span> <span class="attr">unit</span>=<span class="string">&#x27;KiB&#x27;</span>&gt;</span>8388608<span class="tag">&lt;/<span class="name">currentMemory</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">memoryBacking</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">hugepages</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">page</span> <span class="attr">size</span>=<span class="string">&#x27;1048576&#x27;</span> <span class="attr">unit</span>=<span class="string">&#x27;KiB&#x27;</span> <span class="attr">nodeset</span>=<span class="string">&#x27;0&#x27;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">hugepages</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">memoryBacking</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">vcpu</span> <span class="attr">placement</span>=<span class="string">&#x27;static&#x27;</span>&gt;</span>4<span class="tag">&lt;/<span class="name">vcpu</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">cputune</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">shares</span>&gt;</span>4096<span class="tag">&lt;/<span class="name">shares</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">vcpupin</span> <span class="attr">vcpu</span>=<span class="string">&#x27;0&#x27;</span> <span class="attr">cpuset</span>=<span class="string">&#x27;17-31,49-63&#x27;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">vcpupin</span> <span class="attr">vcpu</span>=<span class="string">&#x27;1&#x27;</span> <span class="attr">cpuset</span>=<span class="string">&#x27;17-31,49-63&#x27;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">vcpupin</span> <span class="attr">vcpu</span>=<span class="string">&#x27;2&#x27;</span> <span class="attr">cpuset</span>=<span class="string">&#x27;17-31,49-63&#x27;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">vcpupin</span> <span class="attr">vcpu</span>=<span class="string">&#x27;3&#x27;</span> <span class="attr">cpuset</span>=<span class="string">&#x27;17-31,49-63&#x27;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">emulatorpin</span> <span class="attr">cpuset</span>=<span class="string">&#x27;17-31,49-63&#x27;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">cputune</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">numatune</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">memory</span> <span class="attr">mode</span>=<span class="string">&#x27;strict&#x27;</span> <span class="attr">nodeset</span>=<span class="string">&#x27;1&#x27;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">memnode</span> <span class="attr">cellid</span>=<span class="string">&#x27;0&#x27;</span> <span class="attr">mode</span>=<span class="string">&#x27;strict&#x27;</span> <span class="attr">nodeset</span>=<span class="string">&#x27;1&#x27;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">numatune</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">resource</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">partition</span>&gt;</span>/machine<span class="tag">&lt;/<span class="name">partition</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">resource</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">sysinfo</span> <span class="attr">type</span>=<span class="string">&#x27;smbios&#x27;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">system</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">entry</span> <span class="attr">name</span>=<span class="string">&#x27;manufacturer&#x27;</span>&gt;</span>OpenStack Foundation<span class="tag">&lt;/<span class="name">entry</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">entry</span> <span class="attr">name</span>=<span class="string">&#x27;product&#x27;</span>&gt;</span>OpenStack Nova<span class="tag">&lt;/<span class="name">entry</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">entry</span> <span class="attr">name</span>=<span class="string">&#x27;version&#x27;</span>&gt;</span>20.6.1<span class="tag">&lt;/<span class="name">entry</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">entry</span> <span class="attr">name</span>=<span class="string">&#x27;serial&#x27;</span>&gt;</span>1f4bb25c-d665-4f03-a0f4-6857af066781<span class="tag">&lt;/<span class="name">entry</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">entry</span> <span class="attr">name</span>=<span class="string">&#x27;uuid&#x27;</span>&gt;</span>1f4bb25c-d665-4f03-a0f4-6857af066781<span class="tag">&lt;/<span class="name">entry</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">entry</span> <span class="attr">name</span>=<span class="string">&#x27;family&#x27;</span>&gt;</span>Virtual Machine<span class="tag">&lt;/<span class="name">entry</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">system</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">sysinfo</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">os</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">type</span> <span class="attr">arch</span>=<span class="string">&#x27;x86_64&#x27;</span> <span class="attr">machine</span>=<span class="string">&#x27;pc-i440fx-rhel7.2.0&#x27;</span>&gt;</span>hvm<span class="tag">&lt;/<span class="name">type</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">boot</span> <span class="attr">dev</span>=<span class="string">&#x27;hd&#x27;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">smbios</span> <span class="attr">mode</span>=<span class="string">&#x27;sysinfo&#x27;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">os</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">features</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">acpi</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">apic</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">features</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">cpu</span> <span class="attr">mode</span>=<span class="string">&#x27;custom&#x27;</span> <span class="attr">match</span>=<span class="string">&#x27;exact&#x27;</span> <span class="attr">check</span>=<span class="string">&#x27;full&#x27;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">model</span> <span class="attr">fallback</span>=<span class="string">&#x27;forbid&#x27;</span>&gt;</span>Cascadelake-Server<span class="tag">&lt;/<span class="name">model</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">vendor</span>&gt;</span>Intel<span class="tag">&lt;/<span class="name">vendor</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">topology</span> <span class="attr">sockets</span>=<span class="string">&#x27;2&#x27;</span> <span class="attr">cores</span>=<span class="string">&#x27;1&#x27;</span> <span class="attr">threads</span>=<span class="string">&#x27;2&#x27;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">feature</span> <span class="attr">policy</span>=<span class="string">&#x27;require&#x27;</span> <span class="attr">name</span>=<span class="string">&#x27;ss&#x27;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">feature</span> <span class="attr">policy</span>=<span class="string">&#x27;require&#x27;</span> <span class="attr">name</span>=<span class="string">&#x27;vmx&#x27;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">feature</span> <span class="attr">policy</span>=<span class="string">&#x27;require&#x27;</span> <span class="attr">name</span>=<span class="string">&#x27;hypervisor&#x27;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">feature</span> <span class="attr">policy</span>=<span class="string">&#x27;require&#x27;</span> <span class="attr">name</span>=<span class="string">&#x27;tsc_adjust&#x27;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">feature</span> <span class="attr">policy</span>=<span class="string">&#x27;require&#x27;</span> <span class="attr">name</span>=<span class="string">&#x27;avx512ifma&#x27;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">feature</span> <span class="attr">policy</span>=<span class="string">&#x27;require&#x27;</span> <span class="attr">name</span>=<span class="string">&#x27;sha-ni&#x27;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">feature</span> <span class="attr">policy</span>=<span class="string">&#x27;require&#x27;</span> <span class="attr">name</span>=<span class="string">&#x27;avx512vbmi&#x27;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">feature</span> <span class="attr">policy</span>=<span class="string">&#x27;require&#x27;</span> <span class="attr">name</span>=<span class="string">&#x27;umip&#x27;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">feature</span> <span class="attr">policy</span>=<span class="string">&#x27;require&#x27;</span> <span class="attr">name</span>=<span class="string">&#x27;pku&#x27;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">feature</span> <span class="attr">policy</span>=<span class="string">&#x27;require&#x27;</span> <span class="attr">name</span>=<span class="string">&#x27;avx512vbmi2&#x27;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">feature</span> <span class="attr">policy</span>=<span class="string">&#x27;require&#x27;</span> <span class="attr">name</span>=<span class="string">&#x27;gfni&#x27;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">feature</span> <span class="attr">policy</span>=<span class="string">&#x27;require&#x27;</span> <span class="attr">name</span>=<span class="string">&#x27;vaes&#x27;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">feature</span> <span class="attr">policy</span>=<span class="string">&#x27;require&#x27;</span> <span class="attr">name</span>=<span class="string">&#x27;vpclmulqdq&#x27;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">feature</span> <span class="attr">policy</span>=<span class="string">&#x27;require&#x27;</span> <span class="attr">name</span>=<span class="string">&#x27;avx512bitalg&#x27;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">feature</span> <span class="attr">policy</span>=<span class="string">&#x27;require&#x27;</span> <span class="attr">name</span>=<span class="string">&#x27;avx512-vpopcntdq&#x27;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">feature</span> <span class="attr">policy</span>=<span class="string">&#x27;require&#x27;</span> <span class="attr">name</span>=<span class="string">&#x27;la57&#x27;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">feature</span> <span class="attr">policy</span>=<span class="string">&#x27;require&#x27;</span> <span class="attr">name</span>=<span class="string">&#x27;md-clear&#x27;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">feature</span> <span class="attr">policy</span>=<span class="string">&#x27;require&#x27;</span> <span class="attr">name</span>=<span class="string">&#x27;stibp&#x27;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">feature</span> <span class="attr">policy</span>=<span class="string">&#x27;require&#x27;</span> <span class="attr">name</span>=<span class="string">&#x27;arch-capabilities&#x27;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">feature</span> <span class="attr">policy</span>=<span class="string">&#x27;require&#x27;</span> <span class="attr">name</span>=<span class="string">&#x27;xsaves&#x27;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">feature</span> <span class="attr">policy</span>=<span class="string">&#x27;require&#x27;</span> <span class="attr">name</span>=<span class="string">&#x27;ibpb&#x27;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">feature</span> <span class="attr">policy</span>=<span class="string">&#x27;disable&#x27;</span> <span class="attr">name</span>=<span class="string">&#x27;mpx&#x27;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">feature</span> <span class="attr">policy</span>=<span class="string">&#x27;disable&#x27;</span> <span class="attr">name</span>=<span class="string">&#x27;arat&#x27;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">numa</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">cell</span> <span class="attr">id</span>=<span class="string">&#x27;0&#x27;</span> <span class="attr">cpus</span>=<span class="string">&#x27;0-3&#x27;</span> <span class="attr">memory</span>=<span class="string">&#x27;8388608&#x27;</span> <span class="attr">unit</span>=<span class="string">&#x27;KiB&#x27;</span> <span class="attr">memAccess</span>=<span class="string">&#x27;shared&#x27;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">numa</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">cpu</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">clock</span> <span class="attr">offset</span>=<span class="string">&#x27;utc&#x27;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">timer</span> <span class="attr">name</span>=<span class="string">&#x27;pit&#x27;</span> <span class="attr">tickpolicy</span>=<span class="string">&#x27;delay&#x27;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">timer</span> <span class="attr">name</span>=<span class="string">&#x27;rtc&#x27;</span> <span class="attr">tickpolicy</span>=<span class="string">&#x27;catchup&#x27;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">timer</span> <span class="attr">name</span>=<span class="string">&#x27;hpet&#x27;</span> <span class="attr">present</span>=<span class="string">&#x27;no&#x27;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">clock</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">on_poweroff</span>&gt;</span>destroy<span class="tag">&lt;/<span class="name">on_poweroff</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">on_reboot</span>&gt;</span>restart<span class="tag">&lt;/<span class="name">on_reboot</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">on_crash</span>&gt;</span>destroy<span class="tag">&lt;/<span class="name">on_crash</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">devices</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">emulator</span>&gt;</span>/usr/libexec/qemu-kvm<span class="tag">&lt;/<span class="name">emulator</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">disk</span> <span class="attr">type</span>=<span class="string">&#x27;network&#x27;</span> <span class="attr">device</span>=<span class="string">&#x27;disk&#x27;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">driver</span> <span class="attr">name</span>=<span class="string">&#x27;qemu&#x27;</span> <span class="attr">type</span>=<span class="string">&#x27;raw&#x27;</span> <span class="attr">cache</span>=<span class="string">&#x27;writeback&#x27;</span> <span class="attr">discard</span>=<span class="string">&#x27;unmap&#x27;</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">auth</span> <span class="attr">username</span>=<span class="string">&#x27;cinder&#x27;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">secret</span> <span class="attr">type</span>=<span class="string">&#x27;ceph&#x27;</span> <span class="attr">uuid</span>=<span class="string">&#x27;457eb676-33da-42ec-9a8c-9293d545c337&#x27;</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">auth</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">source</span> <span class="attr">protocol</span>=<span class="string">&#x27;rbd&#x27;</span> <span class="attr">name</span>=<span class="string">&#x27;cinder-volumes/9dc4fcd1-a258-4f5c-8f3f-9029f699b064&#x27;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">host</span> <span class="attr">name</span>=<span class="string">&#x27;10.99.22.45&#x27;</span> <span class="attr">port</span>=<span class="string">&#x27;6789&#x27;</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">source</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">target</span> <span class="attr">dev</span>=<span class="string">&#x27;vda&#x27;</span> <span class="attr">bus</span>=<span class="string">&#x27;virtio&#x27;</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">serial</span>&gt;</span>9dc4fcd1-a258-4f5c-8f3f-9029f699b064<span class="tag">&lt;/<span class="name">serial</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">alias</span> <span class="attr">name</span>=<span class="string">&#x27;virtio-disk0&#x27;</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">address</span> <span class="attr">type</span>=<span class="string">&#x27;pci&#x27;</span> <span class="attr">domain</span>=<span class="string">&#x27;0x0000&#x27;</span> <span class="attr">bus</span>=<span class="string">&#x27;0x00&#x27;</span> <span class="attr">slot</span>=<span class="string">&#x27;0x0a&#x27;</span> <span class="attr">function</span>=<span class="string">&#x27;0x0&#x27;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">disk</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">controller</span> <span class="attr">type</span>=<span class="string">&#x27;usb&#x27;</span> <span class="attr">index</span>=<span class="string">&#x27;1&#x27;</span> <span class="attr">model</span>=<span class="string">&#x27;ehci&#x27;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">alias</span> <span class="attr">name</span>=<span class="string">&#x27;usb1&#x27;</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">address</span> <span class="attr">type</span>=<span class="string">&#x27;pci&#x27;</span> <span class="attr">domain</span>=<span class="string">&#x27;0x0000&#x27;</span> <span class="attr">bus</span>=<span class="string">&#x27;0x00&#x27;</span> <span class="attr">slot</span>=<span class="string">&#x27;0x05&#x27;</span> <span class="attr">function</span>=<span class="string">&#x27;0x0&#x27;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">controller</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">controller</span> <span class="attr">type</span>=<span class="string">&#x27;usb&#x27;</span> <span class="attr">index</span>=<span class="string">&#x27;2&#x27;</span> <span class="attr">model</span>=<span class="string">&#x27;nec-xhci&#x27;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">alias</span> <span class="attr">name</span>=<span class="string">&#x27;usb2&#x27;</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">address</span> <span class="attr">type</span>=<span class="string">&#x27;pci&#x27;</span> <span class="attr">domain</span>=<span class="string">&#x27;0x0000&#x27;</span> <span class="attr">bus</span>=<span class="string">&#x27;0x00&#x27;</span> <span class="attr">slot</span>=<span class="string">&#x27;0x06&#x27;</span> <span class="attr">function</span>=<span class="string">&#x27;0x0&#x27;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">controller</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">controller</span> <span class="attr">type</span>=<span class="string">&#x27;usb&#x27;</span> <span class="attr">index</span>=<span class="string">&#x27;3&#x27;</span> <span class="attr">model</span>=<span class="string">&#x27;ehci&#x27;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">alias</span> <span class="attr">name</span>=<span class="string">&#x27;usb3&#x27;</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">address</span> <span class="attr">type</span>=<span class="string">&#x27;pci&#x27;</span> <span class="attr">domain</span>=<span class="string">&#x27;0x0000&#x27;</span> <span class="attr">bus</span>=<span class="string">&#x27;0x00&#x27;</span> <span class="attr">slot</span>=<span class="string">&#x27;0x07&#x27;</span> <span class="attr">function</span>=<span class="string">&#x27;0x0&#x27;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">controller</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">controller</span> <span class="attr">type</span>=<span class="string">&#x27;usb&#x27;</span> <span class="attr">index</span>=<span class="string">&#x27;4&#x27;</span> <span class="attr">model</span>=<span class="string">&#x27;nec-xhci&#x27;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">alias</span> <span class="attr">name</span>=<span class="string">&#x27;usb4&#x27;</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">address</span> <span class="attr">type</span>=<span class="string">&#x27;pci&#x27;</span> <span class="attr">domain</span>=<span class="string">&#x27;0x0000&#x27;</span> <span class="attr">bus</span>=<span class="string">&#x27;0x00&#x27;</span> <span class="attr">slot</span>=<span class="string">&#x27;0x08&#x27;</span> <span class="attr">function</span>=<span class="string">&#x27;0x0&#x27;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">controller</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">controller</span> <span class="attr">type</span>=<span class="string">&#x27;usb&#x27;</span> <span class="attr">index</span>=<span class="string">&#x27;0&#x27;</span> <span class="attr">model</span>=<span class="string">&#x27;piix3-uhci&#x27;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">alias</span> <span class="attr">name</span>=<span class="string">&#x27;usb&#x27;</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">address</span> <span class="attr">type</span>=<span class="string">&#x27;pci&#x27;</span> <span class="attr">domain</span>=<span class="string">&#x27;0x0000&#x27;</span> <span class="attr">bus</span>=<span class="string">&#x27;0x00&#x27;</span> <span class="attr">slot</span>=<span class="string">&#x27;0x01&#x27;</span> <span class="attr">function</span>=<span class="string">&#x27;0x2&#x27;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">controller</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">controller</span> <span class="attr">type</span>=<span class="string">&#x27;pci&#x27;</span> <span class="attr">index</span>=<span class="string">&#x27;0&#x27;</span> <span class="attr">model</span>=<span class="string">&#x27;pci-root&#x27;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">alias</span> <span class="attr">name</span>=<span class="string">&#x27;pci.0&#x27;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">controller</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">controller</span> <span class="attr">type</span>=<span class="string">&#x27;virtio-serial&#x27;</span> <span class="attr">index</span>=<span class="string">&#x27;0&#x27;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">alias</span> <span class="attr">name</span>=<span class="string">&#x27;virtio-serial0&#x27;</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">address</span> <span class="attr">type</span>=<span class="string">&#x27;pci&#x27;</span> <span class="attr">domain</span>=<span class="string">&#x27;0x0000&#x27;</span> <span class="attr">bus</span>=<span class="string">&#x27;0x00&#x27;</span> <span class="attr">slot</span>=<span class="string">&#x27;0x09&#x27;</span> <span class="attr">function</span>=<span class="string">&#x27;0x0&#x27;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">controller</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">interface</span> <span class="attr">type</span>=<span class="string">&#x27;bridge&#x27;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">mac</span> <span class="attr">address</span>=<span class="string">&#x27;fa:16:3e:f1:a6:a9&#x27;</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">source</span> <span class="attr">bridge</span>=<span class="string">&#x27;br-int&#x27;</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">virtualport</span> <span class="attr">type</span>=<span class="string">&#x27;openvswitch&#x27;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">parameters</span> <span class="attr">interfaceid</span>=<span class="string">&#x27;f91ebe33-a80c-4038-a2f2-e543dbe509d9&#x27;</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">virtualport</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">target</span> <span class="attr">dev</span>=<span class="string">&#x27;tapf91ebe33-a8&#x27;</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">model</span> <span class="attr">type</span>=<span class="string">&#x27;virtio&#x27;</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">mtu</span> <span class="attr">size</span>=<span class="string">&#x27;1500&#x27;</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">alias</span> <span class="attr">name</span>=<span class="string">&#x27;net0&#x27;</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">address</span> <span class="attr">type</span>=<span class="string">&#x27;pci&#x27;</span> <span class="attr">domain</span>=<span class="string">&#x27;0x0000&#x27;</span> <span class="attr">bus</span>=<span class="string">&#x27;0x00&#x27;</span> <span class="attr">slot</span>=<span class="string">&#x27;0x03&#x27;</span> <span class="attr">function</span>=<span class="string">&#x27;0x0&#x27;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">interface</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">serial</span> <span class="attr">type</span>=<span class="string">&#x27;pty&#x27;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">source</span> <span class="attr">path</span>=<span class="string">&#x27;/dev/pts/5&#x27;</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">log</span> <span class="attr">file</span>=<span class="string">&#x27;/var/lib/nova/instances/1f4bb25c-d665-4f03-a0f4-6857af066781/console.log&#x27;</span> <span class="attr">append</span>=<span class="string">&#x27;off&#x27;</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">target</span> <span class="attr">type</span>=<span class="string">&#x27;isa-serial&#x27;</span> <span class="attr">port</span>=<span class="string">&#x27;0&#x27;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">model</span> <span class="attr">name</span>=<span class="string">&#x27;isa-serial&#x27;</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">target</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">alias</span> <span class="attr">name</span>=<span class="string">&#x27;serial0&#x27;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">serial</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">console</span> <span class="attr">type</span>=<span class="string">&#x27;pty&#x27;</span> <span class="attr">tty</span>=<span class="string">&#x27;/dev/pts/5&#x27;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">source</span> <span class="attr">path</span>=<span class="string">&#x27;/dev/pts/5&#x27;</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">log</span> <span class="attr">file</span>=<span class="string">&#x27;/var/lib/nova/instances/1f4bb25c-d665-4f03-a0f4-6857af066781/console.log&#x27;</span> <span class="attr">append</span>=<span class="string">&#x27;off&#x27;</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">target</span> <span class="attr">type</span>=<span class="string">&#x27;serial&#x27;</span> <span class="attr">port</span>=<span class="string">&#x27;0&#x27;</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">alias</span> <span class="attr">name</span>=<span class="string">&#x27;serial0&#x27;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">console</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">channel</span> <span class="attr">type</span>=<span class="string">&#x27;spicevmc&#x27;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">target</span> <span class="attr">type</span>=<span class="string">&#x27;virtio&#x27;</span> <span class="attr">name</span>=<span class="string">&#x27;com.redhat.spice.0&#x27;</span> <span class="attr">state</span>=<span class="string">&#x27;disconnected&#x27;</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">alias</span> <span class="attr">name</span>=<span class="string">&#x27;channel0&#x27;</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">address</span> <span class="attr">type</span>=<span class="string">&#x27;virtio-serial&#x27;</span> <span class="attr">controller</span>=<span class="string">&#x27;0&#x27;</span> <span class="attr">bus</span>=<span class="string">&#x27;0&#x27;</span> <span class="attr">port</span>=<span class="string">&#x27;1&#x27;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">channel</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">channel</span> <span class="attr">type</span>=<span class="string">&#x27;unix&#x27;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">source</span> <span class="attr">mode</span>=<span class="string">&#x27;bind&#x27;</span> <span class="attr">path</span>=<span class="string">&#x27;/var/lib/libvirt/qemu/org.qemu.guest_agent.0.instance-00000008.sock&#x27;</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">target</span> <span class="attr">type</span>=<span class="string">&#x27;virtio&#x27;</span> <span class="attr">name</span>=<span class="string">&#x27;org.qemu.guest_agent.0&#x27;</span> <span class="attr">state</span>=<span class="string">&#x27;disconnected&#x27;</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">alias</span> <span class="attr">name</span>=<span class="string">&#x27;channel1&#x27;</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">address</span> <span class="attr">type</span>=<span class="string">&#x27;virtio-serial&#x27;</span> <span class="attr">controller</span>=<span class="string">&#x27;0&#x27;</span> <span class="attr">bus</span>=<span class="string">&#x27;0&#x27;</span> <span class="attr">port</span>=<span class="string">&#x27;2&#x27;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">channel</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&#x27;mouse&#x27;</span> <span class="attr">bus</span>=<span class="string">&#x27;ps2&#x27;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">alias</span> <span class="attr">name</span>=<span class="string">&#x27;input0&#x27;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">input</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&#x27;keyboard&#x27;</span> <span class="attr">bus</span>=<span class="string">&#x27;ps2&#x27;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">alias</span> <span class="attr">name</span>=<span class="string">&#x27;input1&#x27;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">input</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">graphics</span> <span class="attr">type</span>=<span class="string">&#x27;spice&#x27;</span> <span class="attr">port</span>=<span class="string">&#x27;5903&#x27;</span> <span class="attr">autoport</span>=<span class="string">&#x27;yes&#x27;</span> <span class="attr">listen</span>=<span class="string">&#x27;0.0.0.0&#x27;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">listen</span> <span class="attr">type</span>=<span class="string">&#x27;address&#x27;</span> <span class="attr">address</span>=<span class="string">&#x27;0.0.0.0&#x27;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">graphics</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">sound</span> <span class="attr">model</span>=<span class="string">&#x27;ac97&#x27;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">alias</span> <span class="attr">name</span>=<span class="string">&#x27;sound0&#x27;</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">address</span> <span class="attr">type</span>=<span class="string">&#x27;pci&#x27;</span> <span class="attr">domain</span>=<span class="string">&#x27;0x0000&#x27;</span> <span class="attr">bus</span>=<span class="string">&#x27;0x00&#x27;</span> <span class="attr">slot</span>=<span class="string">&#x27;0x04&#x27;</span> <span class="attr">function</span>=<span class="string">&#x27;0x0&#x27;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">sound</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">video</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">model</span> <span class="attr">type</span>=<span class="string">&#x27;qxl&#x27;</span> <span class="attr">ram</span>=<span class="string">&#x27;65536&#x27;</span> <span class="attr">vram</span>=<span class="string">&#x27;65536&#x27;</span> <span class="attr">vgamem</span>=<span class="string">&#x27;32768&#x27;</span> <span class="attr">heads</span>=<span class="string">&#x27;1&#x27;</span> <span class="attr">primary</span>=<span class="string">&#x27;yes&#x27;</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">alias</span> <span class="attr">name</span>=<span class="string">&#x27;video0&#x27;</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">address</span> <span class="attr">type</span>=<span class="string">&#x27;pci&#x27;</span> <span class="attr">domain</span>=<span class="string">&#x27;0x0000&#x27;</span> <span class="attr">bus</span>=<span class="string">&#x27;0x00&#x27;</span> <span class="attr">slot</span>=<span class="string">&#x27;0x02&#x27;</span> <span class="attr">function</span>=<span class="string">&#x27;0x0&#x27;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">video</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">hostdev</span> <span class="attr">mode</span>=<span class="string">&#x27;subsystem&#x27;</span> <span class="attr">type</span>=<span class="string">&#x27;pci&#x27;</span> <span class="attr">managed</span>=<span class="string">&#x27;yes&#x27;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">driver</span> <span class="attr">name</span>=<span class="string">&#x27;vfio&#x27;</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">source</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">address</span> <span class="attr">domain</span>=<span class="string">&#x27;0x0000&#x27;</span> <span class="attr">bus</span>=<span class="string">&#x27;0xb1&#x27;</span> <span class="attr">slot</span>=<span class="string">&#x27;0x00&#x27;</span> <span class="attr">function</span>=<span class="string">&#x27;0x0&#x27;</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">source</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">alias</span> <span class="attr">name</span>=<span class="string">&#x27;hostdev0&#x27;</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">address</span> <span class="attr">type</span>=<span class="string">&#x27;pci&#x27;</span> <span class="attr">domain</span>=<span class="string">&#x27;0x0000&#x27;</span> <span class="attr">bus</span>=<span class="string">&#x27;0x00&#x27;</span> <span class="attr">slot</span>=<span class="string">&#x27;0x0b&#x27;</span> <span class="attr">function</span>=<span class="string">&#x27;0x0&#x27;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">hostdev</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">hostdev</span> <span class="attr">mode</span>=<span class="string">&#x27;subsystem&#x27;</span> <span class="attr">type</span>=<span class="string">&#x27;pci&#x27;</span> <span class="attr">managed</span>=<span class="string">&#x27;yes&#x27;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">driver</span> <span class="attr">name</span>=<span class="string">&#x27;vfio&#x27;</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">source</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">address</span> <span class="attr">domain</span>=<span class="string">&#x27;0x0000&#x27;</span> <span class="attr">bus</span>=<span class="string">&#x27;0xb1&#x27;</span> <span class="attr">slot</span>=<span class="string">&#x27;0x00&#x27;</span> <span class="attr">function</span>=<span class="string">&#x27;0x1&#x27;</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">source</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">alias</span> <span class="attr">name</span>=<span class="string">&#x27;hostdev1&#x27;</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">address</span> <span class="attr">type</span>=<span class="string">&#x27;pci&#x27;</span> <span class="attr">domain</span>=<span class="string">&#x27;0x0000&#x27;</span> <span class="attr">bus</span>=<span class="string">&#x27;0x00&#x27;</span> <span class="attr">slot</span>=<span class="string">&#x27;0x0c&#x27;</span> <span class="attr">function</span>=<span class="string">&#x27;0x0&#x27;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">hostdev</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">hostdev</span> <span class="attr">mode</span>=<span class="string">&#x27;subsystem&#x27;</span> <span class="attr">type</span>=<span class="string">&#x27;pci&#x27;</span> <span class="attr">managed</span>=<span class="string">&#x27;yes&#x27;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">driver</span> <span class="attr">name</span>=<span class="string">&#x27;vfio&#x27;</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">source</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">address</span> <span class="attr">domain</span>=<span class="string">&#x27;0x0000&#x27;</span> <span class="attr">bus</span>=<span class="string">&#x27;0xb1&#x27;</span> <span class="attr">slot</span>=<span class="string">&#x27;0x00&#x27;</span> <span class="attr">function</span>=<span class="string">&#x27;0x2&#x27;</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">source</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">alias</span> <span class="attr">name</span>=<span class="string">&#x27;hostdev2&#x27;</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">address</span> <span class="attr">type</span>=<span class="string">&#x27;pci&#x27;</span> <span class="attr">domain</span>=<span class="string">&#x27;0x0000&#x27;</span> <span class="attr">bus</span>=<span class="string">&#x27;0x00&#x27;</span> <span class="attr">slot</span>=<span class="string">&#x27;0x0d&#x27;</span> <span class="attr">function</span>=<span class="string">&#x27;0x0&#x27;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">hostdev</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">hostdev</span> <span class="attr">mode</span>=<span class="string">&#x27;subsystem&#x27;</span> <span class="attr">type</span>=<span class="string">&#x27;pci&#x27;</span> <span class="attr">managed</span>=<span class="string">&#x27;yes&#x27;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">driver</span> <span class="attr">name</span>=<span class="string">&#x27;vfio&#x27;</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">source</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">address</span> <span class="attr">domain</span>=<span class="string">&#x27;0x0000&#x27;</span> <span class="attr">bus</span>=<span class="string">&#x27;0xb1&#x27;</span> <span class="attr">slot</span>=<span class="string">&#x27;0x00&#x27;</span> <span class="attr">function</span>=<span class="string">&#x27;0x3&#x27;</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">source</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">alias</span> <span class="attr">name</span>=<span class="string">&#x27;hostdev3&#x27;</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">address</span> <span class="attr">type</span>=<span class="string">&#x27;pci&#x27;</span> <span class="attr">domain</span>=<span class="string">&#x27;0x0000&#x27;</span> <span class="attr">bus</span>=<span class="string">&#x27;0x00&#x27;</span> <span class="attr">slot</span>=<span class="string">&#x27;0x0e&#x27;</span> <span class="attr">function</span>=<span class="string">&#x27;0x0&#x27;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">hostdev</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">redirdev</span> <span class="attr">bus</span>=<span class="string">&#x27;usb&#x27;</span> <span class="attr">type</span>=<span class="string">&#x27;spicevmc&#x27;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">alias</span> <span class="attr">name</span>=<span class="string">&#x27;redir0&#x27;</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">address</span> <span class="attr">type</span>=<span class="string">&#x27;usb&#x27;</span> <span class="attr">bus</span>=<span class="string">&#x27;3&#x27;</span> <span class="attr">port</span>=<span class="string">&#x27;1&#x27;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">redirdev</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">redirdev</span> <span class="attr">bus</span>=<span class="string">&#x27;usb&#x27;</span> <span class="attr">type</span>=<span class="string">&#x27;spicevmc&#x27;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">alias</span> <span class="attr">name</span>=<span class="string">&#x27;redir1&#x27;</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">address</span> <span class="attr">type</span>=<span class="string">&#x27;usb&#x27;</span> <span class="attr">bus</span>=<span class="string">&#x27;3&#x27;</span> <span class="attr">port</span>=<span class="string">&#x27;2&#x27;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">redirdev</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">redirdev</span> <span class="attr">bus</span>=<span class="string">&#x27;usb&#x27;</span> <span class="attr">type</span>=<span class="string">&#x27;spicevmc&#x27;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">alias</span> <span class="attr">name</span>=<span class="string">&#x27;redir2&#x27;</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">address</span> <span class="attr">type</span>=<span class="string">&#x27;usb&#x27;</span> <span class="attr">bus</span>=<span class="string">&#x27;4&#x27;</span> <span class="attr">port</span>=<span class="string">&#x27;1&#x27;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">redirdev</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">redirdev</span> <span class="attr">bus</span>=<span class="string">&#x27;usb&#x27;</span> <span class="attr">type</span>=<span class="string">&#x27;spicevmc&#x27;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">alias</span> <span class="attr">name</span>=<span class="string">&#x27;redir3&#x27;</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">address</span> <span class="attr">type</span>=<span class="string">&#x27;usb&#x27;</span> <span class="attr">bus</span>=<span class="string">&#x27;4&#x27;</span> <span class="attr">port</span>=<span class="string">&#x27;2&#x27;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">redirdev</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">redirdev</span> <span class="attr">bus</span>=<span class="string">&#x27;usb&#x27;</span> <span class="attr">type</span>=<span class="string">&#x27;spicevmc&#x27;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">alias</span> <span class="attr">name</span>=<span class="string">&#x27;redir4&#x27;</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">address</span> <span class="attr">type</span>=<span class="string">&#x27;usb&#x27;</span> <span class="attr">bus</span>=<span class="string">&#x27;3&#x27;</span> <span class="attr">port</span>=<span class="string">&#x27;3&#x27;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">redirdev</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">redirdev</span> <span class="attr">bus</span>=<span class="string">&#x27;usb&#x27;</span> <span class="attr">type</span>=<span class="string">&#x27;spicevmc&#x27;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">alias</span> <span class="attr">name</span>=<span class="string">&#x27;redir5&#x27;</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">address</span> <span class="attr">type</span>=<span class="string">&#x27;usb&#x27;</span> <span class="attr">bus</span>=<span class="string">&#x27;3&#x27;</span> <span class="attr">port</span>=<span class="string">&#x27;4&#x27;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">redirdev</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">redirdev</span> <span class="attr">bus</span>=<span class="string">&#x27;usb&#x27;</span> <span class="attr">type</span>=<span class="string">&#x27;spicevmc&#x27;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">alias</span> <span class="attr">name</span>=<span class="string">&#x27;redir6&#x27;</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">address</span> <span class="attr">type</span>=<span class="string">&#x27;usb&#x27;</span> <span class="attr">bus</span>=<span class="string">&#x27;4&#x27;</span> <span class="attr">port</span>=<span class="string">&#x27;3&#x27;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">redirdev</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">redirdev</span> <span class="attr">bus</span>=<span class="string">&#x27;usb&#x27;</span> <span class="attr">type</span>=<span class="string">&#x27;spicevmc&#x27;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">alias</span> <span class="attr">name</span>=<span class="string">&#x27;redir7&#x27;</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">address</span> <span class="attr">type</span>=<span class="string">&#x27;usb&#x27;</span> <span class="attr">bus</span>=<span class="string">&#x27;4&#x27;</span> <span class="attr">port</span>=<span class="string">&#x27;4&#x27;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">redirdev</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">memballoon</span> <span class="attr">model</span>=<span class="string">&#x27;virtio&#x27;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">stats</span> <span class="attr">period</span>=<span class="string">&#x27;10&#x27;</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">alias</span> <span class="attr">name</span>=<span class="string">&#x27;balloon0&#x27;</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">address</span> <span class="attr">type</span>=<span class="string">&#x27;pci&#x27;</span> <span class="attr">domain</span>=<span class="string">&#x27;0x0000&#x27;</span> <span class="attr">bus</span>=<span class="string">&#x27;0x00&#x27;</span> <span class="attr">slot</span>=<span class="string">&#x27;0x0f&#x27;</span> <span class="attr">function</span>=<span class="string">&#x27;0x0&#x27;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">memballoon</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">devices</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">seclabel</span> <span class="attr">type</span>=<span class="string">&#x27;dynamic&#x27;</span> <span class="attr">model</span>=<span class="string">&#x27;dac&#x27;</span> <span class="attr">relabel</span>=<span class="string">&#x27;yes&#x27;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">label</span>&gt;</span>+0:+0<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">imagelabel</span>&gt;</span>+0:+0<span class="tag">&lt;/<span class="name">imagelabel</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">seclabel</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">domain</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h2 id="参考文档"><a href="#参考文档" class="headerlink" title="参考文档"></a>参考文档</h2><ul>
<li><a target="_blank" rel="noopener" href="https://copyfuture.com/blogs-details/20211209084308795f">openstack虚拟机透传GPU设备</a></li>
<li><a target="_blank" rel="noopener" href="https://www.cnblogs.com/weiwei2021/p/14307896.html">openstack ussuri PCI-passthrough集成GPU</a></li>
</ul>
</div><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined">任翌博</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://renyb2.github.io/2022/08/22/OpenStack%E4%BD%BF%E7%94%A8%EF%BC%9AGPU%E5%8D%A1%E4%BD%BF%E7%94%A8/">https://renyb2.github.io/2022/08/22/OpenStack%E4%BD%BF%E7%94%A8%EF%BC%9AGPU%E5%8D%A1%E4%BD%BF%E7%94%A8/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://renyb2.github.io" target="_blank">任翌博的个人博客</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/OpenStack/">OpenStack</a></div><div class="post_share"><div class="social-share" data-image="https://www.leixue.com/uploads/2019/07/OpenStack.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css"><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="next-post pull-full"><a href="/2022/07/18/NVIDIA%E4%BD%BF%E7%94%A8%EF%BC%9A%E8%99%9A%E6%9C%BA%E6%B8%B8%E6%88%8F%E6%80%A7%E8%83%BD/"><img class="next-cover" src="https://www.numerama.com/content/uploads/2019/05/nvidia-logo.jpg" onerror="onerror=null;src='/img/404.jpg'"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">NVIDIA使用：虚机游戏性能</div></div></a></div></nav><div class="relatedPosts"><div class="relatedPosts_headline"><i class="fas fa-thumbs-up fa-fw"></i><span> 相关推荐</span></div><div class="relatedPosts_list"><div class="relatedPosts_item"><a href="/2021/01/22/Kubernetes部署：OpenStack服务配置HTTPS/" title="Kubernetes部署：OpenStack服务配置HTTPS"><img class="relatedPosts_cover" src="https://ss0.bdstatic.com/70cFuHSh_Q1YnxGkpoWK1HF6hhy/it/u=175322010,70959622&fm=26&gp=0.jpg"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="far fa-calendar-alt fa-fw"></i> 2021-01-22</div><div class="relatedPosts_title">Kubernetes部署：OpenStack服务配置HTTPS</div></div></a></div><div class="relatedPosts_item"><a href="/2020/11/06/OpenStack使用：自定义实例root密码/" title="OpenStack使用：自定义实例root密码"><img class="relatedPosts_cover" src="https://www.leixue.com/uploads/2019/07/OpenStack.png"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="far fa-calendar-alt fa-fw"></i> 2020-11-06</div><div class="relatedPosts_title">OpenStack使用：自定义实例root密码</div></div></a></div><div class="relatedPosts_item"><a href="/2022/05/10/OpenStack研发：Cyborg/" title="OpenStack研发：Cyborg"><img class="relatedPosts_cover" src="https://www.leixue.com/uploads/2019/07/OpenStack.png"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="far fa-calendar-alt fa-fw"></i> 2022-05-10</div><div class="relatedPosts_title">OpenStack研发：Cyborg</div></div></a></div><div class="relatedPosts_item"><a href="/2022/04/13/OpenStack研发：Nova与Cyborg交互流程研究/" title="OpenStack研发：Nova与Cyborg交互流程研究"><img class="relatedPosts_cover" src="https://www.leixue.com/uploads/2019/07/OpenStack.png"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="far fa-calendar-alt fa-fw"></i> 2022-04-13</div><div class="relatedPosts_title">OpenStack研发：Nova与Cyborg交互流程研究</div></div></a></div><div class="relatedPosts_item"><a href="/2020/12/22/OpenStack研发：Glance-Image-Cache/" title="OpenStack研发：Glance Image Cache"><img class="relatedPosts_cover" src="https://www.pinclipart.com/picdir/big/201-2017709_a-quick-study-guide-for-the-coa-exam.png"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="far fa-calendar-alt fa-fw"></i> 2020-12-22</div><div class="relatedPosts_title">OpenStack研发：Glance Image Cache</div></div></a></div><div class="relatedPosts_item"><a href="/2020/12/16/OpenStack研发：novaclient/" title="OpenStack研发：novaclient"><img class="relatedPosts_cover" src="https://www.leixue.com/uploads/2019/07/OpenStack.png"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="far fa-calendar-alt fa-fw"></i> 2020-12-16</div><div class="relatedPosts_title">OpenStack研发：novaclient</div></div></a></div></div></div></article></main><footer id="footer" data-type="color"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2022 By 任翌博</div></div></footer></div><section id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="font_plus" type="button" title="放大字体"><i class="fas fa-plus"></i></button><button id="font_minus" type="button" title="缩小字体"><i class="fas fa-minus"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></section><div class="search-dialog" id="local-search"><div class="search-dialog__title" id="local-search-title">本地搜索</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div></div><hr/><div id="local-search-results"><div id="local-hits"></div><div id="local-stats"><div class="local-search-stats__hr" id="hr"><span>由</span> <a target="_blank" rel="noopener" href="https://github.com/wzpan/hexo-generator-search" style="color:#49B1F5;">hexo-generator-search</a>
 <span>提供支持</span></div></div></div><span class="search-close-button"><i class="fas fa-times"></i></span></div><div id="search-mask"></div><div><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page/instantpage.min.js" type="module" defer></script><script src="/js/search/local-search.js"></script><div class="js-pjax"><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div><canvas class="fireworks"></canvas><script src="https://cdn.jsdelivr.net/npm/animejs@latest/anime.min.js"></script><script src="/js/third-party/fireworks.js"></script><script defer="defer" id="ribbon_piao" mobile="false" src="/js/third-party/piao.js"></script></div></body></html>