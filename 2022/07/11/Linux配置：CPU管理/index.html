<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Linux配置：CPU管理 | Renyb の 小窝</title><meta name="description" content="Generic Scaling GovernorsCPUFreq provides generic scaling governors that can be used with all scaling drivers. As stated before, each of them implements a single, possibly parametrized, performance sc"><meta name="keywords" content="Linux,CPU"><meta name="author" content="Renyb"><meta name="copyright" content="Renyb"><meta name="format-detection" content="telephone=no"><link rel="shortcut icon" href="/img/icon.png"><link rel="canonical" href="https://renyb2.github.io/2022/07/11/Linux%E9%85%8D%E7%BD%AE%EF%BC%9ACPU%E7%AE%A1%E7%90%86/"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//fonts.googleapis.com" crossorigin="crossorigin"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><meta name="google-site-verification" content="Vjw9A-fPf6oj9yTjANmuJhi-vaxZtXLM3elvVpOFsPk"/><meta property="og:type" content="article"><meta property="og:title" content="Linux配置：CPU管理"><meta property="og:url" content="https://renyb2.github.io/2022/07/11/Linux%E9%85%8D%E7%BD%AE%EF%BC%9ACPU%E7%AE%A1%E7%90%86/"><meta property="og:site_name" content="Renyb の 小窝"><meta property="og:description" content="Generic Scaling GovernorsCPUFreq provides generic scaling governors that can be used with all scaling drivers. As stated before, each of them implements a single, possibly parametrized, performance sc"><meta property="og:image" content="https://www.easypcmod.com/wp-content/uploads/2019/11/Best-Budget-Processor-CPU.jpg"><meta property="article:published_time" content="2022-07-11T07:56:52.000Z"><meta property="article:modified_time" content="2022-11-24T02:07:36.993Z"><meta name="twitter:card" content="summary"><script>var activateDarkMode = function () {
  document.documentElement.setAttribute('data-theme', 'dark')
  if (document.querySelector('meta[name="theme-color"]') !== null) {
    document.querySelector('meta[name="theme-color"]').setAttribute('content', '#000')
  }
}
var activateLightMode = function () {
  document.documentElement.setAttribute('data-theme', 'light')
  if (document.querySelector('meta[name="theme-color"]') !== null) {
    document.querySelector('meta[name="theme-color"]').setAttribute('content', '#fff')
  }
}

var getCookies = function (name) {
  const value = `; ${document.cookie}`
  const parts = value.split(`; ${name}=`)
  if (parts.length === 2) return parts.pop().split(';').shift()
}

var autoChangeMode = 'false'
var t = getCookies('theme')
if (autoChangeMode === '1') {
  var isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
  var isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
  var isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
  var hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

  if (t === undefined) {
    if (isLightMode) activateLightMode()
    else if (isDarkMode) activateDarkMode()
    else if (isNotSpecified || hasNoSupport) {
      console.log('You specified no preference for a color scheme or your browser does not support it. I Schedule dark mode during night time.')
      var now = new Date()
      var hour = now.getHours()
      var isNight = hour <= 6 || hour >= 18
      isNight ? activateDarkMode() : activateLightMode()
    }
    window.matchMedia('(prefers-color-scheme: dark)').addListener(function (e) {
      if (Cookies.get('theme') === undefined) {
        e.matches ? activateDarkMode() : activateLightMode()
      }
    })
  } else if (t === 'light') activateLightMode()
  else activateDarkMode()
} else if (autoChangeMode === '2') {
  now = new Date()
  hour = now.getHours()
  isNight = hour <= 6 || hour >= 18
  if (t === undefined) isNight ? activateDarkMode() : activateLightMode()
  else if (t === 'light') activateLightMode()
  else activateDarkMode()
} else {
  if (t === 'dark') activateDarkMode()
  else if (t === 'light') activateLightMode()
}</script><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web&amp;display=swap"><script>var GLOBAL_CONFIG = { 
  root: '/',
  hexoversion: '5.1.1',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"找不到您查询的内容：${query}"}},
  translate: undefined,
  noticeOutdate: undefined,
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  bookmark: {
    message_prev: '按',
    message_next: '键将本页加入书签'
  },
  runtime_unit: '天',
  runtime: false,
  copyright: {"limitCount":50,"languages":{"author":"作者: Renyb","link":"链接: ","source":"来源: Renyb の 小窝","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。"}},
  ClickShowText: undefined,
  medium_zoom: false,
  fancybox: true,
  Snackbar: undefined,
  justifiedGallery: {
    js: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
    css: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
  },
  baiduPush: false,
  highlightCopy: true,
  highlightLang: true,
  isPhotoFigcaption: false,
  islazyload: false,
  isanchor: false    
}</script><script id="config_change">var GLOBAL_CONFIG_SITE = { 
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isSidebar: true,
  postUpdate: '2022-11-24 10:07:36'
}</script><noscript><style>
#nav {
  opacity: 1
}
.justified-gallery img {
  opacity: 1
}
</style></noscript><meta name="generator" content="Hexo 5.1.1"><link rel="alternate" href="/atom.xml" title="Renyb の 小窝" type="application/atom+xml">
</head><body><div id="mobile-sidebar"><div id="menu_mask"></div><div id="mobile-sidebar-menus"><div class="mobile_author_icon"><img class="avatar-img" src="/img/avatar.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="mobile_post_data"><div class="mobile_data_item is-center"><div class="mobile_data_link"><a href="/archives/"><div class="headline">文章</div><div class="length_num">89</div></a></div></div><div class="mobile_data_item is-center">      <div class="mobile_data_link"><a href="/tags/"><div class="headline">标签</div><div class="length_num">67</div></a></div></div><div class="mobile_data_item is-center">     <div class="mobile_data_link"><a href="/categories/"><div class="headline">分类</div><div class="length_num">18</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div></div></div><div id="body-wrap"><div id="sidebar"><i class="fas fa-arrow-right on" id="toggle-sidebar"></i><div class="sidebar-toc"><div class="sidebar-toc__title">目录</div><div class="sidebar-toc__progress"><span class="progress-notice">你已经读了</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar">     </div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Generic-Scaling-Governors"><span class="toc-number">1.</span> <span class="toc-text">Generic Scaling Governors</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#performance"><span class="toc-number">1.1.</span> <span class="toc-text">performance</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#powersave"><span class="toc-number">1.2.</span> <span class="toc-text">powersave</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#userspace"><span class="toc-number">1.3.</span> <span class="toc-text">userspace</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#schedutil"><span class="toc-number">1.4.</span> <span class="toc-text">schedutil</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ondemand"><span class="toc-number">1.5.</span> <span class="toc-text">ondemand</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#conservative"><span class="toc-number">1.6.</span> <span class="toc-text">conservative</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#CPU%E7%AE%A1%E7%90%86%E5%91%BD%E4%BB%A4"><span class="toc-number">2.</span> <span class="toc-text">CPU管理命令</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8F%82%E8%80%83%E6%96%87%E6%A1%A3"><span class="toc-number">3.</span> <span class="toc-text">参考文档</span></a></li></ol></div></div></div><header class="post-bg" id="page-header" style="background-image: url(https://www.easypcmod.com/wp-content/uploads/2019/11/Best-Budget-Processor-CPU.jpg)"><nav id="nav"><span class="pull-left" id="blog_name"><a class="blog_title" id="site-name" href="/">Renyb の 小窝</a></span><span class="pull-right menus"><div id="search_button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div><span class="toggle-menu close"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></span></span></nav><div id="post-info"><div id="post-title"><div class="posttitle">Linux配置：CPU管理</div></div><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2022-07-11T07:56:52.000Z" title="发表于 2022-07-11 15:56:52">2022-07-11</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2022-11-24T02:07:36.993Z" title="更新于 2022-11-24 10:07:36">2022-11-24</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/Linux/">Linux</a></span></div><div class="meta-secondline"> <span class="post-meta-separator">|</span><span class="post-meta-pv-cv"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"></span></span></div></div></div></header><main class="layout_post" id="content-inner"><article id="post"><div class="post-content" id="article-container"><h2 id="Generic-Scaling-Governors"><a href="#Generic-Scaling-Governors" class="headerlink" title="Generic Scaling Governors"></a>Generic Scaling Governors</h2><p><code>CPUFreq</code> provides generic scaling governors that can be used with all scaling drivers. As stated before, each of them implements a single, possibly parametrized, performance scaling algorithm.</p>
<p>Scaling governors are attached to policy objects and different policy objects can be handled by different scaling governors at the same time (although that may lead to suboptimal results in some cases).</p>
<p>The scaling governor for a given policy object can be changed at any time with the help of the <code>scaling_governor</code> policy attribute in <code>sysfs</code>.</p>
<p>Some governors expose <code>sysfs</code> attributes to control or fine-tune the scaling algorithms implemented by them. Those attributes, referred to as governor tunables, can be either global (system-wide) or per-policy, depending on the scaling driver in use. If the driver requires governor tunables to be per-policy, they are located in a subdirectory of each policy directory. Otherwise, they are located in a subdirectory under <code>/sys/devices/system/cpu/cpufreq/</code>. In either case the name of the subdirectory containing the governor tunables is the name of the governor providing them.</p>
<h3 id="performance"><a href="#performance" class="headerlink" title="performance"></a><code>performance</code></h3><p>When attached to a policy object, this governor causes the highest frequency, within the <code>scaling_max_freq</code> policy limit, to be requested for that policy.</p>
<p>The request is made once at that time the governor for the policy is set to <code>performance</code> and whenever the <code>scaling_max_freq</code> or <code>scaling_min_freq</code> policy limits change after that.</p>
<h3 id="powersave"><a href="#powersave" class="headerlink" title="powersave"></a><code>powersave</code></h3><p>When attached to a policy object, this governor causes the lowest frequency, within the <code>scaling_min_freq</code> policy limit, to be requested for that policy.</p>
<p>The request is made once at that time the governor for the policy is set to <code>powersave</code> and whenever the <code>scaling_max_freq</code> or <code>scaling_min_freq</code> policy limits change after that.</p>
<h3 id="userspace"><a href="#userspace" class="headerlink" title="userspace"></a><code>userspace</code></h3><p>This governor does not do anything by itself. Instead, it allows user space to set the CPU frequency for the policy it is attached to by writing to the <code>scaling_setspeed</code> attribute of that policy.</p>
<h3 id="schedutil"><a href="#schedutil" class="headerlink" title="schedutil"></a><code>schedutil</code></h3><p>This governor uses CPU utilization data available from the CPU scheduler. It generally is regarded as a part of the CPU scheduler, so it can access the scheduler’s internal data structures directly.</p>
<p>It runs entirely in scheduler context, although in some cases it may need to invoke the scaling driver asynchronously when it decides that the CPU frequency should be changed for a given policy (that depends on whether or not the driver is capable of changing the CPU frequency from scheduler context).</p>
<p>The actions of this governor for a particular CPU depend on the scheduling class invoking its utilization update callback for that CPU. If it is invoked by the RT or deadline scheduling classes, the governor will increase the frequency to the allowed maximum (that is, the <code>scaling_max_freq</code> policy limit). In turn, if it is invoked by the CFS scheduling class, the governor will use the Per-Entity Load Tracking (PELT) metric for the root control group of the given CPU as the CPU utilization estimate (see the <a target="_blank" rel="noopener" href="https://lwn.net/Articles/531853/">Per-entity load tracking</a> LWN.net article for a description of the PELT mechanism). Then, the new CPU frequency to apply is computed in accordance with the formula</p>
<blockquote>
<p>f = 1.25 * <code>f_0</code> * <code>util</code> / <code>max</code></p>
</blockquote>
<p>where <code>util</code> is the PELT number, <code>max</code> is the theoretical maximum of <code>util</code>, and <code>f_0</code> is either the maximum possible CPU frequency for the given policy (if the PELT number is frequency-invariant), or the current CPU frequency (otherwise).</p>
<p>This governor also employs a mechanism allowing it to temporarily bump up the CPU frequency for tasks that have been waiting on I/O most recently, called “IO-wait boosting”. That happens when the <code>SCHED_CPUFREQ_IOWAIT</code> flag is passed by the scheduler to the governor callback which causes the frequency to go up to the allowed maximum immediately and then draw back to the value returned by the above formula over time.</p>
<p>This governor exposes only one tunable:</p>
<ul>
<li><p><code>rate_limit_us</code></p>
<p>Minimum time (in microseconds) that has to pass between two consecutive runs of governor computations (default: 1000 times the scaling driver’s transition latency).The purpose of this tunable is to reduce the scheduler context overhead of the governor which might be excessive without it.</p>
</li>
</ul>
<p>This governor generally is regarded as a replacement for the older <a target="_blank" rel="noopener" href="https://www.kernel.org/doc/html/v4.14/admin-guide/pm/cpufreq.html#ondemand">ondemand</a> and <a target="_blank" rel="noopener" href="https://www.kernel.org/doc/html/v4.14/admin-guide/pm/cpufreq.html#conservative">conservative</a> governors (described below), as it is simpler and more tightly integrated with the CPU scheduler, its overhead in terms of CPU context switches and similar is less significant, and it uses the scheduler’s own CPU utilization metric, so in principle its decisions should not contradict the decisions made by the other parts of the scheduler.</p>
<h3 id="ondemand"><a href="#ondemand" class="headerlink" title="ondemand"></a><code>ondemand</code></h3><p>This governor uses CPU load as a CPU frequency selection metric.</p>
<p>In order to estimate the current CPU load, it measures the time elapsed between consecutive invocations of its worker routine and computes the fraction of that time in which the given CPU was not idle. The ratio of the non-idle (active) time to the total CPU time is taken as an estimate of the load.</p>
<p>If this governor is attached to a policy shared by multiple CPUs, the load is estimated for all of them and the greatest result is taken as the load estimate for the entire policy.</p>
<p>The worker routine of this governor has to run in process context, so it is invoked asynchronously (via a workqueue) and CPU P-states are updated from there if necessary. As a result, the scheduler context overhead from this governor is minimum, but it causes additional CPU context switches to happen relatively often and the CPU P-state updates triggered by it can be relatively irregular. Also, it affects its own CPU load metric by running code that reduces the CPU idle time (even though the CPU idle time is only reduced very slightly by it).</p>
<p>It generally selects CPU frequencies proportional to the estimated load, so that the value of the <code>cpuinfo_max_freq</code> policy attribute corresponds to the load of 1 (or 100%), and the value of the <code>cpuinfo_min_freq</code> policy attribute corresponds to the load of 0, unless when the load exceeds a (configurable) speedup threshold, in which case it will go straight for the highest frequency it is allowed to use (the <code>scaling_max_freq</code> policy limit).</p>
<p>This governor exposes the following tunables:</p>
<ul>
<li><p><code>sampling_rate</code></p>
<p>This is how often the governor’s worker routine should run, in microseconds.Typically, it is set to values of the order of 10000 (10 ms). Its default value is equal to the value of <code>cpuinfo_transition_latency</code> for each policy this governor is attached to (but since the unit here is greater by 1000, this means that the time represented by <code>sampling_rate</code> is 1000 times greater than the transition latency by default).If this tunable is per-policy, the following shell command sets the time represented by it to be 750 times as high as the transition latency:<code># echo </code>$(($(cat cpuinfo_transition_latency) * 750 / 1000)) &gt; ondemand/sampling_rate `</p>
</li>
<li><p><code>up_threshold</code></p>
<p>If the estimated CPU load is above this value (in percent), the governor will set the frequency to the maximum value allowed for the policy. Otherwise, the selected frequency will be proportional to the estimated CPU load.</p>
</li>
<li><p><code>ignore_nice_load</code></p>
<p>If set to 1 (default 0), it will cause the CPU load estimation code to treat the CPU time spent on executing tasks with “nice” levels greater than 0 as CPU idle time.This may be useful if there are tasks in the system that should not be taken into account when deciding what frequency to run the CPUs at. Then, to make that happen it is sufficient to increase the “nice” level of those tasks above 0 and set this attribute to 1.</p>
</li>
<li><p><code>sampling_down_factor</code></p>
<p>Temporary multiplier, between 1 (default) and 100 inclusive, to apply to the <code>sampling_rate</code> value if the CPU load goes above <code>up_threshold</code>.This causes the next execution of the governor’s worker routine (after setting the frequency to the allowed maximum) to be delayed, so the frequency stays at the maximum level for a longer time.Frequency fluctuations in some bursty workloads may be avoided this way at the cost of additional energy spent on maintaining the maximum CPU capacity.</p>
</li>
<li><p><code>powersave_bias</code></p>
<p>Reduction factor to apply to the original frequency target of the governor (including the maximum value used when the <code>up_threshold</code> value is exceeded by the estimated CPU load) or sensitivity threshold for the AMD frequency sensitivity powersave bias driver (<code>drivers/cpufreq/amd_freq_sensitivity.c</code>), between 0 and 1000 inclusive.If the AMD frequency sensitivity powersave bias driver is not loaded, the effective frequency to apply is given byf * (1 - <code>powersave_bias</code> / 1000)where f is the governor’s original frequency target. The default value of this attribute is 0 in that case.If the AMD frequency sensitivity powersave bias driver is loaded, the value of this attribute is 400 by default and it is used in a different way.On Family 16h (and later) AMD processors there is a mechanism to get a measured workload sensitivity, between 0 and 100% inclusive, from the hardware. That value can be used to estimate how the performance of the workload running on a CPU will change in response to frequency changes.The performance of a workload with the sensitivity of 0 (memory-bound or IO-bound) is not expected to increase at all as a result of increasing the CPU frequency, whereas workloads with the sensitivity of 100% (CPU-bound) are expected to perform much better if the CPU frequency is increased.If the workload sensitivity is less than the threshold represented by the <code>powersave_bias</code> value, the sensitivity powersave bias driver will cause the governor to select a frequency lower than its original target, so as to avoid over-provisioning workloads that will not benefit from running at higher CPU frequencies.</p>
</li>
</ul>
<h3 id="conservative"><a href="#conservative" class="headerlink" title="conservative"></a><code>conservative</code></h3><p>This governor uses CPU load as a CPU frequency selection metric.</p>
<p>It estimates the CPU load in the same way as the <a target="_blank" rel="noopener" href="https://www.kernel.org/doc/html/v4.14/admin-guide/pm/cpufreq.html#ondemand">ondemand</a> governor described above, but the CPU frequency selection algorithm implemented by it is different.</p>
<p>Namely, it avoids changing the frequency significantly over short time intervals which may not be suitable for systems with limited power supply capacity (e.g. battery-powered). To achieve that, it changes the frequency in relatively small steps, one step at a time, up or down - depending on whether or not a (configurable) threshold has been exceeded by the estimated CPU load.</p>
<p>This governor exposes the following tunables:</p>
<ul>
<li><p><code>freq_step</code></p>
<p>Frequency step in percent of the maximum frequency the governor is allowed to set (the <code>scaling_max_freq</code> policy limit), between 0 and 100 (5 by default).This is how much the frequency is allowed to change in one go. Setting it to 0 will cause the default frequency step (5 percent) to be used and setting it to 100 effectively causes the governor to periodically switch the frequency between the <code>scaling_min_freq</code> and <code>scaling_max_freq</code> policy limits.</p>
</li>
<li><p><code>down_threshold</code></p>
<p>Threshold value (in percent, 20 by default) used to determine the frequency change direction.If the estimated CPU load is greater than this value, the frequency will go up (by <code>freq_step</code>). If the load is less than this value (and the <code>sampling_down_factor</code> mechanism is not in effect), the frequency will go down. Otherwise, the frequency will not be changed.</p>
</li>
<li><p><code>sampling_down_factor</code></p>
<p>Frequency decrease deferral factor, between 1 (default) and 10 inclusive.It effectively causes the frequency to go down <code>sampling_down_factor</code> times slower than it ramps up.</p>
</li>
</ul>
<h2 id="CPU管理命令"><a href="#CPU管理命令" class="headerlink" title="CPU管理命令"></a>CPU管理命令</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 查看当前CPU可用策略</span></span><br><span class="line">[root@k205 ~]# cat /sys/devices/system/cpu/cpu*/cpufreq/scaling_available_governors</span><br><span class="line">performance powersave</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 查看当前CPU生效策略</span></span><br><span class="line">[root@k205 ~]# cat /sys/devices/system/cpu/cpu*/cpufreq/scaling_governor</span><br><span class="line">performance</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 查看当前CPU频率</span></span><br><span class="line">[root@k205 ~]# cat /sys/devices/system/cpu/cpu*/cpufreq/scaling_cur_freq</span><br><span class="line">2399926</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 查看当前所有CPU的信息</span></span><br><span class="line">[root@k205 ~]# cpupower -c all frequency-info</span><br><span class="line">analyzing CPU 0:</span><br><span class="line">  driver: intel_pstate</span><br><span class="line">  CPUs which run at the same hardware frequency: 0</span><br><span class="line">  CPUs which need to have their frequency coordinated by software: 0</span><br><span class="line">  maximum transition latency:  Cannot determine or is not supported.</span><br><span class="line">  hardware limits: 800 MHz - 3.00 GHz</span><br><span class="line">  available cpufreq governors: performance powersave</span><br><span class="line">  current policy: frequency should be within 800 MHz and 3.00 GHz.</span><br><span class="line">                  The governor &quot;performance&quot; may decide which speed to use</span><br><span class="line">                  within this range.</span><br><span class="line">  current CPU frequency: 2.40 GHz (asserted by call to hardware)</span><br><span class="line">  boost state support:</span><br><span class="line">    Supported: yes</span><br><span class="line">    Active: yes</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 设置所有CPU的模式</span></span><br><span class="line">[root@k205 ~]# cpupower -c all frequency-set -g performance</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 查看CPU的频率</span></span><br><span class="line">[root@k205 ~]# cat /proc/cpuinfo | grep &quot;cpu MHz*&quot;</span><br><span class="line">cpu MHz         : 2399.926</span><br></pre></td></tr></table></figure>

<h2 id="参考文档"><a href="#参考文档" class="headerlink" title="参考文档"></a>参考文档</h2><ul>
<li><a target="_blank" rel="noopener" href="https://www.kernel.org/doc/html/v4.14/admin-guide/pm/working-state.html">Linux Kernel官方文档：Working-State Power Management</a></li>
<li><a target="_blank" rel="noopener" href="https://www.intel.cn/content/www/cn/zh/gaming/resources/game-server.html">Intel官方文档：如何设置专用游戏服务器</a></li>
<li><a target="_blank" rel="noopener" href="https://www.intel.cn/content/www/cn/zh/gaming/resources/turbo-boost.html">Intel官方文档：什么是英特尔® 睿频加速技术？</a></li>
<li><a target="_blank" rel="noopener" href="https://www.intel.cn/content/www/cn/zh/gaming/resources/how-to-overclock.html">Intel官方文档：如何超频您未锁频的英特尔® 酷睿™ 处理器</a></li>
<li><a target="_blank" rel="noopener" href="https://www.cnblogs.com/ggzhangxiaochao/p/13948483.html">cpupower调整CPU主频</a></li>
</ul>
</div><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined">Renyb</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://renyb2.github.io/2022/07/11/Linux%E9%85%8D%E7%BD%AE%EF%BC%9ACPU%E7%AE%A1%E7%90%86/">https://renyb2.github.io/2022/07/11/Linux%E9%85%8D%E7%BD%AE%EF%BC%9ACPU%E7%AE%A1%E7%90%86/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://renyb2.github.io" target="_blank">Renyb の 小窝</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Linux/">Linux</a><a class="post-meta__tags" href="/tags/CPU/">CPU</a></div><div class="post_share"><div class="social-share" data-image="https://www.easypcmod.com/wp-content/uploads/2019/11/Best-Budget-Processor-CPU.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css"><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2022/07/14/Linux%E9%85%8D%E7%BD%AE%EF%BC%9A%E7%A1%AC%E4%BB%B6%E7%AE%A1%E7%90%86/"><img class="prev-cover" src="https://www.easypcmod.com/wp-content/uploads/2019/11/Best-Budget-Processor-CPU.jpg" onerror="onerror=null;src='/img/404.jpg'"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">Linux配置：硬件管理</div></div></a></div><div class="next-post pull-right"><a href="/2022/07/02/OpenStack%E9%83%A8%E7%BD%B2%EF%BC%9ACyborg/"><img class="next-cover" src="https://www.leixue.com/uploads/2019/07/OpenStack.png" onerror="onerror=null;src='/img/404.jpg'"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">OpenStack部署：Cyborg</div></div></a></div></nav><div class="relatedPosts"><div class="relatedPosts_headline"><i class="fas fa-thumbs-up fa-fw"></i><span> 相关推荐</span></div><div class="relatedPosts_list"><div class="relatedPosts_item"><a href="/2022/03/03/Linux运维：CPU-load-average过高/" title="Linux运维：CPU load average过高"><img class="relatedPosts_cover" src="https://ss2.bdstatic.com/70cFvnSh_Q1YnxGkpoWK1HF6hhy/it/u=2734045988,4035371764&fm=26&gp=0.jpg"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="far fa-calendar-alt fa-fw"></i> 2022-03-03</div><div class="relatedPosts_title">Linux运维：CPU load average过高</div></div></a></div><div class="relatedPosts_item"><a href="/2021/11/04/Linux优化：脏数据回刷参数与调优/" title="Linux优化：脏数据回刷参数与调优"><img class="relatedPosts_cover" src="https://ss2.bdstatic.com/70cFvnSh_Q1YnxGkpoWK1HF6hhy/it/u=2734045988,4035371764&fm=26&gp=0.jpg"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="far fa-calendar-alt fa-fw"></i> 2021-11-04</div><div class="relatedPosts_title">Linux优化：脏数据回刷参数与调优</div></div></a></div><div class="relatedPosts_item"><a href="/2021/05/07/Linux使用：通用手册/" title="Linux使用：通用手册"><img class="relatedPosts_cover" src="https://ss2.bdstatic.com/70cFvnSh_Q1YnxGkpoWK1HF6hhy/it/u=2734045988,4035371764&fm=26&gp=0.jpg"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="far fa-calendar-alt fa-fw"></i> 2021-05-07</div><div class="relatedPosts_title">Linux使用：通用手册</div></div></a></div><div class="relatedPosts_item"><a href="/2020/11/09/Linux配置：GNOME桌面/" title="Linux配置：GNOME桌面"><img class="relatedPosts_cover" src="https://ss2.bdstatic.com/70cFvnSh_Q1YnxGkpoWK1HF6hhy/it/u=2734045988,4035371764&fm=26&gp=0.jpg"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="far fa-calendar-alt fa-fw"></i> 2020-11-09</div><div class="relatedPosts_title">Linux配置：GNOME桌面</div></div></a></div><div class="relatedPosts_item"><a href="/2021/01/19/Linux配置：LVM/" title="Linux配置：LVM"><img class="relatedPosts_cover" src="https://ss2.bdstatic.com/70cFvnSh_Q1YnxGkpoWK1HF6hhy/it/u=2734045988,4035371764&fm=26&gp=0.jpg"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="far fa-calendar-alt fa-fw"></i> 2021-01-19</div><div class="relatedPosts_title">Linux配置：LVM</div></div></a></div><div class="relatedPosts_item"><a href="/2021/06/03/Linux配置：HAProxy/" title="Linux配置：HAProxy"><img class="relatedPosts_cover" src="https://ss2.bdstatic.com/70cFvnSh_Q1YnxGkpoWK1HF6hhy/it/u=2734045988,4035371764&fm=26&gp=0.jpg"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="far fa-calendar-alt fa-fw"></i> 2021-06-03</div><div class="relatedPosts_title">Linux配置：HAProxy</div></div></a></div></div></div></article></main><footer id="footer" data-type="color"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2023 By Renyb</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><section id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="font_plus" type="button" title="放大字体"><i class="fas fa-plus"></i></button><button id="font_minus" type="button" title="缩小字体"><i class="fas fa-minus"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></section><div class="search-dialog" id="local-search"><div class="search-dialog__title" id="local-search-title">本地搜索</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div></div><hr/><div id="local-search-results"><div id="local-hits"></div><div id="local-stats"><div class="local-search-stats__hr" id="hr"><span>由</span> <a target="_blank" rel="noopener" href="https://github.com/wzpan/hexo-generator-search" style="color:#49B1F5;">hexo-generator-search</a>
 <span>提供支持</span></div></div></div><span class="search-close-button"><i class="fas fa-times"></i></span></div><div id="search-mask"></div><div><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page/instantpage.min.js" type="module" defer></script><script src="/js/search/local-search.js"></script><div class="js-pjax"><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div><canvas class="fireworks"></canvas><script src="https://cdn.jsdelivr.net/npm/animejs@latest/anime.min.js"></script><script src="/js/third-party/fireworks.js"></script><script defer="defer" id="ribbon_piao" mobile="false" src="/js/third-party/piao.js"></script></div></body></html>