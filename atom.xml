<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>任翌博的个人博客</title>
  
  <subtitle>Welcome to my blog...</subtitle>
  <link href="https://renyb2.github.io/atom.xml" rel="self"/>
  
  <link href="https://renyb2.github.io/"/>
  <updated>2020-12-21T12:56:47.300Z</updated>
  <id>https://renyb2.github.io/</id>
  
  <author>
    <name>任翌博</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>开发小工具：Chrome翻墙</title>
    <link href="https://renyb2.github.io/2020/12/21/%E5%BC%80%E5%8F%91%E5%B0%8F%E5%B7%A5%E5%85%B7%EF%BC%9AChrome%E7%BF%BB%E5%A2%99/"/>
    <id>https://renyb2.github.io/2020/12/21/%E5%BC%80%E5%8F%91%E5%B0%8F%E5%B7%A5%E5%85%B7%EF%BC%9AChrome%E7%BF%BB%E5%A2%99/</id>
    <published>2020-12-21T12:30:14.000Z</published>
    <updated>2020-12-21T12:56:47.300Z</updated>
    
    <content type="html"><![CDATA[<h2 id="谷歌上网助手GHelper-–-Chrome插件"><a href="#谷歌上网助手GHelper-–-Chrome插件" class="headerlink" title="谷歌上网助手GHelper – Chrome插件"></a>谷歌上网助手GHelper – Chrome插件</h2><blockquote><p>专门为科研、外贸、跨境电商、海淘人员、开发人员服务的上网加速工具，chrome内核浏览器专用!可以解决chrome扩展无法自动更新的问题，同时可以访问谷歌google搜索，gmail邮箱，google+等谷歌产品</p><p>简单易用的《谷歌上网助手》，可以解决chrome扩展无法自动更新的问题，同时可以访问谷歌google搜索，gmail邮箱，google+等谷歌服务。</p><p>《谷歌上网助手》一键安装，无需其他配置，即可访问谷歌。</p><p>使用本插件可以免费上：</p><ul><li>google.com     谷歌搜索</li><li>mail.google.com   gmail邮箱</li><li>chrome商店访问</li></ul></blockquote><h2 id="资源包"><a href="#资源包" class="headerlink" title="资源包"></a>资源包</h2><p>链接：<a href="https://pan.baidu.com/s/1Q7ltgX75BwLRyrrUSsQg4A">https://pan.baidu.com/s/1Q7ltgX75BwLRyrrUSsQg4A</a><br>提取码：tav2 </p><h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><ol><li>下载解压资源包，找见<code>Ghelper2.2.1.crx</code></li></ol><p><img src="/2020/12/21/%E5%BC%80%E5%8F%91%E5%B0%8F%E5%B7%A5%E5%85%B7%EF%BC%9AChrome%E7%BF%BB%E5%A2%99/%E6%96%87%E4%BB%B6%E7%9B%AE%E5%BD%95.png" alt="文件目录"></p><ol start="2"><li>打开<code>Chrome浏览器</code>，点击<code>设置</code> - <code>扩展应用</code>（也可直接浏览地址：<code>chrome://extensions/</code>），打开<code>开发者模式</code>开关</li></ol><p><img src="/2020/12/21/%E5%BC%80%E5%8F%91%E5%B0%8F%E5%B7%A5%E5%85%B7%EF%BC%9AChrome%E7%BF%BB%E5%A2%99/Chrome%E6%89%A9%E5%B1%95%E7%A8%8B%E5%BA%8F.png" alt="image-20201221203859502"></p><ol start="3"><li>拖拽<code>Ghelper2.2.1.crx</code>至Chrome页面，进行安装</li><li>点击谷歌上网助手，注册并登陆账户即可访问Google</li></ol><p><img src="/2020/12/21/%E5%BC%80%E5%8F%91%E5%B0%8F%E5%B7%A5%E5%85%B7%EF%BC%9AChrome%E7%BF%BB%E5%A2%99/%E8%BF%9B%E5%85%A5Ghelper.png" alt="image-20201221204045444"></p><p><img src="/2020/12/21/%E5%BC%80%E5%8F%91%E5%B0%8F%E5%B7%A5%E5%85%B7%EF%BC%9AChrome%E7%BF%BB%E5%A2%99/%E7%99%BB%E5%BD%95Ghelper.png" alt="image-20201221204105401"></p><ol start="5"><li><p>访问Google搜索</p><p><img src="/2020/12/21/%E5%BC%80%E5%8F%91%E5%B0%8F%E5%B7%A5%E5%85%B7%EF%BC%9AChrome%E7%BF%BB%E5%A2%99/%E8%AE%BF%E9%97%AEGoogle.png" alt="image-20201221204155970"></p></li></ol><p><img src="/2020/12/21/%E5%BC%80%E5%8F%91%E5%B0%8F%E5%B7%A5%E5%85%B7%EF%BC%9AChrome%E7%BF%BB%E5%A2%99/Google%E6%90%9C%E7%B4%A2.png" alt="image-20201221204215545"></p><h2 id="参考文档"><a href="#参考文档" class="headerlink" title="参考文档"></a>参考文档</h2><p><a href="https://chrome.google.com/webstore/detail/%E8%B0%B7%E6%AD%8C%E4%B8%8A%E7%BD%91%E5%8A%A9%E6%89%8B/nonmafimegllfoonjgplbabhmgfanaka?hl=zh-CN">Chrome应用商店：谷歌上网助手</a></p><p><a href="https://www.wonxun.net/share/426">谷歌上网助手GHelper – Chrome插件下载(谷歌浏览器插件)</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;谷歌上网助手GHelper-–-Chrome插件&quot;&gt;&lt;a href=&quot;#谷歌上网助手GHelper-–-Chrome插件&quot; class=&quot;headerlink&quot; title=&quot;谷歌上网助手GHelper – Chrome插件&quot;&gt;&lt;/a&gt;谷歌上网助手GHelper </summary>
      
    
    
    
    <category term="开发小工具" scheme="https://renyb2.github.io/categories/%E5%BC%80%E5%8F%91%E5%B0%8F%E5%B7%A5%E5%85%B7/"/>
    
    
    <category term="开发小工具" scheme="https://renyb2.github.io/tags/%E5%BC%80%E5%8F%91%E5%B0%8F%E5%B7%A5%E5%85%B7/"/>
    
    <category term="翻墙" scheme="https://renyb2.github.io/tags/%E7%BF%BB%E5%A2%99/"/>
    
    <category term="Google" scheme="https://renyb2.github.io/tags/Google/"/>
    
  </entry>
  
  <entry>
    <title>OpenStack开发：novaclient解析</title>
    <link href="https://renyb2.github.io/2020/12/16/OpenStack%E5%BC%80%E5%8F%91%EF%BC%9Anovaclient%E8%A7%A3%E6%9E%90/"/>
    <id>https://renyb2.github.io/2020/12/16/OpenStack%E5%BC%80%E5%8F%91%EF%BC%9Anovaclient%E8%A7%A3%E6%9E%90/</id>
    <published>2020-12-16T06:12:17.000Z</published>
    <updated>2020-12-16T07:44:09.108Z</updated>
    
    <content type="html"><![CDATA[<h2 id="开发环境"><a href="#开发环境" class="headerlink" title="开发环境"></a>开发环境</h2><ul><li>系统：CentOS Linux release 7.7.1908 (Core)</li><li>OpenStack：Train版 </li><li>Python：2.7.5</li></ul><table><thead><tr><th>Python库</th><th>版本</th></tr></thead><tbody><tr><td>keystoneauth1</td><td>4.0.1</td></tr><tr><td>openstacksdk</td><td>0.45.0</td></tr><tr><td>oslo.config</td><td>7.0.0</td></tr><tr><td>oslo.i18n</td><td>3.25.1</td></tr><tr><td>oslo.serialization</td><td>2.29.2</td></tr><tr><td>oslo.utils</td><td>3.42.1</td></tr><tr><td>python-cinderclient</td><td>6.0.0</td></tr><tr><td>python-keystoneclient</td><td>3.22.0</td></tr><tr><td>python-novaclient</td><td>16.0.0</td></tr><tr><td>python-openstackclient</td><td>5.2.1</td></tr></tbody></table><h2 id="源码"><a href="#源码" class="headerlink" title="源码"></a>源码</h2><h3 id="Demo"><a href="#Demo" class="headerlink" title="Demo"></a>Demo</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> keystoneauth1 <span class="keyword">import</span> loading</span><br><span class="line"><span class="keyword">from</span> keystoneauth1 <span class="keyword">import</span> session</span><br><span class="line"><span class="keyword">from</span> novaclient <span class="keyword">import</span> client <span class="keyword">as</span> nova_client</span><br><span class="line"></span><br><span class="line">NOVA_API_VERSION = <span class="string">&quot;2.1&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 从keystone处获取认证信息</span></span><br><span class="line">loader = loading.get_plugin_loader(<span class="string">&#x27;password&#x27;</span>)</span><br><span class="line">auth = loader.load_from_options(auth_url=<span class="string">&quot;http://111.111.111.80:35357&quot;</span>,</span><br><span class="line">                                username=<span class="string">&quot;admin&quot;</span>,</span><br><span class="line">                                password=<span class="string">&quot;admin&quot;</span>,</span><br><span class="line">                                project_name=<span class="string">&quot;admin&quot;</span>,</span><br><span class="line">                                project_domain_id=<span class="string">&quot;default&quot;</span>,</span><br><span class="line">                                user_domain_id=<span class="string">&quot;default&quot;</span>)</span><br><span class="line">sess = session.Session(auth=auth)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用认证信息，获取novaclient</span></span><br><span class="line">nova = nova_client.Client(NOVA_API_VERSION, session=sess)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 调用novaclient，获取nova相关信息</span></span><br><span class="line">servers = nova.servers.list()</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> ser <span class="keyword">in</span> servers:</span><br><span class="line">    <span class="keyword">print</span> ser.id</span><br><span class="line">    <span class="keyword">print</span> ser.name</span><br><span class="line">    <span class="keyword">print</span> ser.image</span><br><span class="line">    <span class="keyword">print</span> ser.flavor</span><br><span class="line">    <span class="keyword">print</span> ser.key_name</span><br><span class="line">    <span class="keyword">print</span> ser.status</span><br><span class="line">    <span class="keyword">print</span> ser.created</span><br><span class="line">    <span class="keyword">print</span> ser.addresses</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[nova]</span><br><span class="line">endpoint_type &#x3D; internal</span><br><span class="line">auth_url &#x3D; http:&#x2F;&#x2F;111.111.111.80:35357</span><br><span class="line">auth_type &#x3D; password</span><br><span class="line">project_domain_id &#x3D; default</span><br><span class="line">user_domain_id &#x3D; default</span><br><span class="line">region_name &#x3D; RegionOne</span><br><span class="line">project_name &#x3D; service</span><br><span class="line">username &#x3D; nova</span><br><span class="line">password &#x3D; 8rMN88CaCkvNyvx5b9YrXYwkPDEgKTE7Kb5xfWnL</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[nova]</span><br><span class="line">auth_url &#x3D; http:&#x2F;&#x2F;111.111.111.80:35357</span><br><span class="line">auth_type &#x3D; password</span><br><span class="line">project_domain_id &#x3D; default</span><br><span class="line">user_domain_id &#x3D; default</span><br><span class="line">region_name &#x3D; RegionOne</span><br><span class="line">project_name &#x3D; admin</span><br><span class="line">username &#x3D; admin</span><br><span class="line">password &#x3D; admin</span><br><span class="line">endpoint_type &#x3D; internal</span><br></pre></td></tr></table></figure><h2 id="结构体"><a href="#结构体" class="headerlink" title="结构体"></a>结构体</h2><h3 id="nova-servers-list"><a href="#nova-servers-list" class="headerlink" title="nova.servers.list()"></a>nova.servers.list()</h3><p><strong>item</strong>结构</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">&quot;OS-EXT-STS:task_state&quot;</span>: <span class="literal">null</span>,</span><br><span class="line">    <span class="attr">&quot;addresses&quot;</span>: &#123;</span><br><span class="line">        <span class="attr">&quot;demo-net&quot;</span>: [</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="attr">&quot;OS-EXT-IPS-MAC:mac_addr&quot;</span>: <span class="string">&quot;fa:16:3e:8b:c8:00&quot;</span>,</span><br><span class="line">                <span class="attr">&quot;version&quot;</span>: <span class="number">4</span>,</span><br><span class="line">                <span class="attr">&quot;addr&quot;</span>: <span class="string">&quot;10.0.0.221&quot;</span>,</span><br><span class="line">                <span class="attr">&quot;OS-EXT-IPS:type&quot;</span>: <span class="string">&quot;fixed&quot;</span></span><br><span class="line">            &#125;</span><br><span class="line">        ]</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">&quot;links&quot;</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">&quot;href&quot;</span>: <span class="string">&quot;http://111.111.111.80:8774/v2.1/servers/077c1c6d-5390-4856-89dc-7072c5d5d5d4&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;rel&quot;</span>: <span class="string">&quot;self&quot;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">&quot;href&quot;</span>: <span class="string">&quot;http://111.111.111.80:8774/servers/077c1c6d-5390-4856-89dc-7072c5d5d5d4&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;rel&quot;</span>: <span class="string">&quot;bookmark&quot;</span></span><br><span class="line">        &#125;</span><br><span class="line">    ],</span><br><span class="line">    <span class="attr">&quot;locked_reason&quot;</span>: <span class="literal">null</span>,</span><br><span class="line">    <span class="attr">&quot;image&quot;</span>: &#123;</span><br><span class="line">        <span class="attr">&quot;id&quot;</span>: <span class="string">&quot;3086f549-23e2-4c0d-b791-b17998952d68&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;links&quot;</span>: [</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="attr">&quot;href&quot;</span>: <span class="string">&quot;http://111.111.111.80:8774/images/3086f549-23e2-4c0d-b791-b17998952d68&quot;</span>,</span><br><span class="line">                <span class="attr">&quot;rel&quot;</span>: <span class="string">&quot;bookmark&quot;</span></span><br><span class="line">            &#125;</span><br><span class="line">        ]</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">&quot;OS-EXT-SRV-ATTR:user_data&quot;</span>: <span class="literal">null</span>,</span><br><span class="line">    <span class="attr">&quot;OS-EXT-STS:vm_state&quot;</span>: <span class="string">&quot;active&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;OS-EXT-SRV-ATTR:instance_name&quot;</span>: <span class="string">&quot;instance-00000001&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;OS-EXT-SRV-ATTR:root_device_name&quot;</span>: <span class="string">&quot;/dev/vda&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;OS-SRV-USG:launched_at&quot;</span>: <span class="string">&quot;2020-12-08T17:41:17.000000&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;flavor&quot;</span>: &#123;</span><br><span class="line">        <span class="attr">&quot;ephemeral&quot;</span>: <span class="number">0</span>,</span><br><span class="line">        <span class="attr">&quot;ram&quot;</span>: <span class="number">512</span>,</span><br><span class="line">        <span class="attr">&quot;original_name&quot;</span>: <span class="string">&quot;m1.tiny&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;vcpus&quot;</span>: <span class="number">1</span>,</span><br><span class="line">        <span class="attr">&quot;extra_specs&quot;</span>: &#123;&#125;,</span><br><span class="line">        <span class="attr">&quot;swap&quot;</span>: <span class="number">0</span>,</span><br><span class="line">        <span class="attr">&quot;disk&quot;</span>: <span class="number">1</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">&quot;id&quot;</span>: <span class="string">&quot;077c1c6d-5390-4856-89dc-7072c5d5d5d4&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;security_groups&quot;</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;default&quot;</span></span><br><span class="line">        &#125;</span><br><span class="line">    ],</span><br><span class="line">    <span class="attr">&quot;description&quot;</span>: <span class="string">&quot;demo&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;host_status&quot;</span>: <span class="string">&quot;UP&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;user_id&quot;</span>: <span class="string">&quot;439ca237905e417593165391458960d6&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;OS-EXT-SRV-ATTR:hostname&quot;</span>: <span class="string">&quot;demo&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;OS-DCF:diskConfig&quot;</span>: <span class="string">&quot;MANUAL&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;accessIPv4&quot;</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;accessIPv6&quot;</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;OS-EXT-SRV-ATTR:reservation_id&quot;</span>: <span class="string">&quot;r-56k4gluj&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;progress&quot;</span>: <span class="number">0</span>,</span><br><span class="line">    <span class="attr">&quot;OS-EXT-STS:power_state&quot;</span>: <span class="number">1</span>,</span><br><span class="line">    <span class="attr">&quot;OS-EXT-AZ:availability_zone&quot;</span>: <span class="string">&quot;nova&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;config_drive&quot;</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;status&quot;</span>: <span class="string">&quot;ACTIVE&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;OS-EXT-SRV-ATTR:ramdisk_id&quot;</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;updated&quot;</span>: <span class="string">&quot;2020-12-08T17:41:18Z&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;hostId&quot;</span>: <span class="string">&quot;cd9cf8191851aeae24077dd7d3ca4c6c01d1b5d0ff7be81de482259b&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;OS-EXT-SRV-ATTR:host&quot;</span>: <span class="string">&quot;node02&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;OS-SRV-USG:terminated_at&quot;</span>: <span class="literal">null</span>,</span><br><span class="line">    <span class="attr">&quot;tags&quot;</span>: [],</span><br><span class="line">    <span class="attr">&quot;key_name&quot;</span>: <span class="string">&quot;mykey&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;OS-EXT-SRV-ATTR:kernel_id&quot;</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;locked&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="attr">&quot;OS-EXT-SRV-ATTR:hypervisor_hostname&quot;</span>: <span class="string">&quot;node02&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;demo&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;OS-EXT-SRV-ATTR:launch_index&quot;</span>: <span class="number">0</span>,</span><br><span class="line">    <span class="attr">&quot;created&quot;</span>: <span class="string">&quot;2020-12-08T17:40:57Z&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;tenant_id&quot;</span>: <span class="string">&quot;1249bd160bab49e89c4c1d795ec68746&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;os-extended-volumes:volumes_attached&quot;</span>: [],</span><br><span class="line">    <span class="attr">&quot;trusted_image_certificates&quot;</span>: <span class="literal">null</span>,</span><br><span class="line">    <span class="attr">&quot;metadata&quot;</span>: &#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="参考文档"><a href="#参考文档" class="headerlink" title="参考文档"></a>参考文档</h2><p><a href="https://docs.openstack.org/python-novaclient/latest/user/python-api.html">OpenStack API Documentation：The novaclient Python API</a></p><p><a href="https://docs.openstack.org/keystoneauth/latest/index.html">OpenStack API Documentation：Common Authentication Library for OpenStack Clients</a></p><p><a href="https://www.jianshu.com/p/e04c217eeb21">novaclient开发中遇到的问题小结</a></p><p><a href="https://www.cnblogs.com/freshchen/p/11656975.html">Python调用 Openstack 主要服务(keystone,nova,glance,neutron,heat)</a></p><p><a href="https://blog.51cto.com/eddy72/2457564">Python通过OpenStack API接口筛选虚机</a></p><p><a href="https://www.cnblogs.com/ggykx/p/12175689.html">OpenStack中创建实例流程详解</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;开发环境&quot;&gt;&lt;a href=&quot;#开发环境&quot; class=&quot;headerlink&quot; title=&quot;开发环境&quot;&gt;&lt;/a&gt;开发环境&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;系统：CentOS Linux release 7.7.1908 (Core)&lt;/li&gt;
&lt;li&gt;OpenSta</summary>
      
    
    
    
    <category term="OpenStack" scheme="https://renyb2.github.io/categories/OpenStack/"/>
    
    
    <category term="Train版本" scheme="https://renyb2.github.io/tags/Train%E7%89%88%E6%9C%AC/"/>
    
    <category term="OpenStack开发" scheme="https://renyb2.github.io/tags/OpenStack%E5%BC%80%E5%8F%91/"/>
    
    <category term="novaclient" scheme="https://renyb2.github.io/tags/novaclient/"/>
    
  </entry>
  
  <entry>
    <title>Kubernetes部署：kubeadm部署高可用集群</title>
    <link href="https://renyb2.github.io/2020/12/16/Kubernetes%E9%83%A8%E7%BD%B2%EF%BC%9Akubeadm%E9%83%A8%E7%BD%B2%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4/"/>
    <id>https://renyb2.github.io/2020/12/16/Kubernetes%E9%83%A8%E7%BD%B2%EF%BC%9Akubeadm%E9%83%A8%E7%BD%B2%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4/</id>
    <published>2020-12-16T03:06:25.000Z</published>
    <updated>2020-12-16T03:46:59.310Z</updated>
    
    <content type="html"><![CDATA[<h2 id="高可用集群部署"><a href="#高可用集群部署" class="headerlink" title="高可用集群部署"></a>高可用集群部署</h2><h3 id="前期准备"><a href="#前期准备" class="headerlink" title="前期准备"></a>前期准备</h3><h4 id="1-检查centos版本-hostname"><a href="#1-检查centos版本-hostname" class="headerlink" title="1. 检查centos版本 / hostname"></a>1. 检查centos版本 / hostname</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 查看centos版本</span></span><br><span class="line">cat /etc/centos-release</span><br><span class="line"><span class="meta">&gt;</span><span class="bash">&gt; CentOS Linux release 7.7.1908 (Core)</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 此处 hostname 的输出将会是该机器在 Kubernetes 集群中的节点名字</span></span><br><span class="line">hostname</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 修改hostname</span></span><br><span class="line">hostnamectl set-hostname NAME</span><br></pre></td></tr></table></figure><h4 id="2-检查网络"><a href="#2-检查网络" class="headerlink" title="2. 检查网络"></a>2. 检查网络</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> ip route show</span></span><br><span class="line">default via 111.111.111.1 dev ens192 proto static metric 100</span><br><span class="line">111.111.111.0/24 dev ens192 proto kernel scope link src 111.111.111.81 metric 100</span><br><span class="line">172.17.0.0/16 dev docker0 proto kernel scope link src 172.17.0.1</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> ip a</span></span><br><span class="line">1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1000</span><br><span class="line">    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00</span><br><span class="line">    inet 127.0.0.1/8 scope host lo</span><br><span class="line">       valid_lft forever preferred_lft forever</span><br><span class="line">    inet6 ::1/128 scope host</span><br><span class="line">       valid_lft forever preferred_lft forever</span><br><span class="line">2: ens192: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc mq state UP group default qlen 1000</span><br><span class="line">    link/ether 00:50:56:8c:5b:38 brd ff:ff:ff:ff:ff:ff</span><br><span class="line">    inet 111.111.111.81/24 brd 111.111.111.255 scope global noprefixroute ens192</span><br><span class="line">       valid_lft forever preferred_lft forever</span><br><span class="line">    inet6 fe80::250:56ff:fe8c:5b38/64 scope link</span><br><span class="line">       valid_lft forever preferred_lft forever</span><br><span class="line">3: ens224: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc mq state UP group default qlen 1000</span><br><span class="line">    link/ether 00:50:56:8c:1e:41 brd ff:ff:ff:ff:ff:ff</span><br></pre></td></tr></table></figure><blockquote><p>kubelet使用的IP地址</p><ul><li><code>ip route show</code> 命令中，可以知道机器的默认网卡，通常是 <code>第一块网卡</code>，如 <strong><em>default via 111.111.111.1 dev ens192</em></strong></li><li><code>ip a</code> 命令中，可显示默认网卡的 IP 地址，Kubernetes 将使用此 IP 地址与集群内的其他节点通信，如 <code>111.111.111.81</code></li><li>所有节点上 Kubernetes 所使用的 IP 地址必须可以互通（无需 NAT 映射、无安全组或防火墙隔离）</li></ul></blockquote><h4 id="3-环境基本配置"><a href="#3-环境基本配置" class="headerlink" title="3. 环境基本配置"></a>3. 环境基本配置</h4><blockquote><ul><li>任意节点 centos 版本为 7.6 / 7.7 或 7.8</li><li>任意节点 CPU 内核数量大于等于 2，且内存大于等于 4G</li><li>任意节点 hostname 不是 localhost，且不包含下划线、小数点、大写字母</li><li>任意节点都有固定的内网 IP 地址</li><li>任意节点都只有一个网卡，如果有特殊目的，我可以在完成 K8S 安装后再增加新的网卡</li><li>任意节点上 <a href="https://kuboard.cn/install/install-kubernetes.html#%E6%A3%80%E6%9F%A5%E7%BD%91%E7%BB%9C">Kubelet使用的 IP 地址</a> 可互通（无需 NAT 映射即可相互访问），且没有防火墙、安全组隔离</li><li>任意节点不会直接使用 docker run 或 docker-compose 运行容器</li></ul></blockquote><h3 id="安装-docker-kubelet"><a href="#安装-docker-kubelet" class="headerlink" title="安装 docker / kubelet"></a>安装 docker / kubelet</h3><blockquote><p>使用 root 身份在所有节点执行如下代码，安装软件：</p><ul><li>docker</li><li>nfs-utils</li><li>kubectl / kubeadm / kubelet</li></ul></blockquote><h4 id="1-快速安装"><a href="#1-快速安装" class="headerlink" title="1. 快速安装"></a>1. 快速安装</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 在 master 节点和 worker 节点都要执行</span></span><br><span class="line">curl -sSL https://kuboard.cn/install-script/v1.16.2/install_kubelet.sh | sh</span><br></pre></td></tr></table></figure><h4 id="2-手动安装"><a href="#2-手动安装" class="headerlink" title="2. 手动安装"></a>2. 手动安装</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 在 master 节点和 worker 节点都要执行</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 安装 docker</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 参考文档如下</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> https://docs.docker.com/install/linux/docker-ce/centos/ </span></span><br><span class="line"><span class="meta">#</span><span class="bash"> https://docs.docker.com/install/linux/linux-postinstall/</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 卸载旧版本</span></span><br><span class="line">yum remove -y docker \</span><br><span class="line">docker-client \</span><br><span class="line">docker-client-latest \</span><br><span class="line">docker-common \</span><br><span class="line">docker-latest \</span><br><span class="line">docker-latest-logrotate \</span><br><span class="line">docker-logrotate \</span><br><span class="line">docker-selinux \</span><br><span class="line">docker-engine-selinux \</span><br><span class="line">docker-engine</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 设置 yum repository</span></span><br><span class="line">yum install -y yum-utils \</span><br><span class="line">device-mapper-persistent-data \</span><br><span class="line">lvm2</span><br><span class="line">yum-config-manager --add-repo http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 安装并启动 docker</span></span><br><span class="line">yum install -y docker-ce-18.09.7 docker-ce-cli-18.09.7 containerd.io</span><br><span class="line">systemctl enable docker</span><br><span class="line">systemctl start docker</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 安装 nfs-utils</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 必须先安装 nfs-utils 才能挂载 nfs 网络存储</span></span><br><span class="line">yum install -y nfs-utils</span><br><span class="line">yum install -y wget</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 关闭 防火墙</span></span><br><span class="line">systemctl stop firewalld</span><br><span class="line">systemctl disable firewalld</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 关闭 SeLinux</span></span><br><span class="line">setenforce 0</span><br><span class="line">sed -i &quot;s/SELINUX=enforcing/SELINUX=disabled/g&quot; /etc/selinux/config</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 关闭 swap</span></span><br><span class="line">swapoff -a</span><br><span class="line">yes | cp /etc/fstab /etc/fstab_bak</span><br><span class="line">cat /etc/fstab_bak |grep -v swap &gt; /etc/fstab</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 修改 /etc/sysctl.conf</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 如果有配置，则修改</span></span><br><span class="line">sed -i &quot;s#^net.ipv4.ip_forward.*#net.ipv4.ip_forward=1#g&quot;  /etc/sysctl.conf</span><br><span class="line">sed -i &quot;s#^net.bridge.bridge-nf-call-ip6tables.*#net.bridge.bridge-nf-call-ip6tables=1#g&quot;  /etc/sysctl.conf</span><br><span class="line">sed -i &quot;s#^net.bridge.bridge-nf-call-iptables.*#net.bridge.bridge-nf-call-iptables=1#g&quot;  /etc/sysctl.conf</span><br><span class="line"><span class="meta">#</span><span class="bash"> 可能没有，追加</span></span><br><span class="line">echo &quot;net.ipv4.ip_forward = 1&quot; &gt;&gt; /etc/sysctl.conf</span><br><span class="line">echo &quot;net.bridge.bridge-nf-call-ip6tables = 1&quot; &gt;&gt; /etc/sysctl.conf</span><br><span class="line">echo &quot;net.bridge.bridge-nf-call-iptables = 1&quot; &gt;&gt; /etc/sysctl.conf</span><br><span class="line"><span class="meta">#</span><span class="bash"> 执行命令以应用</span></span><br><span class="line">sysctl -p</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 配置K8S的yum源</span></span><br><span class="line">cat &lt;&lt;EOF &gt; /etc/yum.repos.d/kubernetes.repo</span><br><span class="line">[kubernetes]</span><br><span class="line">name=Kubernetes</span><br><span class="line">baseurl=http://mirrors.aliyun.com/kubernetes/yum/repos/kubernetes-el7-x86_64</span><br><span class="line">enabled=1</span><br><span class="line">gpgcheck=0</span><br><span class="line">repo_gpgcheck=0</span><br><span class="line">gpgkey=http://mirrors.aliyun.com/kubernetes/yum/doc/yum-key.gpg</span><br><span class="line">       http://mirrors.aliyun.com/kubernetes/yum/doc/rpm-package-key.gpg</span><br><span class="line">EOF</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 卸载旧版本</span></span><br><span class="line">yum remove -y kubelet kubeadm kubectl</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 安装kubelet、kubeadm、kubectl</span></span><br><span class="line">yum install -y kubelet-1.16.2 kubeadm-1.16.2 kubectl-1.16.2</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 修改docker Cgroup Driver为systemd</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> <span class="comment"># 将/usr/lib/systemd/system/docker.service文件中的这一行 ExecStart=/usr/bin/dockerd -H fd:// --containerd=/run/containerd/containerd.sock</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> <span class="comment"># 修改为 ExecStart=/usr/bin/dockerd -H fd:// --containerd=/run/containerd/containerd.sock --exec-opt native.cgroupdriver=systemd</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 如果不修改，在添加 worker 节点时可能会碰到如下错误</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> [WARNING IsDockerSystemdCheck]: detected <span class="string">&quot;cgroupfs&quot;</span> as the Docker cgroup driver. The recommended driver is <span class="string">&quot;systemd&quot;</span>. </span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Please follow the guide at https://kubernetes.io/docs/setup/cri/</span></span><br><span class="line">sed -i &quot;s#^ExecStart=/usr/bin/dockerd.*#ExecStart=/usr/bin/dockerd -H fd:// --containerd=/run/containerd/containerd.sock --exec-opt native.cgroupdriver=systemd#g&quot; /usr/lib/systemd/system/docker.service</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 设置 docker 镜像，提高 docker 镜像下载速度和稳定性</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 如果您访问 https://hub.docker.io 速度非常稳定，亦可以跳过这个步骤</span></span><br><span class="line">curl -sSL https://get.daocloud.io/daotools/set_mirror.sh | sh -s http://f1361db2.m.daocloud.io</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 重启 docker，并启动 kubelet</span></span><br><span class="line">systemctl daemon-reload</span><br><span class="line">systemctl restart docker</span><br><span class="line">systemctl enable kubelet &amp;&amp; systemctl start kubelet</span><br><span class="line"></span><br><span class="line">docker version</span><br></pre></td></tr></table></figure><blockquote><p>WARNING</p><p>如果此时执行 <code>service status kubelet</code> 命令，将得到 kubelet 启动失败的错误提示，请忽略此错误，因为必须完成后续步骤中 kubeadm init 的操作，kubelet 才能正常启动</p></blockquote><h3 id="安装-haproxy-keepalived"><a href="#安装-haproxy-keepalived" class="headerlink" title="安装 haproxy / keepalived"></a>安装 haproxy / keepalived</h3><h4 id="1-keepalived配置"><a href="#1-keepalived配置" class="headerlink" title="1. keepalived配置"></a>1. keepalived配置</h4><p>yum安装<code>keepalived</code>，编辑配置文件</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">! Configuration File for keepalived</span><br><span class="line"></span><br><span class="line">global_defs &#123;</span><br><span class="line">   router_id LVS_DEVEL</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">vrrp_instance VI_1 &#123;</span><br><span class="line">    state &#123;&#123; state &#125;&#125;</span><br><span class="line">    interface &#123;&#123; interface &#125;&#125;</span><br><span class="line">    virtual_router_id 51</span><br><span class="line">    priority &#123;&#123; priority &#125;&#125;</span><br><span class="line">    advert_int 1</span><br><span class="line">    track_interface &#123;</span><br><span class="line">&#123;% for item in track_interface %&#125;</span><br><span class="line">        &#123;&#123; item &#125;&#125;</span><br><span class="line">&#123;% endfor %&#125;</span><br><span class="line">    &#125;</span><br><span class="line">    authentication &#123;</span><br><span class="line">        auth_type PASS</span><br><span class="line">        auth_pass 1111</span><br><span class="line">    &#125;</span><br><span class="line">    virtual_ipaddress &#123;</span><br><span class="line">        &#123;&#123; vip &#125;&#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><code>$&#123;STATE&#125;</code> is <code>MASTER</code> for one and <code>BACKUP</code> for all other hosts, hence the virtual IP will initially be assigned to the <code>MASTER</code>.</li><li><code>$&#123;INTERFACE&#125;</code> is the network interface taking part in the negotiation of the virtual IP, e.g. <code>eth0</code>.</li><li><code>$&#123;ROUTER_ID&#125;</code> should be the same for all <code>keepalived</code> cluster hosts while unique amongst all clusters in the same subnet. Many distros pre-configure its value to <code>51</code>.</li><li><code>$&#123;PRIORITY&#125;</code> should be higher on the master than on the backups. Hence <code>101</code> and <code>100</code> respectively will suffice.</li><li><code>$&#123;TRACK_INTERFACE&#125;</code> is a list of listening ports.</li><li><code>$&#123;AUTH_PASS&#125;</code> should be the same for all <code>keepalived</code> cluster hosts, e.g. <code>42</code></li><li><code>$&#123;APISERVER_VIP&#125;</code> is the virtual IP address negotiated between the <code>keepalived</code> cluster hosts.</li></ul><h4 id="2-haproxy配置"><a href="#2-haproxy配置" class="headerlink" title="2. haproxy配置"></a>2. haproxy配置</h4><p>yum安装<code>haproxy</code>，编辑配置文件</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">global</span><br><span class="line">  log 127.0.0.1 local2 info</span><br><span class="line">  pidfile /var/run/haproxy.pid</span><br><span class="line">  maxconn 10240</span><br><span class="line">  daemon</span><br><span class="line"></span><br><span class="line">defaults</span><br><span class="line">  log global</span><br><span class="line">  mode http</span><br><span class="line">  timeout connect 5000</span><br><span class="line">  timeout client 5000</span><br><span class="line">  timeout server 5000</span><br><span class="line">  timeout check 2000</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">######### K8s-APIServer LB #####################</span></span></span><br><span class="line">listen k8s-apiserver-lb</span><br><span class="line">  bind 0.0.0.0:8443</span><br><span class="line">  mode tcp</span><br><span class="line">  balance roundrobin</span><br><span class="line">&#123;% for item in groups.master %&#125;</span><br><span class="line">  server &#123;&#123; item &#125;&#125; &#123;&#123; hostvars[item].ansible_ssh_host &#125;&#125;:6443 check port 6443 inter 5000 fall 5</span><br><span class="line">&#123;% endfor %&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">######### K8s-Web #####################</span></span></span><br><span class="line">listen k8s-web</span><br><span class="line">  bind 0.0.0.0:32000</span><br><span class="line">  mode tcp</span><br><span class="line">  balance roundrobin</span><br><span class="line">&#123;% for item in groups.master %&#125;</span><br><span class="line">  server &#123;&#123; item &#125;&#125; &#123;&#123; hostvars[item].ansible_ssh_host &#125;&#125;:30000 check port 30000 inter 5000 fall 5</span><br><span class="line">&#123;% endfor %&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">####### stats ############################</span></span></span><br><span class="line">listen admin_stats</span><br><span class="line">  bind 0.0.0.0:8080</span><br><span class="line">  mode http</span><br><span class="line">  option httplog</span><br><span class="line">  maxconn 10</span><br><span class="line">  stats refresh 30s</span><br><span class="line">  stats uri /stats</span><br></pre></td></tr></table></figure><ul><li><code>maxconn </code> 最大并发连接数</li></ul><h3 id="后续流程参考后续文档"><a href="#后续流程参考后续文档" class="headerlink" title="后续流程参考后续文档"></a>后续流程参考后续文档</h3><h2 id="参考文档"><a href="#参考文档" class="headerlink" title="参考文档"></a>参考文档</h2><p><a href="https://kubernetes.io/zh/docs/setup/production-environment/tools/kubeadm/high-availability/">Kubernetes官方文档：利用 kubeadm 创建高可用集群</a></p><p><a href="https://kuboard.cn/install/install-kubernetes.html#%E4%BB%8B%E7%BB%8D">安装Kubernetes高可用</a></p><p><a href="https://www.jianshu.com/p/8eb81d1674dc">kubeadm 搭建K8s高可用集群</a></p><p><a href="https://github.com/kubernetes/kubeadm/blob/master/docs/ha-considerations.md#options-for-software-load-balancing">High Availability Considerations</a></p><p><a href="https://blog.51cto.com/billy98/2350660">kubeadm安装kubernetes 1.13.2多master高可用集群</a></p><p><a href="https://jimmysong.io/kubernetes-handbook/practice/master-ha.html">Master节点高可用</a></p><p><a href="https://blog.csdn.net/qq_41772936/article/details/80718014">haproxy+keepalived高可用负载均衡构建</a></p><p><a href="https://github.com/mendickxiao/kubeasz/tree/master/docs">集群规划和基础参数设定</a></p><p><a href="https://blog.csdn.net/codemaster_2071/article/details/82634278">kubeadm安装kubernetes 多master高可用</a></p><p><a href="https://www.cnblogs.com/rexcheny/p/10778567.html">Keepalive详解</a></p><p><a href="https://blog.51cto.com/12244079/2125384">HAProxy介绍及配置文件详解</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;高可用集群部署&quot;&gt;&lt;a href=&quot;#高可用集群部署&quot; class=&quot;headerlink&quot; title=&quot;高可用集群部署&quot;&gt;&lt;/a&gt;高可用集群部署&lt;/h2&gt;&lt;h3 id=&quot;前期准备&quot;&gt;&lt;a href=&quot;#前期准备&quot; class=&quot;headerlink&quot; titl</summary>
      
    
    
    
    <category term="Kubernetes" scheme="https://renyb2.github.io/categories/Kubernetes/"/>
    
    
    <category term="Kubernetes部署" scheme="https://renyb2.github.io/tags/Kubernetes%E9%83%A8%E7%BD%B2/"/>
    
    <category term="kubeadm" scheme="https://renyb2.github.io/tags/kubeadm/"/>
    
  </entry>
  
  <entry>
    <title>OpenStack开发：curl接口调试</title>
    <link href="https://renyb2.github.io/2020/12/14/OpenStack%E5%BC%80%E5%8F%91%EF%BC%9Acurl%E6%8E%A5%E5%8F%A3%E8%B0%83%E8%AF%95/"/>
    <id>https://renyb2.github.io/2020/12/14/OpenStack%E5%BC%80%E5%8F%91%EF%BC%9Acurl%E6%8E%A5%E5%8F%A3%E8%B0%83%E8%AF%95/</id>
    <published>2020-12-14T06:35:38.000Z</published>
    <updated>2020-12-16T07:44:05.805Z</updated>
    
    <content type="html"><![CDATA[<h2 id="基本概念"><a href="#基本概念" class="headerlink" title="基本概念"></a>基本概念</h2><blockquote><h3 id="keystone"><a href="#keystone" class="headerlink" title="keystone"></a>keystone</h3><p>OpenStack 的 Keystone V3 中引入了 Domain 的概念</p><h3 id="Domain，project，user，role，token-的概念和关系"><a href="#Domain，project，user，role，token-的概念和关系" class="headerlink" title="Domain，project，user，role，token 的概念和关系"></a>Domain，project，user，role，token 的概念和关系</h3><p>简单来说，</p><ul><li>Domain - 表示 project 和 user 的集合，在公有云或者私有云中常常表示一个客户</li><li>Group - 一个domain 中的部分用户的集合</li><li>Project - IT基础设施资源的集合，比如虚机，卷，镜像等</li><li>Role - 角色，表示一个 user 对一个 project resource 的权限</li><li>Token - 一个 user 对于某个目标（project 或者 domain）的一个有限时间段内的身份令牌</li></ul><p>它们之间的关系用一个不完整的图来表示：</p><p><img src="/2020/12/14/OpenStack%E5%BC%80%E5%8F%91%EF%BC%9Acurl%E6%8E%A5%E5%8F%A3%E8%B0%83%E8%AF%95/%E8%B5%84%E6%BA%90%E5%85%B3%E7%B3%BB.jpg" alt="资源关系"></p><p>说明：</p><ul><li>Domain 可以认为是 project，user，group 的 namespace。 一个 domain 内，这些元素的名称不可以重复，但是在两个不同的domain内，它们的名称可以重复。因此，在确定这些元素时，需要同时使用它们的名称和它们的 domain 的 id 或者 name。</li><li>Group 是一个 domain 部分 user 的集合，其目的是为了方便分配 role。给一个 group 分配 role，结果会给 group 内的所有 users 分配这个 role。</li><li>Role 是全局（global）的，因此在一个 keystone 管辖范围内其名称必须唯一。role 的名称没有意义，其意义在于 policy.json 文件根据 role 的名称所指定的允许进行的操作。</li><li>简单地，role 可以只有 admin 和 member 两个，前者表示管理员，后者表示普通用户。但是，结合 domain 和 project 的限定，admin 可以分为 cloud admin，domain admin 和 project admin。</li><li>policy.json 文件中定义了 role 对某种类型的资源所能进行的操作，比如允许 cloud admin 创建 domain，允许所有用户创建卷等</li><li>project 是资源的集合，其中有一类特殊的project 是 admin project。通过指定 admin_project_domain_name 和 admin_project_name 来确定一个 admin project，然后该project 中的 admin 用户即是 cloud admin。</li><li>Token 具有 scope 的概念，分为 unscoped token，domain-scoped token 和 project-scoped token。下文有说明。</li></ul><h3 id="token"><a href="#token" class="headerlink" title="token"></a>token</h3><p>token即令牌，身份的凭证。在整个openstack项目中服务与服务之间的通信都需要token来进行身份认证，我们来举个例子：</p><p><img src="/2020/12/14/OpenStack%E5%BC%80%E5%8F%91%EF%BC%9Acurl%E6%8E%A5%E5%8F%A3%E8%B0%83%E8%AF%95/%E8%AF%B7%E6%B1%82%E6%B5%81%E7%A8%8B.jpg" alt="请求流程"></p><p>如上图所示，一个用户需要创建一台虚拟机，用户首先要登入之后先拿到一个project_scope token 这个token包含了用户具有的角色以及服务列表，用户拿着这个令牌去请求nova服务，nova首先会去keystone认证该token是否有效，之后会向glance发送获取镜像的请求，glance接收请求后也会向之前的步骤一样去keystone认证token有效性，最终返回镜像给nova，nova再用镜像去给用户创建虚拟机。<br> 另外需要说明的是token中包含用户所拥有的角色，nova和其他服务还会根据token中的role来判断用户是否有操作权限。</p><h3 id="token类型"><a href="#token类型" class="headerlink" title="token类型"></a>token类型</h3><h4 id="unscope-token"><a href="#unscope-token" class="headerlink" title="unscope token"></a>unscope token</h4><p>示例：</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">&quot;token&quot;</span>: &#123;</span><br><span class="line">        <span class="attr">&quot;issued_at&quot;</span>: <span class="string">&quot;2016-11-30T03:50:49.277102Z&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;audit_ids&quot;</span>: [</span><br><span class="line">            <span class="string">&quot;AbSBE-XmTc-gacd4cxrZAQ&quot;</span></span><br><span class="line">        ],</span><br><span class="line">        <span class="attr">&quot;methods&quot;</span>: [</span><br><span class="line">            <span class="string">&quot;password&quot;</span></span><br><span class="line">        ],</span><br><span class="line">        <span class="attr">&quot;expires_at&quot;</span>: <span class="string">&quot;2016-12-01T03:50:49.277079Z&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;user&quot;</span>: &#123;</span><br><span class="line">            <span class="attr">&quot;domain&quot;</span>: &#123;</span><br><span class="line">                <span class="attr">&quot;id&quot;</span>: <span class="string">&quot;default&quot;</span>,</span><br><span class="line">                <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;Default&quot;</span></span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="attr">&quot;id&quot;</span>: <span class="string">&quot;fb7cdca584894c7ca3faa7388ee3a98f&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;admin&quot;</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>如上所示为unscope token其中只包含了用户基本信息，以及创建／过期时间等基本信息。</p><h4 id="scope-token"><a href="#scope-token" class="headerlink" title="scope token"></a>scope token</h4><p>在keystone中scope token主要有以下几种类型：</p><ul><li><p>project-scoped token:该类型token表示用户对具体项目的访问权限，token信息主要包括用户可访问的服务目录、拥有的权限、以及项目信息。</p></li><li><p>domain-scoped token：该类型token表示用户在域范围具有的权限，例如如果用户对域内具有管理员权限，则该用户就能管理域内的所有项目以及用户。跟project-scoped token不同的是project-scoped token包含了可访问项目信息，而domain-scoped token则包含了具有操作权限的域信息。</p></li><li><p>trust-scoped token:当truster授予trustee一定的权限后，trustee可以使用该类型token来操作truster资源，该类型token信息包括truster的项目／域信息以及一系列权限，服务目录。</p><p> 示例：</p></li></ul><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">&quot;token&quot;</span>: &#123;</span><br><span class="line">        <span class="attr">&quot;methods&quot;</span>: [</span><br><span class="line">            <span class="string">&quot;password&quot;</span></span><br><span class="line">        ],</span><br><span class="line">        <span class="attr">&quot;roles&quot;</span>: [</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="attr">&quot;id&quot;</span>: <span class="string">&quot;eaee0b95f3dc4e2ca6476a41c2596de5&quot;</span>,</span><br><span class="line">                <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;admin&quot;</span></span><br><span class="line">            &#125;</span><br><span class="line">        ],</span><br><span class="line">        <span class="attr">&quot;expires_at&quot;</span>: <span class="string">&quot;2016-12-01T03:15:43.057915Z&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;project&quot;</span>: &#123;</span><br><span class="line">            <span class="attr">&quot;domain&quot;</span>: &#123;</span><br><span class="line">                <span class="attr">&quot;id&quot;</span>: <span class="string">&quot;default&quot;</span>,</span><br><span class="line">                <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;Default&quot;</span></span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="attr">&quot;id&quot;</span>: <span class="string">&quot;ed0596a674d84591940d6e3be10661a8&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;admin&quot;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">&quot;catalog&quot;</span>: [</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="attr">&quot;endpoints&quot;</span>: [</span><br><span class="line">                    &#123;</span><br><span class="line">                        <span class="attr">&quot;region_id&quot;</span>: <span class="string">&quot;RegionOne&quot;</span>,</span><br><span class="line">                        <span class="attr">&quot;url&quot;</span>: <span class="string">&quot;http://10.0.84.52:9696&quot;</span>,</span><br><span class="line">                        <span class="attr">&quot;region&quot;</span>: <span class="string">&quot;RegionOne&quot;</span>,</span><br><span class="line">                        <span class="attr">&quot;interface&quot;</span>: <span class="string">&quot;internal&quot;</span>,</span><br><span class="line">                        <span class="attr">&quot;id&quot;</span>: <span class="string">&quot;74f1c9d76070422cb6839a9090b2801e&quot;</span></span><br><span class="line">                    &#125;,</span><br><span class="line">                    &#123;</span><br><span class="line">                        <span class="attr">&quot;region_id&quot;</span>: <span class="string">&quot;RegionOne&quot;</span>,</span><br><span class="line">                        <span class="attr">&quot;url&quot;</span>: <span class="string">&quot;http://10.0.84.52:9696&quot;</span>,</span><br><span class="line">                        <span class="attr">&quot;region&quot;</span>: <span class="string">&quot;RegionOne&quot;</span>,</span><br><span class="line">                        <span class="attr">&quot;interface&quot;</span>: <span class="string">&quot;public&quot;</span>,</span><br><span class="line">                        <span class="attr">&quot;id&quot;</span>: <span class="string">&quot;b7f77180541142d48c70a6bf63547ee2&quot;</span></span><br><span class="line">                    &#125;,</span><br><span class="line">                    &#123;</span><br><span class="line">                        <span class="attr">&quot;region_id&quot;</span>: <span class="string">&quot;RegionOne&quot;</span>,</span><br><span class="line">                        <span class="attr">&quot;url&quot;</span>: <span class="string">&quot;http://10.0.84.52:9696&quot;</span>,</span><br><span class="line">                        <span class="attr">&quot;region&quot;</span>: <span class="string">&quot;RegionOne&quot;</span>,</span><br><span class="line">                        <span class="attr">&quot;interface&quot;</span>: <span class="string">&quot;admin&quot;</span>,</span><br><span class="line">                        <span class="attr">&quot;id&quot;</span>: <span class="string">&quot;fa44e5f5251a4cec8fe1044144d83a77&quot;</span></span><br><span class="line">                    &#125;</span><br><span class="line">                ],</span><br><span class="line">                <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;network&quot;</span>,</span><br><span class="line">                <span class="attr">&quot;id&quot;</span>: <span class="string">&quot;40c01df9e89a4d33bd97c140c0397c79&quot;</span>,</span><br><span class="line">                <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;neutron&quot;</span></span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="attr">&quot;endpoints&quot;</span>: [</span><br><span class="line">                    &#123;</span><br><span class="line">                        <span class="attr">&quot;region_id&quot;</span>: <span class="string">&quot;RegionOne&quot;</span>,</span><br><span class="line">                        <span class="attr">&quot;url&quot;</span>: <span class="string">&quot;http://10.0.84.52:8004/v1/ed0596a674d84591940d6e3be10661a8&quot;</span>,</span><br><span class="line">                        <span class="attr">&quot;region&quot;</span>: <span class="string">&quot;RegionOne&quot;</span>,</span><br><span class="line">                        <span class="attr">&quot;interface&quot;</span>: <span class="string">&quot;internal&quot;</span>,</span><br><span class="line">                        <span class="attr">&quot;id&quot;</span>: <span class="string">&quot;1986cb45bda74e779df52caf5445b61b&quot;</span></span><br><span class="line">                    &#125;,</span><br><span class="line">                    &#123;</span><br><span class="line">                        <span class="attr">&quot;region_id&quot;</span>: <span class="string">&quot;RegionOne&quot;</span>,</span><br><span class="line">                        <span class="attr">&quot;url&quot;</span>: <span class="string">&quot;http://10.0.84.52:8004/v1/ed0596a674d84591940d6e3be10661a8&quot;</span>,</span><br><span class="line">                        <span class="attr">&quot;region&quot;</span>: <span class="string">&quot;RegionOne&quot;</span>,</span><br><span class="line">                        <span class="attr">&quot;interface&quot;</span>: <span class="string">&quot;admin&quot;</span>,</span><br><span class="line">                        <span class="attr">&quot;id&quot;</span>: <span class="string">&quot;c8626b60ef2a40a1ab30f97ac05e5052&quot;</span></span><br><span class="line">                    &#125;,</span><br><span class="line">                    &#123;</span><br><span class="line">                        <span class="attr">&quot;region_id&quot;</span>: <span class="string">&quot;RegionOne&quot;</span>,</span><br><span class="line">                        <span class="attr">&quot;url&quot;</span>: <span class="string">&quot;http://10.0.84.52:8004/v1/ed0596a674d84591940d6e3be10661a8&quot;</span>,</span><br><span class="line">                        <span class="attr">&quot;region&quot;</span>: <span class="string">&quot;RegionOne&quot;</span>,</span><br><span class="line">                        <span class="attr">&quot;interface&quot;</span>: <span class="string">&quot;public&quot;</span>,</span><br><span class="line">                        <span class="attr">&quot;id&quot;</span>: <span class="string">&quot;effb9bba0ec34345b1f16f6616d41024&quot;</span></span><br><span class="line">                    &#125;</span><br><span class="line">                ],</span><br><span class="line">                <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;orchestration&quot;</span>,</span><br><span class="line">                <span class="attr">&quot;id&quot;</span>: <span class="string">&quot;4faf0d0323a1433b934008e2f371257f&quot;</span>,</span><br><span class="line">                <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;heat&quot;</span></span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="attr">&quot;endpoints&quot;</span>: [</span><br><span class="line">                    &#123;</span><br><span class="line">                        <span class="attr">&quot;region_id&quot;</span>: <span class="string">&quot;RegionOne&quot;</span>,</span><br><span class="line">                        <span class="attr">&quot;url&quot;</span>: <span class="string">&quot;http://10.0.84.52:8776/v2/ed0596a674d84591940d6e3be10661a8&quot;</span>,</span><br><span class="line">                        <span class="attr">&quot;region&quot;</span>: <span class="string">&quot;RegionOne&quot;</span>,</span><br><span class="line">                        <span class="attr">&quot;interface&quot;</span>: <span class="string">&quot;admin&quot;</span>,</span><br><span class="line">                        <span class="attr">&quot;id&quot;</span>: <span class="string">&quot;3f6e61cceaea422fb884865fc8b93a15&quot;</span></span><br><span class="line">                    &#125;,</span><br><span class="line">                    &#123;</span><br><span class="line">                        <span class="attr">&quot;region_id&quot;</span>: <span class="string">&quot;RegionOne&quot;</span>,</span><br><span class="line">                        <span class="attr">&quot;url&quot;</span>: <span class="string">&quot;http://10.0.84.52:8776/v2/ed0596a674d84591940d6e3be10661a8&quot;</span>,</span><br><span class="line">                        <span class="attr">&quot;region&quot;</span>: <span class="string">&quot;RegionOne&quot;</span>,</span><br><span class="line">                        <span class="attr">&quot;interface&quot;</span>: <span class="string">&quot;public&quot;</span>,</span><br><span class="line">                        <span class="attr">&quot;id&quot;</span>: <span class="string">&quot;4ed6326d65a94401b5e1280134fd2d48&quot;</span></span><br><span class="line">                    &#125;,</span><br><span class="line">                    &#123;</span><br><span class="line">                        <span class="attr">&quot;region_id&quot;</span>: <span class="string">&quot;RegionOne&quot;</span>,</span><br><span class="line">                        <span class="attr">&quot;url&quot;</span>: <span class="string">&quot;http://10.0.84.52:8776/v2/ed0596a674d84591940d6e3be10661a8&quot;</span>,</span><br><span class="line">                        <span class="attr">&quot;region&quot;</span>: <span class="string">&quot;RegionOne&quot;</span>,</span><br><span class="line">                        <span class="attr">&quot;interface&quot;</span>: <span class="string">&quot;internal&quot;</span>,</span><br><span class="line">                        <span class="attr">&quot;id&quot;</span>: <span class="string">&quot;96e02eb9ebe345919ddac114e735c9af&quot;</span></span><br><span class="line">                    &#125;</span><br><span class="line">                ],</span><br><span class="line">                <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;volumev2&quot;</span>,</span><br><span class="line">                <span class="attr">&quot;id&quot;</span>: <span class="string">&quot;6b04d7f69edb4878910e5577e7203d99&quot;</span>,</span><br><span class="line">                <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;cinderv2&quot;</span></span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="attr">&quot;endpoints&quot;</span>: [</span><br><span class="line">                    &#123;</span><br><span class="line">                        <span class="attr">&quot;region_id&quot;</span>: <span class="string">&quot;RegionOne&quot;</span>,</span><br><span class="line">                        <span class="attr">&quot;url&quot;</span>: <span class="string">&quot;http://10.0.84.52:8776/v3/ed0596a674d84591940d6e3be10661a8&quot;</span>,</span><br><span class="line">                        <span class="attr">&quot;region&quot;</span>: <span class="string">&quot;RegionOne&quot;</span>,</span><br><span class="line">                        <span class="attr">&quot;interface&quot;</span>: <span class="string">&quot;internal&quot;</span>,</span><br><span class="line">                        <span class="attr">&quot;id&quot;</span>: <span class="string">&quot;05c90aa6d91a4dd0a3b86b5ae7a3ec9f&quot;</span></span><br><span class="line">                    &#125;,</span><br><span class="line">                    &#123;</span><br><span class="line">                        <span class="attr">&quot;region_id&quot;</span>: <span class="string">&quot;RegionOne&quot;</span>,</span><br><span class="line">                        <span class="attr">&quot;url&quot;</span>: <span class="string">&quot;http://10.0.84.52:8776/v3/ed0596a674d84591940d6e3be10661a8&quot;</span>,</span><br><span class="line">                        <span class="attr">&quot;region&quot;</span>: <span class="string">&quot;RegionOne&quot;</span>,</span><br><span class="line">                        <span class="attr">&quot;interface&quot;</span>: <span class="string">&quot;public&quot;</span>,</span><br><span class="line">                        <span class="attr">&quot;id&quot;</span>: <span class="string">&quot;26d499a887874945b4296a153c5ffa36&quot;</span></span><br><span class="line">                    &#125;,</span><br><span class="line">                    &#123;</span><br><span class="line">                        <span class="attr">&quot;region_id&quot;</span>: <span class="string">&quot;RegionOne&quot;</span>,</span><br><span class="line">                        <span class="attr">&quot;url&quot;</span>: <span class="string">&quot;http://10.0.84.52:8776/v3/ed0596a674d84591940d6e3be10661a8&quot;</span>,</span><br><span class="line">                        <span class="attr">&quot;region&quot;</span>: <span class="string">&quot;RegionOne&quot;</span>,</span><br><span class="line">                        <span class="attr">&quot;interface&quot;</span>: <span class="string">&quot;admin&quot;</span>,</span><br><span class="line">                        <span class="attr">&quot;id&quot;</span>: <span class="string">&quot;6083327dec414ff7aee2578dc07be32a&quot;</span></span><br><span class="line">                    &#125;</span><br><span class="line">                ],</span><br><span class="line">                <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;volumev3&quot;</span>,</span><br><span class="line">                <span class="attr">&quot;id&quot;</span>: <span class="string">&quot;7ab5a6aa19d349e3b6f51d019708640b&quot;</span>,</span><br><span class="line">                <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;cinderv3&quot;</span></span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="attr">&quot;endpoints&quot;</span>: [</span><br><span class="line">                    &#123;</span><br><span class="line">                        <span class="attr">&quot;region_id&quot;</span>: <span class="string">&quot;RegionOne&quot;</span>,</span><br><span class="line">                        <span class="attr">&quot;url&quot;</span>: <span class="string">&quot;http://10.0.84.52:5000/v3&quot;</span>,</span><br><span class="line">                        <span class="attr">&quot;region&quot;</span>: <span class="string">&quot;RegionOne&quot;</span>,</span><br><span class="line">                        <span class="attr">&quot;interface&quot;</span>: <span class="string">&quot;public&quot;</span>,</span><br><span class="line">                        <span class="attr">&quot;id&quot;</span>: <span class="string">&quot;104f35e918ef4bc6b585680a1068759f&quot;</span></span><br><span class="line">                    &#125;,</span><br><span class="line">                    &#123;</span><br><span class="line">                        <span class="attr">&quot;region_id&quot;</span>: <span class="string">&quot;RegionOne&quot;</span>,</span><br><span class="line">                        <span class="attr">&quot;url&quot;</span>: <span class="string">&quot;http://10.0.84.52:5000/v3&quot;</span>,</span><br><span class="line">                        <span class="attr">&quot;region&quot;</span>: <span class="string">&quot;RegionOne&quot;</span>,</span><br><span class="line">                        <span class="attr">&quot;interface&quot;</span>: <span class="string">&quot;internal&quot;</span>,</span><br><span class="line">                        <span class="attr">&quot;id&quot;</span>: <span class="string">&quot;1ae18bb03417491789758cb909f4e5a7&quot;</span></span><br><span class="line">                    &#125;,</span><br><span class="line">                    &#123;</span><br><span class="line">                        <span class="attr">&quot;region_id&quot;</span>: <span class="string">&quot;RegionOne&quot;</span>,</span><br><span class="line">                        <span class="attr">&quot;url&quot;</span>: <span class="string">&quot;http://10.0.84.52:35357/v3&quot;</span>,</span><br><span class="line">                        <span class="attr">&quot;region&quot;</span>: <span class="string">&quot;RegionOne&quot;</span>,</span><br><span class="line">                        <span class="attr">&quot;interface&quot;</span>: <span class="string">&quot;admin&quot;</span>,</span><br><span class="line">                        <span class="attr">&quot;id&quot;</span>: <span class="string">&quot;81b5b166c3e44f569934032c030157f6&quot;</span></span><br><span class="line">                    &#125;</span><br><span class="line">                ],</span><br><span class="line">                <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;identity&quot;</span>,</span><br><span class="line">                <span class="attr">&quot;id&quot;</span>: <span class="string">&quot;94390d15efa54fb2b56f9c60eca92364&quot;</span>,</span><br><span class="line">                <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;keystone&quot;</span></span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="attr">&quot;endpoints&quot;</span>: [</span><br><span class="line">                    &#123;</span><br><span class="line">                        <span class="attr">&quot;region_id&quot;</span>: <span class="string">&quot;RegionOne&quot;</span>,</span><br><span class="line">                        <span class="attr">&quot;url&quot;</span>: <span class="string">&quot;http://10.0.84.52:8000/v1&quot;</span>,</span><br><span class="line">                        <span class="attr">&quot;region&quot;</span>: <span class="string">&quot;RegionOne&quot;</span>,</span><br><span class="line">                        <span class="attr">&quot;interface&quot;</span>: <span class="string">&quot;internal&quot;</span>,</span><br><span class="line">                        <span class="attr">&quot;id&quot;</span>: <span class="string">&quot;59ce20e207ee442e8d34cc791a5074c3&quot;</span></span><br><span class="line">                    &#125;,</span><br><span class="line">                    &#123;</span><br><span class="line">                        <span class="attr">&quot;region_id&quot;</span>: <span class="string">&quot;RegionOne&quot;</span>,</span><br><span class="line">                        <span class="attr">&quot;url&quot;</span>: <span class="string">&quot;http://10.0.84.52:8000/v1&quot;</span>,</span><br><span class="line">                        <span class="attr">&quot;region&quot;</span>: <span class="string">&quot;RegionOne&quot;</span>,</span><br><span class="line">                        <span class="attr">&quot;interface&quot;</span>: <span class="string">&quot;public&quot;</span>,</span><br><span class="line">                        <span class="attr">&quot;id&quot;</span>: <span class="string">&quot;c02bc940384a49cabaf7e14be1862f66&quot;</span></span><br><span class="line">                    &#125;,</span><br><span class="line">                    &#123;</span><br><span class="line">                        <span class="attr">&quot;region_id&quot;</span>: <span class="string">&quot;RegionOne&quot;</span>,</span><br><span class="line">                        <span class="attr">&quot;url&quot;</span>: <span class="string">&quot;http://10.0.84.52:8000/v1&quot;</span>,</span><br><span class="line">                        <span class="attr">&quot;region&quot;</span>: <span class="string">&quot;RegionOne&quot;</span>,</span><br><span class="line">                        <span class="attr">&quot;interface&quot;</span>: <span class="string">&quot;admin&quot;</span>,</span><br><span class="line">                        <span class="attr">&quot;id&quot;</span>: <span class="string">&quot;cdaa6cedb47b4b26a3ffecfb208b8740&quot;</span></span><br><span class="line">                    &#125;</span><br><span class="line">                ],</span><br><span class="line">                <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;cloudformation&quot;</span>,</span><br><span class="line">                <span class="attr">&quot;id&quot;</span>: <span class="string">&quot;9952ffb22c6b4091be0e8d7104a9dc47&quot;</span>,</span><br><span class="line">                <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;heat-cfn&quot;</span></span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="attr">&quot;endpoints&quot;</span>: [</span><br><span class="line">                    &#123;</span><br><span class="line">                        <span class="attr">&quot;region_id&quot;</span>: <span class="string">&quot;RegionOne&quot;</span>,</span><br><span class="line">                        <span class="attr">&quot;url&quot;</span>: <span class="string">&quot;http://10.0.84.52:8776/v1/ed0596a674d84591940d6e3be10661a8&quot;</span>,</span><br><span class="line">                        <span class="attr">&quot;region&quot;</span>: <span class="string">&quot;RegionOne&quot;</span>,</span><br><span class="line">                        <span class="attr">&quot;interface&quot;</span>: <span class="string">&quot;internal&quot;</span>,</span><br><span class="line">                        <span class="attr">&quot;id&quot;</span>: <span class="string">&quot;12ff0fbbfd4041dfa5baa2f398bc1743&quot;</span></span><br><span class="line">                    &#125;,</span><br><span class="line">                    &#123;</span><br><span class="line">                        <span class="attr">&quot;region_id&quot;</span>: <span class="string">&quot;RegionOne&quot;</span>,</span><br><span class="line">                        <span class="attr">&quot;url&quot;</span>: <span class="string">&quot;http://10.0.84.52:8776/v1/ed0596a674d84591940d6e3be10661a8&quot;</span>,</span><br><span class="line">                        <span class="attr">&quot;region&quot;</span>: <span class="string">&quot;RegionOne&quot;</span>,</span><br><span class="line">                        <span class="attr">&quot;interface&quot;</span>: <span class="string">&quot;public&quot;</span>,</span><br><span class="line">                        <span class="attr">&quot;id&quot;</span>: <span class="string">&quot;19b6c07105b049eaa6001a3236591a0a&quot;</span></span><br><span class="line">                    &#125;,</span><br><span class="line">                    &#123;</span><br><span class="line">                        <span class="attr">&quot;region_id&quot;</span>: <span class="string">&quot;RegionOne&quot;</span>,</span><br><span class="line">                        <span class="attr">&quot;url&quot;</span>: <span class="string">&quot;http://10.0.84.52:8776/v1/ed0596a674d84591940d6e3be10661a8&quot;</span>,</span><br><span class="line">                        <span class="attr">&quot;region&quot;</span>: <span class="string">&quot;RegionOne&quot;</span>,</span><br><span class="line">                        <span class="attr">&quot;interface&quot;</span>: <span class="string">&quot;admin&quot;</span>,</span><br><span class="line">                        <span class="attr">&quot;id&quot;</span>: <span class="string">&quot;f968d4484e7648c888a1ee69e58f46f7&quot;</span></span><br><span class="line">                    &#125;</span><br><span class="line">                ],</span><br><span class="line">                <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;volume&quot;</span>,</span><br><span class="line">                <span class="attr">&quot;id&quot;</span>: <span class="string">&quot;aa9c81d5176f46238772fbd48d465a6e&quot;</span>,</span><br><span class="line">                <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;cinder&quot;</span></span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="attr">&quot;endpoints&quot;</span>: [</span><br><span class="line">                    &#123;</span><br><span class="line">                        <span class="attr">&quot;region_id&quot;</span>: <span class="string">&quot;RegionOne&quot;</span>,</span><br><span class="line">                        <span class="attr">&quot;url&quot;</span>: <span class="string">&quot;http://10.0.84.52:8774/v2/ed0596a674d84591940d6e3be10661a8&quot;</span>,</span><br><span class="line">                        <span class="attr">&quot;region&quot;</span>: <span class="string">&quot;RegionOne&quot;</span>,</span><br><span class="line">                        <span class="attr">&quot;interface&quot;</span>: <span class="string">&quot;public&quot;</span>,</span><br><span class="line">                        <span class="attr">&quot;id&quot;</span>: <span class="string">&quot;284c6e27ad36425abdb25ae4175dd3ea&quot;</span></span><br><span class="line">                    &#125;,</span><br><span class="line">                    &#123;</span><br><span class="line">                        <span class="attr">&quot;region_id&quot;</span>: <span class="string">&quot;RegionOne&quot;</span>,</span><br><span class="line">                        <span class="attr">&quot;url&quot;</span>: <span class="string">&quot;http://10.0.84.52:8774/v2/ed0596a674d84591940d6e3be10661a8&quot;</span>,</span><br><span class="line">                        <span class="attr">&quot;region&quot;</span>: <span class="string">&quot;RegionOne&quot;</span>,</span><br><span class="line">                        <span class="attr">&quot;interface&quot;</span>: <span class="string">&quot;internal&quot;</span>,</span><br><span class="line">                        <span class="attr">&quot;id&quot;</span>: <span class="string">&quot;914f3f40ce8448df8817373779492abe&quot;</span></span><br><span class="line">                    &#125;,</span><br><span class="line">                    &#123;</span><br><span class="line">                        <span class="attr">&quot;region_id&quot;</span>: <span class="string">&quot;RegionOne&quot;</span>,</span><br><span class="line">                        <span class="attr">&quot;url&quot;</span>: <span class="string">&quot;http://10.0.84.52:8774/v2/ed0596a674d84591940d6e3be10661a8&quot;</span>,</span><br><span class="line">                        <span class="attr">&quot;region&quot;</span>: <span class="string">&quot;RegionOne&quot;</span>,</span><br><span class="line">                        <span class="attr">&quot;interface&quot;</span>: <span class="string">&quot;admin&quot;</span>,</span><br><span class="line">                        <span class="attr">&quot;id&quot;</span>: <span class="string">&quot;b002db37826d47008149b5dd26ced405&quot;</span></span><br><span class="line">                    &#125;</span><br><span class="line">                ],</span><br><span class="line">                <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;compute&quot;</span>,</span><br><span class="line">                <span class="attr">&quot;id&quot;</span>: <span class="string">&quot;b606deae3b5042a3866fcca5abe203e9&quot;</span>,</span><br><span class="line">                <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;nova&quot;</span></span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="attr">&quot;endpoints&quot;</span>: [</span><br><span class="line">                    &#123;</span><br><span class="line">                        <span class="attr">&quot;region_id&quot;</span>: <span class="string">&quot;RegionOne&quot;</span>,</span><br><span class="line">                        <span class="attr">&quot;url&quot;</span>: <span class="string">&quot;http://10.0.84.52:9292&quot;</span>,</span><br><span class="line">                        <span class="attr">&quot;region&quot;</span>: <span class="string">&quot;RegionOne&quot;</span>,</span><br><span class="line">                        <span class="attr">&quot;interface&quot;</span>: <span class="string">&quot;internal&quot;</span>,</span><br><span class="line">                        <span class="attr">&quot;id&quot;</span>: <span class="string">&quot;01e9dae6fd7246c0bc101abb112fcdb8&quot;</span></span><br><span class="line">                    &#125;,</span><br><span class="line">                    &#123;</span><br><span class="line">                        <span class="attr">&quot;region_id&quot;</span>: <span class="string">&quot;RegionOne&quot;</span>,</span><br><span class="line">                        <span class="attr">&quot;url&quot;</span>: <span class="string">&quot;http://10.0.84.52:9292&quot;</span>,</span><br><span class="line">                        <span class="attr">&quot;region&quot;</span>: <span class="string">&quot;RegionOne&quot;</span>,</span><br><span class="line">                        <span class="attr">&quot;interface&quot;</span>: <span class="string">&quot;admin&quot;</span>,</span><br><span class="line">                        <span class="attr">&quot;id&quot;</span>: <span class="string">&quot;36013e038ffb473c9a377fffd63a86db&quot;</span></span><br><span class="line">                    &#125;,</span><br><span class="line">                    &#123;</span><br><span class="line">                        <span class="attr">&quot;region_id&quot;</span>: <span class="string">&quot;RegionOne&quot;</span>,</span><br><span class="line">                        <span class="attr">&quot;url&quot;</span>: <span class="string">&quot;http://10.0.84.52:9292&quot;</span>,</span><br><span class="line">                        <span class="attr">&quot;region&quot;</span>: <span class="string">&quot;RegionOne&quot;</span>,</span><br><span class="line">                        <span class="attr">&quot;interface&quot;</span>: <span class="string">&quot;public&quot;</span>,</span><br><span class="line">                        <span class="attr">&quot;id&quot;</span>: <span class="string">&quot;e6f97873b7734743ba6eed52b789955b&quot;</span></span><br><span class="line">                    &#125;</span><br><span class="line">                ],</span><br><span class="line">                <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;image&quot;</span>,</span><br><span class="line">                <span class="attr">&quot;id&quot;</span>: <span class="string">&quot;e2d274d71113415399f3e24e187d165d&quot;</span>,</span><br><span class="line">                <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;glance&quot;</span></span><br><span class="line">            &#125;</span><br><span class="line">        ],</span><br><span class="line">        <span class="attr">&quot;user&quot;</span>: &#123;</span><br><span class="line">            <span class="attr">&quot;domain&quot;</span>: &#123;</span><br><span class="line">                <span class="attr">&quot;id&quot;</span>: <span class="string">&quot;default&quot;</span>,</span><br><span class="line">                <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;Default&quot;</span></span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="attr">&quot;id&quot;</span>: <span class="string">&quot;fb7cdca584894c7ca3faa7388ee3a98f&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;admin&quot;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">&quot;audit_ids&quot;</span>: [</span><br><span class="line">            <span class="string">&quot;XgeY0-0cTbuvSuu58WlHLA&quot;</span></span><br><span class="line">        ],</span><br><span class="line">        <span class="attr">&quot;issued_at&quot;</span>: <span class="string">&quot;2016-11-30T03:15:43.057953Z&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>作者：爱吃土豆的程序猿<br>链接：<a href="https://www.jianshu.com/p/a8b6504fc3c6">https://www.jianshu.com/p/a8b6504fc3c6</a></p></blockquote><h2 id="调试"><a href="#调试" class="headerlink" title="调试"></a>调试</h2><h3 id="1-查看endpoint"><a href="#1-查看endpoint" class="headerlink" title="1. 查看endpoint"></a>1. 查看endpoint</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> openstack endpoint list</span></span><br><span class="line"></span><br><span class="line">+----------------------------------+-----------+--------------+----------------+---------+-----------+---------------------------------------------+</span><br><span class="line">| ID                               | Region    | Service Name | Service Type   | Enabled | Interface | URL                                         |</span><br><span class="line">+----------------------------------+-----------+--------------+----------------+---------+-----------+---------------------------------------------+</span><br><span class="line">| 0293f08fe3374b65a80bf0bf7c12a6ab | RegionOne | placement    | placement      | True    | admin     | http://111.111.111.80:8780                  |</span><br><span class="line">| 0c43ec8a11414c56ae8aed723bd232e8 | RegionOne | glance       | image          | True    | public    | http://111.111.111.80:9292                  |</span><br><span class="line">| 1f58f929a59c4726a535e31cd634fddd | RegionOne | glance       | image          | True    | internal  | http://111.111.111.80:9292                  |</span><br><span class="line">| 2cdcbb0779624bf58a74e6912a9411fd | RegionOne | neutron      | network        | True    | admin     | http://111.111.111.80:9696                  |</span><br><span class="line">| 4c39935eaaab4af59a3cbd352e137e4b | RegionOne | neutron      | network        | True    | public    | http://111.111.111.80:9696                  |</span><br><span class="line">| 5bb8f8a16c764aa997a21a005a2608f6 | RegionOne | nova_legacy  | compute_legacy | True    | public    | http://111.111.111.80:8774/v2/%(tenant_id)s |</span><br><span class="line">| 64300c58965f41e3a1f6991c6215e06d | RegionOne | nova         | compute        | True    | public    | http://111.111.111.80:8774/v2.1             |</span><br><span class="line">| 6b3510cfbdfd4b08910d87020acd29d1 | RegionOne | cinderv3     | volumev3       | True    | admin     | http://111.111.111.80:8776/v3/%(tenant_id)s |</span><br><span class="line">| 81be77dbe60a4353952b3635b855a85c | RegionOne | nova         | compute        | True    | admin     | http://111.111.111.80:8774/v2.1             |</span><br><span class="line">| 87ae064fd3cc4234a42a55188fa237e0 | RegionOne | cinderv3     | volumev3       | True    | internal  | http://111.111.111.80:8776/v3/%(tenant_id)s |</span><br><span class="line">| 90bb8a42cf4d48b099c9aa21cb8e3cbd | RegionOne | keystone     | identity       | True    | internal  | http://111.111.111.80:5000                  |</span><br><span class="line">| 92a7a61523c7411abe9da4e2f4c1adeb | RegionOne | cinderv2     | volumev2       | True    | admin     | http://111.111.111.80:8776/v2/%(tenant_id)s |</span><br><span class="line">| 9576bf398d19446b9f7c392f4386a137 | RegionOne | nova_legacy  | compute_legacy | True    | internal  | http://111.111.111.80:8774/v2/%(tenant_id)s |</span><br><span class="line">| 967b8c2e6f7546dfaa194d38972e3e97 | RegionOne | glance       | image          | True    | admin     | http://111.111.111.80:9292                  |</span><br><span class="line">| 99aced6c046e41f49e29968ba0e7bb5d | RegionOne | keystone     | identity       | True    | public    | http://111.111.111.80:5000                  |</span><br><span class="line">| 9acbd8d95c334b6782d9e7ac41c2aafe | RegionOne | cinderv2     | volumev2       | True    | public    | http://111.111.111.80:8776/v2/%(tenant_id)s |</span><br><span class="line">| b66ba28ee6104e16aa6adf19f856d6d8 | RegionOne | cinderv2     | volumev2       | True    | internal  | http://111.111.111.80:8776/v2/%(tenant_id)s |</span><br><span class="line">| b9384f9957144960a7cdb25d11c3e5ec | RegionOne | placement    | placement      | True    | public    | http://111.111.111.80:8780                  |</span><br><span class="line">| bcac2a4bb14f40bcbf01356f8ed4f580 | RegionOne | nova         | compute        | True    | internal  | http://111.111.111.80:8774/v2.1             |</span><br><span class="line">| c8fd37d7ca7f484fb0318f5b8ebf1498 | RegionOne | keystone     | identity       | True    | admin     | http://111.111.111.80:35357                 |</span><br><span class="line">| c999b3341cfb4118ba9cd7b064d9d494 | RegionOne | nova_legacy  | compute_legacy | True    | admin     | http://111.111.111.80:8774/v2/%(tenant_id)s |</span><br><span class="line">| d9efed636a104a98a52b48984c63e8aa | RegionOne | placement    | placement      | True    | internal  | http://111.111.111.80:8780                  |</span><br><span class="line">| e927b87c681b488cb0607bc47cb7c8f7 | RegionOne | cinderv3     | volumev3       | True    | public    | http://111.111.111.80:8776/v3/%(tenant_id)s |</span><br><span class="line">| ee6cce1279b7455ebbb086c6576df1eb | RegionOne | neutron      | network        | True    | internal  | http://111.111.111.80:9696                  |</span><br><span class="line">+----------------------------------+-----------+--------------+----------------+---------+-----------+---------------------------------------------+</span><br></pre></td></tr></table></figure><h3 id="2-获取token"><a href="#2-获取token" class="headerlink" title="2. 获取token"></a>2. 获取token</h3><p>创建<code>token-request.json</code>文件，作为HTTP消息的内容：</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">&quot;auth&quot;</span>: &#123;</span><br><span class="line">        <span class="attr">&quot;identity&quot;</span>: &#123;</span><br><span class="line">            <span class="attr">&quot;methods&quot;</span>: [</span><br><span class="line">                <span class="string">&quot;password&quot;</span></span><br><span class="line">            ],</span><br><span class="line">            <span class="attr">&quot;password&quot;</span>: &#123;</span><br><span class="line">                <span class="attr">&quot;user&quot;</span>: &#123;</span><br><span class="line">                    <span class="attr">&quot;domain&quot;</span>: &#123;</span><br><span class="line">                        <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;default&quot;</span></span><br><span class="line">                    &#125;,</span><br><span class="line">                    <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;admin&quot;</span>,</span><br><span class="line">                    <span class="attr">&quot;password&quot;</span>: <span class="string">&quot;admin&quot;</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">&quot;scope&quot;</span>: &#123;</span><br><span class="line">            <span class="attr">&quot;project&quot;</span>: &#123;</span><br><span class="line">                <span class="attr">&quot;domain&quot;</span>: &#123;</span><br><span class="line">                    <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;default&quot;</span></span><br><span class="line">                &#125;,</span><br><span class="line">                <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;admin&quot;</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>按照具体情况修改上面的json文件，向keystone请求token。<code>-si</code>是返回消息头。token信息位于消息头的<code>X-Subject-Token</code>字段</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> curl -si -d @token-request.json -H <span class="string">&quot;Content-type: application/json&quot;</span> http://111.111.111.80:35357/v3/auth/tokens</span></span><br><span class="line"></span><br><span class="line">HTTP/1.1 201 CREATED</span><br><span class="line">Date: Mon, 14 Dec 2020 14:14:34 GMT</span><br><span class="line">Server: Apache</span><br><span class="line">X-Subject-Token: gAAAAABf13NKA1JVOP1pF6OYmtzgaiKXz17svZrXzsEX5_0klzwe9XPkHbxCn39Ri3y_2oglGHEAeWaKH1aycPENWJvPLGA63jk83fMBYwFFTpjvILcbjlKdDdG5hZwLGqdWR9VKYaEp07uIeGDJwQVFbf9tzt9x-uWytJeYyPJlORENLY6_6HQ</span><br><span class="line">Vary: X-Auth-Token</span><br><span class="line">x-openstack-request-id: req-15d5d205-6d39-4163-bc6d-7cb79d17696f</span><br><span class="line">Content-Length: 5472</span><br><span class="line">Content-Type: application/json</span><br><span class="line">...</span><br></pre></td></tr></table></figure><p>从上面可以看到<code>X-Subject-Token</code>，将其存放在USER_TOKEN的环境变量中：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">export USER_TOKEN=gAAAAABf13NKA1JVOP1pF6OYmtzgaiKXz17svZrXzsEX5_0klzwe9XPkHbxCn39Ri3y_2oglGHEAeWaKH1aycPENWJvPLGA63jk83fMBYwFFTpjvILcbjlKdDdG5hZwLGqdWR9VKYaEp07uIeGDJwQVFbf9tzt9x-uWytJeYyPJlORENLY6_6HQ</span><br></pre></td></tr></table></figure><h3 id="3-访问OpenStack-API接口"><a href="#3-访问OpenStack-API接口" class="headerlink" title="3. 访问OpenStack API接口"></a>3. 访问OpenStack API接口</h3><p>OpenStack API地址使用<code>openstack endpoint list</code>中的对应地址</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> List images</span></span><br><span class="line">curl -H &quot;X-Auth-Token:$USER_TOKEN&quot; -H &quot;Content-type: application/json&quot; http://111.111.111.80:9292/v2/images | python -m json.tool</span><br><span class="line"></span><br><span class="line"><span class="meta">  %</span><span class="bash"> Total    % Received % Xferd  Average Speed   Time    Time     Time  Current</span></span><br><span class="line">                                 Dload  Upload   Total   Spent    Left  Speed</span><br><span class="line">100  1633  100  1633    0     0   3019      0 --:--:-- --:--:-- --:--:--  3018</span><br><span class="line">&#123;</span><br><span class="line">    &quot;first&quot;: &quot;/v2/images&quot;,</span><br><span class="line">    &quot;images&quot;: [</span><br><span class="line">        &#123;</span><br><span class="line">            &quot;checksum&quot;: &quot;7734eb3945297adc90ddc6cebe8bb082&quot;,</span><br><span class="line">            &quot;container_format&quot;: &quot;bare&quot;,</span><br><span class="line">            &quot;created_at&quot;: &quot;2020-12-14T14:17:36Z&quot;,</span><br><span class="line">            &quot;disk_format&quot;: &quot;qcow2&quot;,</span><br><span class="line">            &quot;file&quot;: &quot;/v2/images/9defe6f1-397d-4d58-a91f-d247fcde5b12/file&quot;,</span><br><span class="line">            &quot;id&quot;: &quot;9defe6f1-397d-4d58-a91f-d247fcde5b12&quot;,</span><br><span class="line">            &quot;min_disk&quot;: 0,</span><br><span class="line">            &quot;min_ram&quot;: 0,</span><br><span class="line">            &quot;name&quot;: &quot;demo&quot;,</span><br><span class="line">            &quot;os_hash_algo&quot;: &quot;sha512&quot;,</span><br><span class="line">            &quot;os_hash_value&quot;: &quot;3958def70c03a9734c89de42466f54c7c172e9493d5649ead0b4fee8ba8c4604742f59724a5f74f321be1afcaf85a321d2f2e492539800cff51f1f9684d70c1e&quot;,</span><br><span class="line">            &quot;os_hidden&quot;: false,</span><br><span class="line">            &quot;owner&quot;: &quot;42c2cc9bb3854f0fb63a52973bf4acd8&quot;,</span><br><span class="line">            &quot;protected&quot;: false,</span><br><span class="line">            &quot;schema&quot;: &quot;/v2/schemas/image&quot;,</span><br><span class="line">            &quot;self&quot;: &quot;/v2/images/9defe6f1-397d-4d58-a91f-d247fcde5b12&quot;,</span><br><span class="line">            &quot;size&quot;: 16344576,</span><br><span class="line">            &quot;status&quot;: &quot;active&quot;,</span><br><span class="line">            &quot;tags&quot;: [],</span><br><span class="line">            &quot;updated_at&quot;: &quot;2020-12-14T14:17:36Z&quot;,</span><br><span class="line">            &quot;virtual_size&quot;: null,</span><br><span class="line">            &quot;visibility&quot;: &quot;shared&quot;</span><br><span class="line">        &#125;</span><br><span class="line">    ],</span><br><span class="line">    &quot;schema&quot;: &quot;/v2/schemas/images&quot;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> Deactivate image</span></span><br><span class="line">curl -H &quot;X-Auth-Token:$USER_TOKEN&quot; -H &quot;Content-type: application/json&quot; -X POST http://111.111.111.80:9292/v2/images/9defe6f1-397d-4d58-a91f-d247fcde5b12/actions/deactivate | python -m json.tool</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> Reactivate image</span></span><br><span class="line">curl -H &quot;X-Auth-Token:$USER_TOKEN&quot; -H &quot;Content-type: application/json&quot; -X POST http://111.111.111.80:9292/v2/images/9defe6f1-397d-4d58-a91f-d247fcde5b12/actions/reactivate | python -m json.tool</span><br></pre></td></tr></table></figure><h2 id="参考文档"><a href="#参考文档" class="headerlink" title="参考文档"></a>参考文档</h2><p><a href="https://www.jianshu.com/p/a8b6504fc3c6">通过curl访问openstack各服务</a></p><p><a href="https://docs.openstack.org/train/api/index.html">OpenStack Train API Reference Documentation</a></p><p><a href="https://docs.openstack.org/api-ref/image/v2/?expanded=">OpenStack API Documentation：Image Service API v2 (CURRENT)</a></p><p><a href="https://docs.openstack.org/api-ref/compute/?expanded=#delete-server">OpenStack API Documentation：Compute API</a></p><p><a href="https://docs.openstack.org/api-ref/block-storage/v3/index.html?expanded=#volume-type-access-types-action-types-os-volume-type-access">OpenStack API Documentation：Block Storage API V3 (CURRENT)</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;基本概念&quot;&gt;&lt;a href=&quot;#基本概念&quot; class=&quot;headerlink&quot; title=&quot;基本概念&quot;&gt;&lt;/a&gt;基本概念&lt;/h2&gt;&lt;blockquote&gt;
&lt;h3 id=&quot;keystone&quot;&gt;&lt;a href=&quot;#keystone&quot; class=&quot;headerl</summary>
      
    
    
    
    <category term="OpenStack" scheme="https://renyb2.github.io/categories/OpenStack/"/>
    
    
    <category term="Train版本" scheme="https://renyb2.github.io/tags/Train%E7%89%88%E6%9C%AC/"/>
    
    <category term="OpenStack开发" scheme="https://renyb2.github.io/tags/OpenStack%E5%BC%80%E5%8F%91/"/>
    
    <category term="Curl" scheme="https://renyb2.github.io/tags/Curl/"/>
    
  </entry>
  
  <entry>
    <title>OpenStack部署：默认端口号</title>
    <link href="https://renyb2.github.io/2020/12/05/OpenStack%E9%83%A8%E7%BD%B2%EF%BC%9A%E9%BB%98%E8%AE%A4%E7%AB%AF%E5%8F%A3%E5%8F%B7/"/>
    <id>https://renyb2.github.io/2020/12/05/OpenStack%E9%83%A8%E7%BD%B2%EF%BC%9A%E9%BB%98%E8%AE%A4%E7%AB%AF%E5%8F%A3%E5%8F%B7/</id>
    <published>2020-12-05T06:00:05.000Z</published>
    <updated>2020-12-16T07:43:58.574Z</updated>
    
    <content type="html"><![CDATA[<h2 id="组件默认端口号"><a href="#组件默认端口号" class="headerlink" title="组件默认端口号"></a>组件默认端口号</h2><table><thead><tr><th>OpenStack service</th><th>Default ports</th><th>Port type</th></tr></thead><tbody><tr><td>Block Storage (cinder)</td><td>8776</td><td>publicurl and adminurl</td></tr><tr><td>Compute (nova) endpoints</td><td>8774</td><td>publicurl and adminurl</td></tr><tr><td>Compute API (nova-api)</td><td>8773, 8775</td><td></td></tr><tr><td>Compute ports for access to virtual machine consoles</td><td>5900-5999</td><td></td></tr><tr><td>Compute VNC proxy for browsers ( openstack-nova-novncproxy)</td><td>6080</td><td></td></tr><tr><td>Compute VNC proxy for traditional VNC clients (openstack-nova-xvpvncproxy)</td><td>6081</td><td></td></tr><tr><td>Proxy port for HTML5 console used by Compute service</td><td>6082</td><td></td></tr><tr><td>Data processing service (sahara) endpoint</td><td>8386</td><td>publicurl and adminurl</td></tr><tr><td>Identity service (keystone) administrative endpoint</td><td>35357</td><td>adminurl</td></tr><tr><td>Identity service public endpoint</td><td>5000</td><td>publicurl</td></tr><tr><td>Image service (glance) API</td><td>9292</td><td>publicurl and adminurl</td></tr><tr><td>Image service registry</td><td>9191</td><td></td></tr><tr><td>Networking (neutron)</td><td>9696</td><td>publicurl and adminurl</td></tr><tr><td>Object Storage (swift)</td><td>6000, 6001, 6002</td><td></td></tr><tr><td>Orchestration (heat) endpoint</td><td>8004</td><td>publicurl and adminurl</td></tr><tr><td>Orchestration AWS CloudFormation-compatible API (openstack-heat-api-cfn)</td><td>8000</td><td></td></tr><tr><td>Orchestration AWS CloudWatch-compatible API (openstack-heat-api-cloudwatch)</td><td>8003</td><td></td></tr><tr><td>Telemetry (ceilometer)</td><td>8777</td><td>publicurl and adminurl</td></tr></tbody></table><h2 id="基础服务默认端口号"><a href="#基础服务默认端口号" class="headerlink" title="基础服务默认端口号"></a>基础服务默认端口号</h2><table><thead><tr><th>Openstack service</th><th>Default ports</th><th>Used by</th></tr></thead><tbody><tr><td>HTTP</td><td>80</td><td>OpenStack dashboard (Horizon) when it is not configured to use secure access.</td></tr><tr><td>HTTP alternate</td><td>8080</td><td>OpenStack Object Storage (swift) service.</td></tr><tr><td>HTTPS</td><td>443</td><td>Any OpenStack service that is enabled for SSL, especially secure-access dashboard.</td></tr><tr><td>rsync</td><td>873</td><td>OpenStack Object Storage. Required.</td></tr><tr><td>iSCSI target</td><td>3260</td><td>OpenStack Block Storage. Required.</td></tr><tr><td>MySQL database service</td><td>3306</td><td>Most OpenStack components.</td></tr><tr><td>Message Broker (AMQP traffic)</td><td>5672</td><td>OpenStack Block Storage, Networking, Orchestration, and Compute.</td></tr></tbody></table>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;组件默认端口号&quot;&gt;&lt;a href=&quot;#组件默认端口号&quot; class=&quot;headerlink&quot; title=&quot;组件默认端口号&quot;&gt;&lt;/a&gt;组件默认端口号&lt;/h2&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;OpenStack service&lt;/th&gt;
&lt;th&gt;D</summary>
      
    
    
    
    <category term="OpenStack" scheme="https://renyb2.github.io/categories/OpenStack/"/>
    
    
    <category term="OpenStack部署" scheme="https://renyb2.github.io/tags/OpenStack%E9%83%A8%E7%BD%B2/"/>
    
  </entry>
  
  <entry>
    <title>Linux配置：远程服务器通过本机代理联网</title>
    <link href="https://renyb2.github.io/2020/11/17/Linux%E9%85%8D%E7%BD%AE%EF%BC%9A%E8%BF%9C%E7%A8%8B%E6%9C%8D%E5%8A%A1%E5%99%A8%E9%80%9A%E8%BF%87%E6%9C%AC%E6%9C%BA%E4%BB%A3%E7%90%86%E8%81%94%E7%BD%91/"/>
    <id>https://renyb2.github.io/2020/11/17/Linux%E9%85%8D%E7%BD%AE%EF%BC%9A%E8%BF%9C%E7%A8%8B%E6%9C%8D%E5%8A%A1%E5%99%A8%E9%80%9A%E8%BF%87%E6%9C%AC%E6%9C%BA%E4%BB%A3%E7%90%86%E8%81%94%E7%BD%91/</id>
    <published>2020-11-17T03:33:13.000Z</published>
    <updated>2020-11-23T06:10:40.358Z</updated>
    
    <content type="html"><![CDATA[<h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><p>解决问题如下：</p><p>线上服务器无法访问公网，申请公网访问流程过于复杂，部署环境又需要连接公网来安装包，可使用本方式配置代理联网。</p><h2 id="架构"><a href="#架构" class="headerlink" title="架构"></a>架构</h2><ol><li>通过<code>Fiddler</code>，在本地Windows机器上启动HTTP代理服务</li><li>通过Xshell/MobaXterm等远程连接软件，建立<code>SSH Tunnel</code></li><li>连接远程服务器后，在服务器设置<code>http_proxy</code> <code>https_proxy</code> <code>no_proxy</code></li></ol><p><img src="/2020/11/17/Linux%E9%85%8D%E7%BD%AE%EF%BC%9A%E8%BF%9C%E7%A8%8B%E6%9C%8D%E5%8A%A1%E5%99%A8%E9%80%9A%E8%BF%87%E6%9C%AC%E6%9C%BA%E4%BB%A3%E7%90%86%E8%81%94%E7%BD%91/%E8%BF%9C%E7%A8%8B%E4%BB%A3%E7%90%86%E6%9E%B6%E6%9E%84%E5%9B%BE.png" alt="远程代理架构图"></p><h2 id="资源包"><a href="#资源包" class="headerlink" title="资源包"></a>资源包</h2><p><strong>Fiddler</strong></p><ul><li>链接：<a href="https://pan.baidu.com/s/1-0wsdRkJ6MsDG7MvvvZVLQ">https://pan.baidu.com/s/1-0wsdRkJ6MsDG7MvvvZVLQ</a> </li><li>提取码：x0cc </li></ul><h2 id="部署流程"><a href="#部署流程" class="headerlink" title="部署流程"></a>部署流程</h2><h3 id="1-部署Fiddler"><a href="#1-部署Fiddler" class="headerlink" title="1. 部署Fiddler"></a>1. 部署Fiddler</h3><p>下载并解压Fiddler至本地文件夹，双击<code>Fiddler.exe</code>运行Fiddler，对Fiddler做如下配置：</p><ul><li>勾选允许远程计算机连接</li></ul><p><img src="/2020/11/17/Linux%E9%85%8D%E7%BD%AE%EF%BC%9A%E8%BF%9C%E7%A8%8B%E6%9C%8D%E5%8A%A1%E5%99%A8%E9%80%9A%E8%BF%87%E6%9C%AC%E6%9C%BA%E4%BB%A3%E7%90%86%E8%81%94%E7%BD%91/%E9%83%A8%E7%BD%B2Fiddler.png" alt="部署Fiddler"></p><h3 id="2-配置SSH工具"><a href="#2-配置SSH工具" class="headerlink" title="2. 配置SSH工具"></a>2. 配置SSH工具</h3><p>参考配置的工具：MobaXterm</p><ol><li>点击<code>Tunneling</code>，进入<code>SSH Tunneling</code>设置页面</li></ol><p><img src="/2020/11/17/Linux%E9%85%8D%E7%BD%AE%EF%BC%9A%E8%BF%9C%E7%A8%8B%E6%9C%8D%E5%8A%A1%E5%99%A8%E9%80%9A%E8%BF%87%E6%9C%AC%E6%9C%BA%E4%BB%A3%E7%90%86%E8%81%94%E7%BD%91/%E9%85%8D%E7%BD%AEMobaXterm-1.png" alt="配置MobaXterm-1"></p><ol start="2"><li>点击<code>New SSH tunnel</code>，创建新的SSH tunnel</li></ol><p><img src="/2020/11/17/Linux%E9%85%8D%E7%BD%AE%EF%BC%9A%E8%BF%9C%E7%A8%8B%E6%9C%8D%E5%8A%A1%E5%99%A8%E9%80%9A%E8%BF%87%E6%9C%AC%E6%9C%BA%E4%BB%A3%E7%90%86%E8%81%94%E7%BD%91/%E9%85%8D%E7%BD%AEMobaXterm-2.png" alt="配置MobaXterm-2"></p><ol start="3"><li>点击<code>Remote port forwarding</code>，设置远程代理，填写如下参数：<ul><li>Local server：port使用Fiddler中启动的本地代理端口（ <code>hostname</code> + <code>port</code> ）</li><li>SSH server：远程SSH登录信息（ <code>ip</code> + <code>port</code> + <code>username</code> ）</li><li>Remote clients：填写远端服务器的一个端口，程序会在远程服务器启动该端口用于转发（<code>forwarded port</code>）</li></ul></li></ol><p><img src="/2020/11/17/Linux%E9%85%8D%E7%BD%AE%EF%BC%9A%E8%BF%9C%E7%A8%8B%E6%9C%8D%E5%8A%A1%E5%99%A8%E9%80%9A%E8%BF%87%E6%9C%AC%E6%9C%BA%E4%BB%A3%E7%90%86%E8%81%94%E7%BD%91/%E9%85%8D%E7%BD%AEMobaXterm-3.png" alt="配置MobaXterm-3"></p><h3 id="3-配置远端服务器"><a href="#3-配置远端服务器" class="headerlink" title="3. 配置远端服务器"></a>3. 配置远端服务器</h3><p>参考系统：<code>CentOS Linux release 7.6.1810</code></p><ul><li><p>临时配置</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 代理端口使用SSH tunnel中remote clients部分配置的forwarded port</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 设置环境变量</span></span><br><span class="line">export https_proxy=https://127.0.0.1:8888</span><br><span class="line">export http_proxy=http://127.0.0.1:8888</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 测试网络访问</span></span><br><span class="line">curl www.baidu.com</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> HTTP与HTTPS可正常访问，ping公网ip是不通的，正常yum安装满足需求</span></span><br></pre></td></tr></table></figure></li><li><p>永久配置</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">cat &gt;&gt; /etc/environment &lt;&lt; EOF</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 默认http访问均走如下代理</span></span><br><span class="line">http_proxy=&quot;http://127.0.0.1:8888&quot;</span><br><span class="line">https_proxy=&quot;https://127.0.0.1:8888&quot;</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 访问以下ip不经过代理</span></span><br><span class="line">no_proxy=&quot;localhost,127.0.0.1,10.*.*.*,111.111.*.*,172.*.*.*&quot;</span><br><span class="line"></span><br><span class="line">EOF</span><br></pre></td></tr></table></figure></li></ul><h2 id="常见问题"><a href="#常见问题" class="headerlink" title="常见问题"></a>常见问题</h2><h3 id="问题：代理突然连不上网"><a href="#问题：代理突然连不上网" class="headerlink" title="问题：代理突然连不上网"></a>问题：代理突然连不上网</h3><p>解决方法：</p><ol><li><p>远程服务器检查8888端口是否有异常状态的连接</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">netstat -tunlp | grep 8888</span><br></pre></td></tr></table></figure></li></ol><ol start="2"><li><p>正常状态输出如下</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tcp        0      0 127.0.0.1:8888          0.0.0.0:*               LISTEN      18860/sshd: boco4a</span><br></pre></td></tr></table></figure></li><li><p>异常状态会存在多个异常状态TCP连接（如TIME_WITE，CLOSE_WITE等）占用8888端口，使用<code>kill -9 &lt;pid&gt;</code>杀掉进程，重新建立SSH tunnel连接即可</p></li></ol><h2 id="参考文档"><a href="#参考文档" class="headerlink" title="参考文档"></a>参考文档</h2><p><a href="https://www.jianshu.com/p/75bf2dc43450">如何用fiddler进行代理设置</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;简介&quot;&gt;&lt;a href=&quot;#简介&quot; class=&quot;headerlink&quot; title=&quot;简介&quot;&gt;&lt;/a&gt;简介&lt;/h2&gt;&lt;p&gt;解决问题如下：&lt;/p&gt;
&lt;p&gt;线上服务器无法访问公网，申请公网访问流程过于复杂，部署环境又需要连接公网来安装包，可使用本方式配置代理联网。&lt;</summary>
      
    
    
    
    <category term="Linux" scheme="https://renyb2.github.io/categories/Linux/"/>
    
    
    <category term="Linux" scheme="https://renyb2.github.io/tags/Linux/"/>
    
    <category term="代理" scheme="https://renyb2.github.io/tags/%E4%BB%A3%E7%90%86/"/>
    
  </entry>
  
  <entry>
    <title>OpenStack使用：Windows镜像制作</title>
    <link href="https://renyb2.github.io/2020/11/09/OpenStack%E4%BD%BF%E7%94%A8%EF%BC%9AWindows%E9%95%9C%E5%83%8F%E5%88%B6%E4%BD%9C/"/>
    <id>https://renyb2.github.io/2020/11/09/OpenStack%E4%BD%BF%E7%94%A8%EF%BC%9AWindows%E9%95%9C%E5%83%8F%E5%88%B6%E4%BD%9C/</id>
    <published>2020-11-09T08:01:39.000Z</published>
    <updated>2020-12-16T07:44:16.719Z</updated>
    
    <content type="html"><![CDATA[<h2 id="资源下载地址"><a href="#资源下载地址" class="headerlink" title="资源下载地址"></a>资源下载地址</h2><ul><li>系统镜像：<a href="https://msdn.itellyou.cn/">https://msdn.itellyou.cn/</a></li><li>virtio：<a href="https://fedorapeople.org/groups/virt/virtio-win/direct-downloads/archive-virtio/">https://fedorapeople.org/groups/virt/virtio-win/direct-downloads/archive-virtio/</a></li></ul><p>PS：新版本的virtio需要下载iso文件，内部驱动全面</p><h2 id="制作镜像"><a href="#制作镜像" class="headerlink" title="制作镜像"></a>制作镜像</h2><h3 id="准备环境"><a href="#准备环境" class="headerlink" title="准备环境"></a>准备环境</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 安装包</span></span><br><span class="line">yum install qemu-kvm qemu-img –y</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 创建链接</span></span><br><span class="line">ln -sv /usr/libexec/qemu-kvm /usr/bin/</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 创建磁盘</span></span><br><span class="line">qemu-img create -f qcow2 cn_windows_server_2016_vl_x64_cloud_11636695.qcow2 15G</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 创建虚机</span></span><br><span class="line">qemu-kvm -m 1024 -cdrom cn_windows_server_2016_vl_x64_dvd_11636695.iso -drive file=cn_windows_server_2016_vl_x64_dvd_11636695.qcow2,if=virtio,boot=on -fda virtio-win_amd64.vfd -boot d -nographic -vnc :3</span><br></pre></td></tr></table></figure><h3 id="VNC连接虚机"><a href="#VNC连接虚机" class="headerlink" title="VNC连接虚机"></a>VNC连接虚机</h3><p>连接方式：<code>&lt;server ip&gt;:3</code></p><h3 id="系统安装"><a href="#系统安装" class="headerlink" title="系统安装"></a>系统安装</h3><h2 id="参考文档"><a href="#参考文档" class="headerlink" title="参考文档"></a>参考文档</h2><p><a href="https://www.cnblogs.com/tcicy/p/7790956.html">OpenStack kvm win7镜像制作</a></p><p><a href="https://blog.csdn.net/qq_20154221/article/details/51586537">制作OpenStack镜像win7.qcow2（centos/ubuntu/win镜像分享）</a></p><p><a href="https://blog.csdn.net/wylfengyujiancheng/article/details/50468173">制作OpenStack Windows Server 2012镜像</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;资源下载地址&quot;&gt;&lt;a href=&quot;#资源下载地址&quot; class=&quot;headerlink&quot; title=&quot;资源下载地址&quot;&gt;&lt;/a&gt;资源下载地址&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;系统镜像：&lt;a href=&quot;https://msdn.itellyou.cn/&quot;&gt;https:/</summary>
      
    
    
    
    <category term="OpenStack" scheme="https://renyb2.github.io/categories/OpenStack/"/>
    
    
    <category term="OpenStack使用" scheme="https://renyb2.github.io/tags/OpenStack%E4%BD%BF%E7%94%A8/"/>
    
    <category term="镜像制作" scheme="https://renyb2.github.io/tags/%E9%95%9C%E5%83%8F%E5%88%B6%E4%BD%9C/"/>
    
  </entry>
  
  <entry>
    <title>Linux配置：GNOME桌面</title>
    <link href="https://renyb2.github.io/2020/11/09/Linux%E9%85%8D%E7%BD%AE%EF%BC%9AGNOME%E6%A1%8C%E9%9D%A2/"/>
    <id>https://renyb2.github.io/2020/11/09/Linux%E9%85%8D%E7%BD%AE%EF%BC%9AGNOME%E6%A1%8C%E9%9D%A2/</id>
    <published>2020-11-09T07:34:24.000Z</published>
    <updated>2020-11-09T07:48:13.410Z</updated>
    
    <content type="html"><![CDATA[<h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><blockquote><p>GNOME是一种<a href="https://baike.baidu.com/item/GNU">GNU</a>网络对象模型环境 ，GNU计划的一部分，开放源码运动的一个重要组成部分，是一种让使用者容易操作和设定电脑环境的工具，目标是基于<a href="https://baike.baidu.com/item/%E8%87%AA%E7%94%B1%E8%BD%AF%E4%BB%B6">自由软件</a>，为<a href="https://baike.baidu.com/item/Unix">Unix</a>或者<a href="https://baike.baidu.com/item/%E7%B1%BBUnix">类Unix</a>操作系统构造一个功能完善、操作简单以及界面友好的<a href="https://baike.baidu.com/item/%E6%A1%8C%E9%9D%A2%E7%8E%AF%E5%A2%83">桌面环境</a>，是GNU计划的正式桌面。</p><p>GNOME可以运行在包括GNU/Linux(通常叫做<a href="https://baike.baidu.com/item/Linux">Linux</a>)，<a href="https://baike.baidu.com/item/Solaris">Solaris</a>，<a href="https://baike.baidu.com/item/HP-UX">HP-UX</a>，<a href="https://baike.baidu.com/item/BSD">BSD</a>和Apple’s Darwin系统上. GNOME 拥有很多强大的特性，如：高质量的平滑文本渲染， 首个国际化和可用性支持， 并且包括对反向文本的支持(注: 有些国家的文字是从右到左的排版的）。</p><p>GNOME运行在大多数类Unix系统，并被Sun Microsystems公司采纳为Solaris平台的标准桌面，取代了过时的<a href="https://baike.baidu.com/item/CDE">CDE</a>。Sun Microsystems公司也以Java Desktop System名义发布一个商业版的桌面：一个被SUSELinux系统使用的基于GNOME的桌面。GNOME也移植到Cygwin使其能运行于Microsoft Windows。GNOME 还被众多LiveCDLinux发行版使用，如<a href="https://baike.baidu.com/item/Gnoppix">Gnoppix</a>和Morphix。</p></blockquote><h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 列出可安装的桌面环境</span></span><br><span class="line">yum grouplist</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 查看安装的包有哪些内容</span></span><br><span class="line">yum group info  &quot;Graphical Administration Tools&quot;</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 安装GNOME及相应桌面管理工具</span></span><br><span class="line">yum -y groups install &quot;GNOME DESKTOP&quot; &quot;Graphical Administration Tools&quot;</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 查看当前默认启动模式</span></span><br><span class="line">systemctl get-default</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 设置默认启动图形化界面</span></span><br><span class="line">systemctl set-default graphical.target</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 设置默认启动命令行界面</span></span><br><span class="line">systemctl set-default multi-user.target</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 命令行界面热切换到图形界面</span></span><br><span class="line">init 5</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 图形界面热切换到命令行界面</span></span><br><span class="line">init 3</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 卸载GNOME</span></span><br><span class="line">yum -y groupremove &quot;GNOME DESKTOP&quot; &quot;Graphical Administration Tools&quot;</span><br></pre></td></tr></table></figure><h2 id="参考文档"><a href="#参考文档" class="headerlink" title="参考文档"></a>参考文档</h2><p><a href="https://www.cnblogs.com/gentsir/p/10300655.html">Centos 7 安装GNOME桌面环境</a></p><p><a href="https://blog.csdn.net/wqh0830/article/details/86701379">CentOS-7安装GNOME桌面</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;简介&quot;&gt;&lt;a href=&quot;#简介&quot; class=&quot;headerlink&quot; title=&quot;简介&quot;&gt;&lt;/a&gt;简介&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;GNOME是一种&lt;a href=&quot;https://baike.baidu.com/item/GNU&quot;&gt;GNU&lt;/a</summary>
      
    
    
    
    <category term="Linux" scheme="https://renyb2.github.io/categories/Linux/"/>
    
    
    <category term="Linux" scheme="https://renyb2.github.io/tags/Linux/"/>
    
    <category term="GNOME" scheme="https://renyb2.github.io/tags/GNOME/"/>
    
  </entry>
  
  <entry>
    <title>Linux配置：VNC Server</title>
    <link href="https://renyb2.github.io/2020/11/09/Linux%E9%85%8D%E7%BD%AE%EF%BC%9AVNC-Server/"/>
    <id>https://renyb2.github.io/2020/11/09/Linux%E9%85%8D%E7%BD%AE%EF%BC%9AVNC-Server/</id>
    <published>2020-11-09T06:57:15.000Z</published>
    <updated>2020-11-09T07:32:20.373Z</updated>
    
    <content type="html"><![CDATA[<h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><p><strong>VNC</strong> (Virtual Network Console)，即 <strong>虚拟网络控制台</strong>。它是一款优秀的远程控制工具软件，而且是基于 UNIX 和 Linux 操作系统的<strong>免费开源</strong>的。</p><blockquote><p><strong>1、优点</strong><br>远程控制能力强大，高效实用，其性能可以和 Windows 和 MAC 中的任何远程控制软件媲美</p></blockquote><blockquote><p><strong>2、VNC基本上是由两部分组成</strong></p><ul><li>一部分是客户端的应用程序(vncviewer)；</li><li>另外一部分是服务器端的应用程序(vncserver)；</li></ul></blockquote><blockquote><p><strong>3、特点</strong></p><ul><li>同样可以远程连入UNIX、Linux进行图形化操作的还有流行的Xmanager，VNC与之相比——两者工作原理不一样；</li><li><strong>VNC</strong> 是远程连入操作系统，所有操作在UNIX、Linux主机服务端进行，即使操作过程中“本地电脑与操作主机网络断开”，也不影响操作的顺利进行；</li><li><strong>Xmanager</strong> 是通过端口将主机服务器的UI界面引导到本地电脑进行展现，如操作过程出现“本地电脑与操作主机网络断开”，操作将中断失败！如果操作中进行的工作任务非常重要，不能中断，如ORACLE RAC实施，结果是灾难性的；</li><li>更重要的是，VNC是免费的、开源的，Xmanager收费的；</li></ul></blockquote><blockquote><p><strong>4、工作流程</strong></p><ul><li>（1）在服务器端启动 VNC Server。</li><li>（2）VNC客户端通过浏览器或 VNC Viewer 连接至VNC Server；</li><li>（3）VNC Server传送一对话窗口至客户端，要求输入连接密码， 以及存取的VNC Server显示装置。</li><li>（4）在客户端输入联机密码后，VNC Server验证客户端是否具有存取权限。</li><li>（5）若是客户端通过 VNC Server 的验证，客户端即要求VNC Server显示桌面环境。</li><li>（6）VNC Server通过X Protocol 要求X Server将画面显示控制权交由VNC Server负责。</li><li>（7）VNC Server将来由 X Server 的桌面环境利用VNC通信协议送至客户端， 并且允许客户端控制VNC Server的桌面环境及输入装置。</li></ul></blockquote><h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><h3 id="环境信息"><a href="#环境信息" class="headerlink" title="环境信息"></a>环境信息</h3><ul><li>系统：CentOS Linux release 7.7.1908 (Core)</li><li>VNC RPM ( rpm -qa | grep vnc )：<ul><li>tigervnc-icons-1.8.0-19.el7.noarch</li><li>tigervnc-server-1.8.0-19.el7.x86_64</li><li>gtk-vnc2-0.7.0-3.el7.x86_64</li><li>tigervnc-license-1.8.0-19.el7.noarch</li><li>gvnc-0.7.0-3.el7.x86_64</li><li>tigervnc-server-minimal-1.8.0-19.el7.x86_64</li><li>tigervnc-1.8.0-19.el7.x86_64</li></ul></li></ul><h3 id="VNC-服务端安装"><a href="#VNC-服务端安装" class="headerlink" title="VNC 服务端安装"></a>VNC 服务端安装</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 检查服务器是否安装了 VNC</span></span><br><span class="line">rpm -qa | grep vnc</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 安装VNC</span></span><br><span class="line">yum install tigervnc tigervnc-server -y</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 查看VNC Server模板配置文件</span></span><br><span class="line">cat /lib/systemd/system/vncserver@.service</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> Quick HowTo:</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 1. Copy this file to /etc/systemd/system/vncserver@.service</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 2. Replace &lt;USER&gt; with the actual user name and edit vncserver</span></span><br><span class="line"><span class="meta">#</span><span class="bash">    parameters <span class="keyword">in</span> the wrapper script located <span class="keyword">in</span> /usr/bin/vncserver_wrapper</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 3. Run `systemctl daemon-reload`</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 4. Run `systemctl <span class="built_in">enable</span> vncserver@:&lt;display&gt;.service`</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> </span></span><br><span class="line"><span class="meta">#</span><span class="bash"> &lt;USER&gt; 配置登录远程桌面的用户名</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> &lt;display&gt; 配置登录远程桌面的端口</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> VNC 的默认监听端口是 5900，监听端口规则为590+usernumber【如 1:root对应端口号5901】</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> cp vnc config</span></span><br><span class="line">cp /lib/systemd/system/vncserver@.service /etc/systemd/system/vncserver@.service</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> update config</span></span><br><span class="line">sed -i &#x27;s/&lt;USER&gt;/root/&#x27; /etc/systemd/system/vncserver@.service</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">set</span> vnc password</span></span><br><span class="line">vncpasswd</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> systemctl</span></span><br><span class="line">systemctl daemon-reload</span><br><span class="line">systemctl enable vncserver@:1.service</span><br><span class="line">systemctl start vncserver@:1.service</span><br><span class="line">systemctl status vncserver@:1.service</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> check port</span></span><br><span class="line">netstat -lantu | grep 5901</span><br></pre></td></tr></table></figure><h3 id="VNC-客户端安装"><a href="#VNC-客户端安装" class="headerlink" title="VNC 客户端安装"></a>VNC 客户端安装</h3><p>下载地址：<a href="https://www.realvnc.com/en/connect/download/viewer/">https://www.realvnc.com/en/connect/download/viewer/</a></p><p>VNC address：<code>&lt;ip&gt;:&lt;port&gt;</code></p><h2 id="参考文档"><a href="#参考文档" class="headerlink" title="参考文档"></a>参考文档</h2><p><a href="https://blog.csdn.net/llag_haveboy/article/details/84960479">Linux 上安装配置 VNC Server</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;简介&quot;&gt;&lt;a href=&quot;#简介&quot; class=&quot;headerlink&quot; title=&quot;简介&quot;&gt;&lt;/a&gt;简介&lt;/h2&gt;&lt;p&gt;&lt;strong&gt;VNC&lt;/strong&gt; (Virtual Network Console)，即 &lt;strong&gt;虚拟网络控制台&lt;/stro</summary>
      
    
    
    
    <category term="Linux" scheme="https://renyb2.github.io/categories/Linux/"/>
    
    
    <category term="Linux" scheme="https://renyb2.github.io/tags/Linux/"/>
    
    <category term="VNC" scheme="https://renyb2.github.io/tags/VNC/"/>
    
  </entry>
  
  <entry>
    <title>OpenStack部署：Kolla安装Octavia</title>
    <link href="https://renyb2.github.io/2020/11/07/OpenStack%E9%83%A8%E7%BD%B2%EF%BC%9AKolla%E5%AE%89%E8%A3%85Octavia/"/>
    <id>https://renyb2.github.io/2020/11/07/OpenStack%E9%83%A8%E7%BD%B2%EF%BC%9AKolla%E5%AE%89%E8%A3%85Octavia/</id>
    <published>2020-11-07T08:17:36.000Z</published>
    <updated>2020-12-16T07:44:02.525Z</updated>
    
    
    
    
    <category term="OpenStack" scheme="https://renyb2.github.io/categories/OpenStack/"/>
    
    
    <category term="Train版本" scheme="https://renyb2.github.io/tags/Train%E7%89%88%E6%9C%AC/"/>
    
    <category term="OpenStack部署" scheme="https://renyb2.github.io/tags/OpenStack%E9%83%A8%E7%BD%B2/"/>
    
  </entry>
  
  <entry>
    <title>OpenStack使用：自定义实例root密码</title>
    <link href="https://renyb2.github.io/2020/11/06/OpenStack%E4%BD%BF%E7%94%A8%EF%BC%9A%E8%87%AA%E5%AE%9A%E4%B9%89%E5%AE%9E%E4%BE%8Broot%E5%AF%86%E7%A0%81/"/>
    <id>https://renyb2.github.io/2020/11/06/OpenStack%E4%BD%BF%E7%94%A8%EF%BC%9A%E8%87%AA%E5%AE%9A%E4%B9%89%E5%AE%9E%E4%BE%8Broot%E5%AF%86%E7%A0%81/</id>
    <published>2020-11-06T08:37:26.000Z</published>
    <updated>2020-12-16T07:44:12.988Z</updated>
    
    <content type="html"><![CDATA[<h2 id="OpenStack安装信息"><a href="#OpenStack安装信息" class="headerlink" title="OpenStack安装信息"></a>OpenStack安装信息</h2><ul><li>安装工具：kolla ansible</li><li>安装版本：Train版</li><li>虚拟化层：qemu</li><li>Nova配置：默认配置，未做修改</li></ul><h2 id="官方镜像地址"><a href="#官方镜像地址" class="headerlink" title="官方镜像地址"></a>官方镜像地址</h2><ul><li>Cirros：<a href="https://download.cirros-cloud.net/">https://download.cirros-cloud.net/</a></li><li>Centos：<a href="http://cloud.centos.org/centos/">http://cloud.centos.org/centos/</a></li><li>Ubuntu：<a href="http://cloud-images.ubuntu.com/releases/">http://cloud-images.ubuntu.com/releases/</a></li></ul><h2 id="自定义root密码"><a href="#自定义root密码" class="headerlink" title="自定义root密码"></a>自定义root密码</h2><h3 id="方式一：通过Horizon修改"><a href="#方式一：通过Horizon修改" class="headerlink" title="方式一：通过Horizon修改"></a>方式一：通过Horizon修改</h3><blockquote><p>cirros镜像适用该方式，版本：cirros-0.4.0-x86_64-disk.img。<br>centos镜像不适用。版本：CentOS-7-x86_64-GenericCloud-2003.qcow2。</p></blockquote><p>创建实例时，在<code>配置项</code>填写<code>定制化脚本</code>，并勾选<code>配置驱动</code>（默认不勾选，不勾选会出现密码不生效的问题）</p><p>参考脚本如下：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/sh</span></span><br><span class="line">passwd root &lt;&lt; EOF</span><br><span class="line">1234qwer</span><br><span class="line">1234qwer</span><br><span class="line">EOF</span><br></pre></td></tr></table></figure><p><img src="/2020/11/06/OpenStack%E4%BD%BF%E7%94%A8%EF%BC%9A%E8%87%AA%E5%AE%9A%E4%B9%89%E5%AE%9E%E4%BE%8Broot%E5%AF%86%E7%A0%81/Horizon%E4%BF%AE%E6%94%B9root%E5%AF%86%E7%A0%81.png" alt="Horizon修改root密码"></p><h3 id="方式二：后端修改"><a href="#方式二：后端修改" class="headerlink" title="方式二：后端修改"></a>方式二：后端修改</h3><blockquote><p><strong>镜像内部需要安装：qemu-guest-agent</strong></p><table><thead><tr><th>组件</th><th>版本</th><th>位置</th></tr></thead><tbody><tr><td>libvirt</td><td>1.2.16+</td><td>宿主机</td></tr><tr><td>python-libvirt</td><td>1.2.16+</td><td>宿主机</td></tr><tr><td>qemu-guest-agent</td><td>2.3+</td><td>虚机内部</td></tr></tbody></table><p>cirros镜像不适用该方式，版本：cirros-0.4.0-x86_64-disk.img。<br>centos镜像适用。版本：CentOS-7-x86_64-GenericCloud-2003.qcow2。</p></blockquote><h4 id="步骤1：修改image元数据"><a href="#步骤1：修改image元数据" class="headerlink" title="步骤1：修改image元数据"></a>步骤1：修改image元数据</h4><h5 id="方式1：前端修改"><a href="#方式1：前端修改" class="headerlink" title="方式1：前端修改"></a>方式1：前端修改</h5><p>编辑镜像，在<code>元数据</code> - <code>libvirt Driver Options for Images</code> - <code>QEMU Guest Agent</code>，设置为<code>yes</code>即可</p><p><img src="/2020/11/06/OpenStack%E4%BD%BF%E7%94%A8%EF%BC%9A%E8%87%AA%E5%AE%9A%E4%B9%89%E5%AE%9E%E4%BE%8Broot%E5%AF%86%E7%A0%81/Horizon%E8%AE%BE%E7%BD%AEimage%E5%85%83%E6%95%B0%E6%8D%AE.png" alt="Horizon设置image元数据"></p><h5 id="方式2：后端修改"><a href="#方式2：后端修改" class="headerlink" title="方式2：后端修改"></a>方式2：后端修改</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 增加image元数据信息</span></span><br><span class="line">openstack image list</span><br><span class="line">openstack image set &lt;image id or name&gt; --property hw_qemu_guest_agent=yes</span><br></pre></td></tr></table></figure><p><img src="/2020/11/06/OpenStack%E4%BD%BF%E7%94%A8%EF%BC%9A%E8%87%AA%E5%AE%9A%E4%B9%89%E5%AE%9E%E4%BE%8Broot%E5%AF%86%E7%A0%81/image%E4%BF%A1%E6%81%AF.png" alt="image信息"></p><p>不设置该参数，修改密码时会报<code>QEMU guest agent is not enabled (HTTP 409)</code>，错误如下：</p><p><img src="/2020/11/06/OpenStack%E4%BD%BF%E7%94%A8%EF%BC%9A%E8%87%AA%E5%AE%9A%E4%B9%89%E5%AE%9E%E4%BE%8Broot%E5%AF%86%E7%A0%81/%E4%BF%AE%E6%94%B9root%E5%AF%86%E7%A0%81409.png" alt="修改root密码409"></p><h4 id="步骤2：使用更新后的镜像创建虚机"><a href="#步骤2：使用更新后的镜像创建虚机" class="headerlink" title="步骤2：使用更新后的镜像创建虚机"></a>步骤2：使用更新后的镜像创建虚机</h4><h4 id="步骤3：后端修改虚机密码"><a href="#步骤3：后端修改虚机密码" class="headerlink" title="步骤3：后端修改虚机密码"></a>步骤3：后端修改虚机密码</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">openstack server list</span><br><span class="line">openstack server set --root-password &lt;server id or name&gt;</span><br></pre></td></tr></table></figure><h2 id="参考文档"><a href="#参考文档" class="headerlink" title="参考文档"></a>参考文档</h2><p><a href="https://docs.openstack.org/image-guide/">OpenStack Virtual Machine Image Guide</a></p><p><a href="https://blog.51cto.com/11954248/2503692">OpenStack Train版操作笔记（14）—使用官方云镜像启动实例并命令行修改root密码</a></p><p><a href="https://blog.csdn.net/zhongbeida_xue/article/details/80417019">openstack虚拟机系统密码的修改方案</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;OpenStack安装信息&quot;&gt;&lt;a href=&quot;#OpenStack安装信息&quot; class=&quot;headerlink&quot; title=&quot;OpenStack安装信息&quot;&gt;&lt;/a&gt;OpenStack安装信息&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;安装工具：kolla ansible&lt;/</summary>
      
    
    
    
    <category term="OpenStack" scheme="https://renyb2.github.io/categories/OpenStack/"/>
    
    
    <category term="OpenStack使用" scheme="https://renyb2.github.io/tags/OpenStack%E4%BD%BF%E7%94%A8/"/>
    
    <category term="Train版本" scheme="https://renyb2.github.io/tags/Train%E7%89%88%E6%9C%AC/"/>
    
  </entry>
  
  <entry>
    <title>Docker 入门</title>
    <link href="https://renyb2.github.io/2020/11/05/Docker-%E5%85%A5%E9%97%A8/"/>
    <id>https://renyb2.github.io/2020/11/05/Docker-%E5%85%A5%E9%97%A8/</id>
    <published>2020-11-05T00:54:13.000Z</published>
    <updated>2020-12-16T01:35:42.026Z</updated>
    
    <content type="html"><![CDATA[<h2 id="常用命令"><a href="#常用命令" class="headerlink" title="常用命令"></a>常用命令</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 调整docker <span class="built_in">exec</span>终端高度和宽度</span></span><br><span class="line">docker exec -it --env COLUMNS=`tput cols` --env LINES=`tput lines` mariadb bash</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 重命名镜像repository和tag</span></span><br><span class="line">docker tag &lt;image id&gt; &lt;new repository&gt;:&lt;new tag&gt;</span><br></pre></td></tr></table></figure><h2 id="参考文档"><a href="#参考文档" class="headerlink" title="参考文档"></a>参考文档</h2><p><a href="https://github.com/moby/moby/issues/35407">Docker Exec does not resize terminal</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;常用命令&quot;&gt;&lt;a href=&quot;#常用命令&quot; class=&quot;headerlink&quot; title=&quot;常用命令&quot;&gt;&lt;/a&gt;常用命令&lt;/h2&gt;&lt;figure class=&quot;highlight shell&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pr</summary>
      
    
    
    
    <category term="Docker" scheme="https://renyb2.github.io/categories/Docker/"/>
    
    
    <category term="Docker" scheme="https://renyb2.github.io/tags/Docker/"/>
    
  </entry>
  
  <entry>
    <title>Git</title>
    <link href="https://renyb2.github.io/2020/10/28/Git/"/>
    <id>https://renyb2.github.io/2020/10/28/Git/</id>
    <published>2020-10-28T03:44:50.000Z</published>
    <updated>2020-12-12T07:49:50.284Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Git基本操作"><a href="#Git基本操作" class="headerlink" title="Git基本操作"></a>Git基本操作</h2><p>Git 常用的是以下 6 个命令：<strong>git clone</strong>、<strong>git push</strong>、<strong>git add</strong> 、<strong>git commit</strong>、<strong>git checkout</strong>、<strong>git pull</strong></p><p><img src="/2020/10/28/Git/git-command.jpg" alt="Git"></p><p><strong>说明：</strong></p><ul><li>workspace：工作区</li><li>staging area：暂存区/缓存区</li><li>local repository：或本地仓库</li><li>remote repository：远程仓库</li></ul><h2 id="Git常用流程"><a href="#Git常用流程" class="headerlink" title="Git常用流程"></a>Git常用流程</h2><h3 id="远端master分支代码合并到自己分支"><a href="#远端master分支代码合并到自己分支" class="headerlink" title="远端master分支代码合并到自己分支"></a>远端master分支代码合并到自己分支</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 备份当前修改</span></span><br><span class="line">git stash</span><br><span class="line"></span><br><span class="line"><span class="comment"># 切换至本地master分支</span></span><br><span class="line">git checkout master</span><br><span class="line"></span><br><span class="line"><span class="comment"># 拉取远端master分支代码</span></span><br><span class="line">git pull</span><br><span class="line"></span><br><span class="line"><span class="comment"># 切换至本地dev分支</span></span><br><span class="line">git checkout renyb_dev</span><br><span class="line"></span><br><span class="line"><span class="comment"># 合并master分支至dev分支</span></span><br><span class="line">git merge master</span><br><span class="line"></span><br><span class="line"><span class="comment"># 恢复备份中的修改</span></span><br><span class="line">git stash pop</span><br><span class="line"></span><br><span class="line"><span class="comment"># 命令用途</span></span><br><span class="line"><span class="comment"># git stash：备份当前的工作区的内容，从最近的一次提交中读取相关内容，让工作区保证和上次提交的内容一致。同时，将当前的工作区内容保存到Git栈中。</span></span><br><span class="line"><span class="comment"># </span></span><br><span class="line"><span class="comment"># git stash pop: 从Git栈中读取最近一次保存的内容，恢复工作区的相关内容。由于可能存在多个Stash的内容，所以用栈来管理，pop会从最近的一个stash中读取内容并恢复。</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># git stash list: 显示Git栈内的所有备份，可以利用这个列表来决定从那个地方恢复。</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># git stash clear: 清空Git栈。此时使用gitg等图形化工具会发现，原来stash的哪些节点都消失了。</span></span><br></pre></td></tr></table></figure><h2 id="Git命令"><a href="#Git命令" class="headerlink" title="Git命令"></a>Git命令</h2><h3 id="创建仓库"><a href="#创建仓库" class="headerlink" title="创建仓库"></a>创建仓库</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 初始化仓库</span></span><br><span class="line">git init</span><br><span class="line"></span><br><span class="line"><span class="comment"># 克隆仓库（下载项目）</span></span><br><span class="line">git <span class="built_in">clone</span> &lt;repo&gt;</span><br></pre></td></tr></table></figure><h3 id="提交与修改"><a href="#提交与修改" class="headerlink" title="提交与修改"></a>提交与修改</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 添加文件到仓库</span></span><br><span class="line">git add &lt;file or dir&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看仓库当前的状态，显示有变更的文件</span></span><br><span class="line">git status</span><br><span class="line"></span><br><span class="line"><span class="comment"># 提交暂存区到本地仓库中</span></span><br><span class="line">git commit -m &lt;message&gt;</span><br></pre></td></tr></table></figure><h3 id="远程操作"><a href="#远程操作" class="headerlink" title="远程操作"></a>远程操作</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 从远程获取代码库</span></span><br><span class="line">git fetch</span><br><span class="line"></span><br><span class="line"><span class="comment"># 下载远程代码并合并</span></span><br><span class="line">git pull</span><br><span class="line"></span><br><span class="line"><span class="comment"># 上传远程代码并合并</span></span><br><span class="line">git push</span><br></pre></td></tr></table></figure><h3 id="分支管理"><a href="#分支管理" class="headerlink" title="分支管理"></a>分支管理</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查看所有分支</span></span><br><span class="line">git branch -a</span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建分支</span></span><br><span class="line">git branch &lt;name&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 切换分支</span></span><br><span class="line">git checkout &lt;branch name&gt;</span><br></pre></td></tr></table></figure><h3 id="提交日志"><a href="#提交日志" class="headerlink" title="提交日志"></a>提交日志</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查看历史提交记录</span></span><br><span class="line">git <span class="built_in">log</span></span><br></pre></td></tr></table></figure><h2 id="参考文档"><a href="#参考文档" class="headerlink" title="参考文档"></a>参考文档</h2><p><a href="https://git-scm.com/book/zh/v2">Git官方文档</a></p><p><a href="https://www.runoob.com/git/git-tutorial.html">Git 菜鸟教程</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;Git基本操作&quot;&gt;&lt;a href=&quot;#Git基本操作&quot; class=&quot;headerlink&quot; title=&quot;Git基本操作&quot;&gt;&lt;/a&gt;Git基本操作&lt;/h2&gt;&lt;p&gt;Git 常用的是以下 6 个命令：&lt;strong&gt;git clone&lt;/strong&gt;、&lt;stron</summary>
      
    
    
    
    <category term="Git" scheme="https://renyb2.github.io/categories/Git/"/>
    
    
    <category term="Git" scheme="https://renyb2.github.io/tags/Git/"/>
    
  </entry>
  
  <entry>
    <title>Jmeter</title>
    <link href="https://renyb2.github.io/2020/09/23/Jmeter/"/>
    <id>https://renyb2.github.io/2020/09/23/Jmeter/</id>
    <published>2020-09-23T07:32:06.000Z</published>
    <updated>2020-09-24T07:58:29.865Z</updated>
    
    <content type="html"><![CDATA[<p>The <strong>Apache JMeter™</strong> application is open source software, a 100% pure Java application designed to load test functional behavior and measure performance. It was originally designed for testing Web Applications but has since expanded to other test functions.</p><h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><p>下载地址：<a href="http://apache.mirrors.pair.com//jmeter/binaries/apache-jmeter-5.3.zip">http://apache.mirrors.pair.com//jmeter/binaries/apache-jmeter-5.3.zip</a></p><h3 id="Windows部署"><a href="#Windows部署" class="headerlink" title="Windows部署"></a>Windows部署</h3><h4 id="Java环境"><a href="#Java环境" class="headerlink" title="Java环境"></a>Java环境</h4><p>版本：jdk-8u131-windows-i586（链接：<a href="https://pan.baidu.com/s/1bBvyYNtrrzJTpFN9z0fnpg">https://pan.baidu.com/s/1bBvyYNtrrzJTpFN9z0fnpg</a> 提取码：4ztk）</p><p>系统环境变量：</p><ul><li>JAVA_HOME：C:\Program Files (x86)\Java\jdk1.8.0_131</li><li>CLASSPATH：.;%JAVA_HOME%\bin;%JAVA_HOME%\lib\dt.jar%JAVA_HOME%\lib\tools.jar;</li><li>PATH：新增两行，%JAVA_HOME%\bin，%JAVA_HOME%\jre\lib</li></ul><h4 id="Jmeter"><a href="#Jmeter" class="headerlink" title="Jmeter"></a>Jmeter</h4><p>开箱即用。可执行文件：<code>.\bin\jmeter.bat</code></p><h3 id="Linux部署"><a href="#Linux部署" class="headerlink" title="Linux部署"></a>Linux部署</h3><h4 id="Java环境-1"><a href="#Java环境-1" class="headerlink" title="Java环境"></a>Java环境</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install -y java-1.8.0-openjdk</span><br></pre></td></tr></table></figure><h4 id="Jmeter-1"><a href="#Jmeter-1" class="headerlink" title="Jmeter"></a>Jmeter</h4><p>环境变量<code>/etc/profile</code>增加如下内容：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">export JMETER_HOME=/root/jmeter</span><br><span class="line">export CLASSPATH=$JMETER_HOME/lib/ext/ApacheJMeter_core.jar:$JMETER_HOME/lib/jorphan.jar:$CLASSPATH</span><br><span class="line">export PATH=$JMETER_HOME/bin:$PATH:$HOME/bin</span><br></pre></td></tr></table></figure><p>环境变量配置生效：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">source /etc/profile</span><br></pre></td></tr></table></figure><p>验证：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">jmeter --version</span><br></pre></td></tr></table></figure><h2 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h2><p><strong>思路：</strong>通过Windows图形界面生成配置文件，上传至服务器进行压测</p><h3 id="http-https-性能测试"><a href="#http-https-性能测试" class="headerlink" title="http/https 性能测试"></a>http/https 性能测试</h3><h4 id="1-添加线程组"><a href="#1-添加线程组" class="headerlink" title="1. 添加线程组"></a>1. 添加线程组</h4><p>Test Plan中添加<code>Thread Group</code></p><p>总请求量 = 并发用户数 * 循环轮次</p><ul><li><p><code>Number of Threads (users)</code>：设置并发用户数</p></li><li><p><code>Loop Count</code>：设置循环轮次</p></li><li><p><code>Ramp-up period (seconds)</code>：设置压力启动时间（从开始到最大压力之间的时间）</p></li></ul><p><img src="/2020/09/23/Jmeter/jmeter-1.png" alt="jmeter-1"></p><p><img src="/2020/09/23/Jmeter/jmeter-2.png" alt="jmeter-2"></p><h4 id="2-设置http-https请求"><a href="#2-设置http-https请求" class="headerlink" title="2. 设置http/https请求"></a>2. 设置http/https请求</h4><p>Thread Group中添加<code>HTTP Request</code>，填写http/https请求的配置</p><p><img src="/2020/09/23/Jmeter/jmeter-3.png" alt="jmeter-3"></p><p><img src="/2020/09/23/Jmeter/jmeter-4.png" alt="jmeter-4"></p><h4 id="3-添加统计分析功能"><a href="#3-添加统计分析功能" class="headerlink" title="3. 添加统计分析功能"></a>3. 添加统计分析功能</h4><p>通常，添加如下两个统计分析功能：</p><ul><li>Summary Report</li><li>jp@gc - Transactions Per Second（需要单独安装，安装流程见插件 - QPS统计）</li></ul><p><img src="/2020/09/23/Jmeter/jmeter-5.png" alt="jmeter-5"></p><h4 id="4-导出配置"><a href="#4-导出配置" class="headerlink" title="4. 导出配置"></a>4. 导出配置</h4><p>保存jmx文件，上传至压力服务器。</p><h4 id="5-压力执行"><a href="#5-压力执行" class="headerlink" title="5. 压力执行"></a>5. 压力执行</h4><p>linux运行，生成结果文件至<code>test.jtl</code></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">jmeter -n -t vm.jmx -l test.jtl</span><br></pre></td></tr></table></figure><h4 id="6-查看性能测试结果"><a href="#6-查看性能测试结果" class="headerlink" title="6. 查看性能测试结果"></a>6. 查看性能测试结果</h4><p>下载<code>test.jtl</code>，在Windows Jmeter的统计分析功能中打开查看。</p><p><img src="/2020/09/23/Jmeter/jmeter-6.png" alt="jmeter-6"></p><p><img src="/2020/09/23/Jmeter/jmeter-7.png" alt="jmeter-7"></p><h2 id="插件"><a href="#插件" class="headerlink" title="插件"></a>插件</h2><p><strong>Jmeter插件官网：</strong><a href="https://jmeter-plugins.org/wiki/Start/">https://jmeter-plugins.org/wiki/Start/</a></p><h3 id="QPS统计"><a href="#QPS统计" class="headerlink" title="QPS统计"></a>QPS统计</h3><p>下载地址：<a href="https://jmeter-plugins.org/files/packages/jpgc-graphs-basic-2.0.zip">https://jmeter-plugins.org/files/packages/jpgc-graphs-basic-2.0.zip</a></p><p>解压后，移动压缩包内lib目录下的文件至Jmeter\lib目录下同位置即可，重启Jmeter。</p><p><img src="/2020/09/23/Jmeter/jmeter-8.png" alt="jmeter-8"></p><h2 id="参考文档"><a href="#参考文档" class="headerlink" title="参考文档"></a>参考文档</h2><p><a href="https://jmeter.apache.org/">Jmeter官方网站</a></p><p><a href="https://jmeter-plugins.org/wiki/Start/">Jmeter官方插件</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;The &lt;strong&gt;Apache JMeter™&lt;/strong&gt; application is open source software, a 100% pure Java application designed to load test functional be</summary>
      
    
    
    
    <category term="性能测试工具" scheme="https://renyb2.github.io/categories/%E6%80%A7%E8%83%BD%E6%B5%8B%E8%AF%95%E5%B7%A5%E5%85%B7/"/>
    
    
    <category term="Jmeter" scheme="https://renyb2.github.io/tags/Jmeter/"/>
    
  </entry>
  
  <entry>
    <title>Oracle Performance Test：SwingBench</title>
    <link href="https://renyb2.github.io/2020/09/18/SwingBench/"/>
    <id>https://renyb2.github.io/2020/09/18/SwingBench/</id>
    <published>2020-09-18T03:09:09.000Z</published>
    <updated>2020-09-18T07:59:19.341Z</updated>
    
    <content type="html"><![CDATA[<h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><p>SwingBench是Oracle UK的一个员工在一个被抛弃的项目的基础上开发的。目前稳定版本2.6，基于JDK。该工具是免费的，可以在作者的网站上自由下载，并且拥有详细的使用文档。Swingbench 可以执行4种不同的标准测试(benchmark)，拥有三种前端展示方式Swingbench/Charbench/Minibench，其中 Charbench是字符模式的，另外两种是GUI模式的。另外还可以通过ClusterOverview可以聚合显示所有的结果。Swingbench 的开发目的主要是用来展示RAC的负载和测试，但也可用于单实例环境。2.3版本开始支持TimesTen。</p><blockquote><p>SwingBench consists of a load generator, a coordinator and a cluster overview. The software enables a load to be generated and the transactions/response times to be charted.</p><p>Swingbench can be used to demonstrate and test technologies such as Real Application Clusters, Online table rebuilds, Standby databases, Online backup and recovery etc.</p><p>The code that ships with SwingBench includes 6 benchmarks, OrderEntry, SalesHistory, TPC-DS Like, JSON, CallingCircle and StressTest..</p><ul><li>OrderEntry is based on the “oe” schema that ships with Oracle 12c/Oracle 18c/Oracle 19c. It has been modified so that Spatial, Intermedia schema’s do not need to be installed. It can be run continuously (that is until you run out of space). It introduces heavy contention on a small number of tables and is designed to stress interconnects and memory. It is installed using the “oewizard” located in the bin directory. Both a pure jdbc and pl/sql (lower network overhead) variant exist of the benchmark.</li><li>SalesHistory is based on the “sh” schema that ships with Oracle 12c/Oracle 18c/Oracle 19c and is designed to test the performance of complicated queries when run against large tables. It is read only and can be scaled over a number of default sizes from 1GB to 1TB. A custom mode also allows for the creation of smaller and larger schemas</li><li>CallingCircle (deprecated) simulates the SQL that is generated for an online telco application. It requires data files to be generated and copied from the database server to the load generator before each run, it typically requires between 1 and 8 GB of disk space. Both benchmarks are heavily CPU intensive. Experience has shown that you require at least 1 processor of load generator to every 2 processors of database server. It is designed to stress the CPU and memory without the need for a powerful I/O subsystem. Its is installed using the “ccwizard” located in the bin directory</li><li>StressTest simply fires random inserts,updates,selects and updates against a well know table.</li><li>JSON Stresstest is based on simple JSON documents modelling people flying between airports. It follow a basic CRUD model</li><li>TPC-DS Like Benchmark is a benchmark similar to TPC-DS. It features both a query and transaction workload in separate configuration files.</li></ul><p>The entire framework is developed in Java and as a result can be run on wide variety of platforms. It also provides a simple API to allow developers to build their own benchmarks.</p></blockquote><h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><h3 id="安装环境"><a href="#安装环境" class="headerlink" title="安装环境"></a>安装环境</h3><p>系统：win10虚机</p><p>配置：4c8g，500G硬盘</p><h3 id="安装包下载"><a href="#安装包下载" class="headerlink" title="安装包下载"></a>安装包下载</h3><p>官方下载地址：<a href="http://www.dominicgiles.com/downloads.html">http://www.dominicgiles.com/downloads.html</a></p><h3 id="安装流程"><a href="#安装流程" class="headerlink" title="安装流程"></a>安装流程</h3><h4 id="安装JDK-1-8"><a href="#安装JDK-1-8" class="headerlink" title="安装JDK 1.8"></a>安装JDK 1.8</h4><p>版本：jdk-8u131-windows-i586（链接：<a href="https://pan.baidu.com/s/1bBvyYNtrrzJTpFN9z0fnpg">https://pan.baidu.com/s/1bBvyYNtrrzJTpFN9z0fnpg</a> 提取码：4ztk）</p><p>系统环境变量：</p><ul><li>JAVA_HOME：C:\Program Files (x86)\Java\jdk1.8.0_131</li><li>CLASSPATH：.;%JAVA_HOME%\bin;%JAVA_HOME%\lib\dt.jar%JAVA_HOME%\lib\tools.jar;</li><li>PATH：新增两行，%JAVA_HOME%\bin，%JAVA_HOME%\jre\lib</li></ul><h4 id="安装SwingBench"><a href="#安装SwingBench" class="headerlink" title="安装SwingBench"></a>安装SwingBench</h4><p>Swingbench压缩包下载完，解压即可使用。</p><h2 id="Oewizard加载数据"><a href="#Oewizard加载数据" class="headerlink" title="Oewizard加载数据"></a>Oewizard加载数据</h2><h3 id="运行Oewizard"><a href="#运行Oewizard" class="headerlink" title="运行Oewizard"></a>运行Oewizard</h3><p>进入<code>.\swingbench\winbin</code>目录下，双击运行<code>oewizard.bat</code>。</p><blockquote><p>实验时，出现双击后无响应的情况，在cmd中运行<code>oewizard.bat</code>文件，报错如下：<br>Error occurred during initialization of VM<br>Could not reserve enough space for 2097152KB object heap</p><p>解决方式：系统环境变量中添加如下变量<br>变量名：<code>JAVA_TOOL_OPTIONS</code>    变量值：<code>-Xms1024m</code><br>变量名：<code>_JAVA_OPTIONS</code>    变量值：<code>-Xmx1024m</code></p></blockquote><p><img src="/2020/09/18/SwingBench/oewizard-1.png" alt="oewizard-1"></p><h3 id="Benchmark-Version"><a href="#Benchmark-Version" class="headerlink" title="Benchmark Version"></a>Benchmark Version</h3><p>选择默认选项，version 2.0</p><p><img src="/2020/09/18/SwingBench/oewizard-2.png" alt="oewizard-2"></p><h3 id="Task"><a href="#Task" class="headerlink" title="Task"></a>Task</h3><p>选择默认选项，Create the Order Entry Schema (User, Table, indexes, Data etc)</p><p><img src="/2020/09/18/SwingBench/oewizard-3.png" alt="oewizard-3"></p><h3 id="Database-Details"><a href="#Database-Details" class="headerlink" title="Database Details"></a>Database Details</h3><p>填写Oracle数据库的连接信息</p><ul><li><p>Connect String：格式为<code>ip[：port][：service name]</code>，eg：<code>10.121.9.104:49161</code></p></li><li><p>Connection Type：使用默认选项，<code>Type IV jdbc driver (Thin)</code></p></li><li><p>Administrator Username：<code>sys as sysdba</code></p></li><li><p>Administrator Password：使用sys的密码，如果未设置，可在oracle中使用如下命令设置</p></li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">alter</span> <span class="keyword">user</span> <span class="keyword">sys</span> <span class="keyword">identified</span> <span class="keyword">by</span> <span class="string">&quot;&lt;new password&gt;&quot;</span>;</span><br></pre></td></tr></table></figure><p><img src="/2020/09/18/SwingBench/oewizard-4.png" alt="oewizard-4"></p><h3 id="Schema-Details"><a href="#Schema-Details" class="headerlink" title="Schema Details"></a>Schema Details</h3><ul><li><p>Username：<code>sys as sysdba</code></p></li><li><p>Password：sys的密码</p></li><li><p>Schema’s Tablespace：使用的是SYSTEM</p></li><li><p>Tablespaces’s Datafile：自动生成</p></li></ul><p><img src="/2020/09/18/SwingBench/oewizard-5.png" alt="oewizard-5"></p><h3 id="Database-Options"><a href="#Database-Options" class="headerlink" title="Database Options"></a>Database Options</h3><p>全使用默认选项，直接下一步</p><ul><li><p>Partitioning Model：<code>No Partitioning</code></p></li><li><p>Compression Used：<code>No Compression</code></p></li><li><p>Tablespace Type：<code>Bigfile Tablespace</code></p></li><li><p>Indexing Used：<code>All Indexes</code></p></li></ul><p><img src="/2020/09/18/SwingBench/oewizard-6.png" alt="oewizard-6"></p><h3 id="Sizing-Details"><a href="#Sizing-Details" class="headerlink" title="Sizing Details"></a>Sizing Details</h3><p>加载的测试数据大小，根据需求选择。实验选择的最小数据量1GB，点击下一步</p><p><img src="/2020/09/18/SwingBench/oewizard-7.png" alt="oewizard-7"></p><h3 id="ALL-Details-Entered"><a href="#ALL-Details-Entered" class="headerlink" title="ALL Details Entered"></a>ALL Details Entered</h3><p>Level of Parallelism：设置导入时的并发，只影响数据导入速度，默认为4</p><p><img src="/2020/09/18/SwingBench/oewizard-8.png" alt="oewizard-8"></p><h3 id="加载数据"><a href="#加载数据" class="headerlink" title="加载数据"></a>加载数据</h3><p><img src="/2020/09/18/SwingBench/Swingbench%E5%8A%A0%E8%BD%BD%E6%B5%8B%E8%AF%95%E6%95%B0%E6%8D%AE.png" alt="Swingbench加载测试数据"></p><p><img src="/2020/09/18/SwingBench/Swingbench%E5%8A%A0%E8%BD%BD%E6%B5%8B%E8%AF%95%E6%95%B0%E6%8D%AE%EF%BC%88%E5%AE%8C%E6%88%90%EF%BC%89.png" alt="Swingbench加载测试数据（完成）"></p><h2 id="SwingBench性能测试"><a href="#SwingBench性能测试" class="headerlink" title="SwingBench性能测试"></a>SwingBench性能测试</h2><h3 id="开启SwingBench"><a href="#开启SwingBench" class="headerlink" title="开启SwingBench"></a>开启SwingBench</h3><p>进入<code>.\swingbench\winbin</code>目录下，双击运行<code>swingbench.bat</code>。界面功能区分布如下：</p><p><img src="/2020/09/18/SwingBench/swingbench-1.png" alt="swingbench-1"></p><h3 id="User-Details"><a href="#User-Details" class="headerlink" title="User Details"></a>User Details</h3><p>设置Oracle数据库的连接信息。<code>注意：必须使用sysdba用户，普通用户获取不到数据库的性能数据</code></p><ul><li>Username：<code>sys as sysdba</code></li><li>Password：sys的密码</li><li>Connect String：格式为<code>ip[：port][：service name]</code>，eg：<code>10.121.9.104:49161</code></li><li>Driver Type：使用默认选项，<code>Oracle jdbc Driver</code></li></ul><p>填写完成后，进行连接测试，提示如下则表明连接正常</p><p><img src="/2020/09/18/SwingBench/swingbench-4.png" alt="swingbench-4"></p><h3 id="Load"><a href="#Load" class="headerlink" title="Load"></a>Load</h3><p>设置压力参数</p><ul><li>Number of Users：并发数，默认为4</li><li>Benchmark Run Time (hh:min)：运行时长</li></ul><h3 id="Server-Monitoring（ssh）"><a href="#Server-Monitoring（ssh）" class="headerlink" title="Server Monitoring（ssh）"></a>Server Monitoring（ssh）</h3><p>设置Oracle主机的ssh信息，SwingBench会ssh到主机，获取监控信息</p><p><img src="/2020/09/18/SwingBench/swingbench-2.png" alt="swingbench-2"></p><h3 id="Oracle-AWR静态分析"><a href="#Oracle-AWR静态分析" class="headerlink" title="Oracle AWR静态分析"></a>Oracle AWR静态分析</h3><ul><li>勾选Connect database statistics</li><li>勾选Take AWR Snapshots at Start and End</li><li>Admin Username：<code>sys as sysdba</code></li><li>Admin Password：sys的密码</li></ul><h3 id="性能图表"><a href="#性能图表" class="headerlink" title="性能图表"></a>性能图表</h3><p>支持的图表如下</p><p><img src="/2020/09/18/SwingBench/swingbench-5.png" alt="swingbench-5"></p><h3 id="运行SwingBench"><a href="#运行SwingBench" class="headerlink" title="运行SwingBench"></a>运行SwingBench</h3><p><img src="/2020/09/18/SwingBench/swingbench-3.png" alt="swingbench-3"></p><h2 id="参考文档"><a href="#参考文档" class="headerlink" title="参考文档"></a>参考文档</h2><p><a href="http://www.dominicgiles.com/simplebenchmark.html">SwingBench官方文档</a></p><p><a href="https://www.cnblogs.com/liangqihui/p/7193956.html">如何使用swingbench进行oracle数据库压力测试</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;简介&quot;&gt;&lt;a href=&quot;#简介&quot; class=&quot;headerlink&quot; title=&quot;简介&quot;&gt;&lt;/a&gt;简介&lt;/h2&gt;&lt;p&gt;SwingBench是Oracle UK的一个员工在一个被抛弃的项目的基础上开发的。目前稳定版本2.6，基于JDK。该工具是免费的，可以在作</summary>
      
    
    
    
    <category term="Oracle" scheme="https://renyb2.github.io/categories/Oracle/"/>
    
    
    <category term="性能测试" scheme="https://renyb2.github.io/tags/%E6%80%A7%E8%83%BD%E6%B5%8B%E8%AF%95/"/>
    
  </entry>
  
  <entry>
    <title>TiDB 安装文档</title>
    <link href="https://renyb2.github.io/2020/09/16/TiDB-%E5%AE%89%E8%A3%85%E6%96%87%E6%A1%A3/"/>
    <id>https://renyb2.github.io/2020/09/16/TiDB-%E5%AE%89%E8%A3%85%E6%96%87%E6%A1%A3/</id>
    <published>2020-09-16T02:29:50.000Z</published>
    <updated>2020-09-16T07:44:22.983Z</updated>
    
    <content type="html"><![CDATA[<p>官方文档：<a href="https://docs.pingcap.com/zh/tidb/stable/production-deployment-using-tiup">https://docs.pingcap.com/zh/tidb/stable/production-deployment-using-tiup</a></p><h2 id="使用-TiUP-部署-TiDB-集群"><a href="#使用-TiUP-部署-TiDB-集群" class="headerlink" title="使用 TiUP 部署 TiDB 集群"></a>使用 TiUP 部署 TiDB 集群</h2><p><a href="https://github.com/pingcap/tiup">TiUP</a> 是 TiDB 4.0 版本引入的集群运维工具，<a href="https://github.com/pingcap/tiup/tree/master/components/cluster">TiUP cluster</a> 是 TiUP 提供的使用 Golang 编写的集群管理组件，通过 TiUP cluster 组件就可以进行日常的运维工作，包括部署、启动、关闭、销毁、弹性扩缩容、升级 TiDB 集群；管理 TiDB 集群参数。</p><p>目前 TiUP 可以支持部署 TiDB、TiFlash、TiDB Binlog、TiCDC，以及监控系统。本文将介绍不同集群拓扑的具体部署步骤。</p><h3 id="第-1-步：软硬件环境需求及前置检查"><a href="#第-1-步：软硬件环境需求及前置检查" class="headerlink" title="第 1 步：软硬件环境需求及前置检查"></a>第 1 步：软硬件环境需求及前置检查</h3><p><a href="https://docs.pingcap.com/zh/tidb/stable/hardware-and-software-requirements">软硬件环境需求</a></p><p><a href="https://docs.pingcap.com/zh/tidb/stable/check-before-deployment">环境与系统配置检查</a></p><h3 id="第-2-步：在中控机上安装-TiUP-组件"><a href="#第-2-步：在中控机上安装-TiUP-组件" class="headerlink" title="第 2 步：在中控机上安装 TiUP 组件"></a>第 2 步：在中控机上安装 TiUP 组件</h3><p>使用普通用户登录中控机，以 <code>tidb</code> 用户为例，后续安装 TiUP 及集群管理操作均通过该用户完成：</p><ol><li><p>执行如下命令安装 TiUP 工具：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl --proto &#x27;=https&#x27; --tlsv1.2 -sSf https://tiup-mirrors.pingcap.com/install.sh | sh</span><br></pre></td></tr></table></figure></li><li><p>按如下步骤设置 TiUP 环境变量：</p><p>重新声明全局环境变量：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">source .bash_profile</span><br></pre></td></tr></table></figure><p>确认 TiUP 工具是否安装：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">which tiup</span><br></pre></td></tr></table></figure></li><li><p>安装 TiUP cluster 组件</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tiup cluster</span><br></pre></td></tr></table></figure></li><li><p>如果已经安装，则更新 TiUP cluster 组件至最新版本：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tiup update --self &amp;&amp; tiup update cluster</span><br></pre></td></tr></table></figure><p>预期输出 <code>“Update successfully!”</code> 字样。</p></li><li><p>验证当前 TiUP cluster 版本信息。执行如下命令查看 TiUP cluster 组件版本：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tiup --binary cluster</span><br></pre></td></tr></table></figure></li></ol><h3 id="第-3-步：编辑初始化配置文件"><a href="#第-3-步：编辑初始化配置文件" class="headerlink" title="第 3 步：编辑初始化配置文件"></a>第 3 步：编辑初始化配置文件</h3><p>请根据不同的集群拓扑，编辑 TiUP 所需的集群初始化配置文件。</p><p>这里举出常见的 6 种场景，请根据链接中的拓扑说明，以及给出的配置文件模板，新建一个配置文件 <code>topology.yaml</code>。如果有其他组合场景的需求，请根据多个模板自行调整。</p><ul><li><p><a href="https://docs.pingcap.com/zh/tidb/stable/minimal-deployment-topology">最小拓扑架构</a></p><p>最基本的集群拓扑，包括 tidb-server、tikv-server、pd-server，适合 OLTP 业务。</p></li><li><p><a href="https://docs.pingcap.com/zh/tidb/stable/tiflash-deployment-topology">增加 TiFlash 拓扑架构</a></p><p>包含最小拓扑的基础上，同时部署 TiFlash。TiFlash 是列式的存储引擎，已经逐步成为集群拓扑的标配。适合 Real-Time HTAP 业务。</p></li><li><p><a href="https://docs.pingcap.com/zh/tidb/stable/ticdc-deployment-topology">增加 TiCDC 拓扑架构</a></p><p>包含最小拓扑的基础上，同时部署 TiCDC。TiCDC 是 4.0 版本开始支持的 TiDB 增量数据同步工具，支持多种下游 (TiDB/MySQL/MQ)。相比于 TiDB Binlog，TiCDC 有延迟更低、天然高可用等优点。在部署完成后，需要启动 TiCDC，<a href="https://docs.pingcap.com/zh/tidb/stable/manage-ticdc">通过 <code>cdc cli</code> 创建同步任务</a>。</p></li><li><p><a href="https://docs.pingcap.com/zh/tidb/stable/tidb-binlog-deployment-topology">增加 TiDB Binlog 拓扑架构</a></p><p>包含最小拓扑的基础上，同时部署 TiDB Binlog。TiDB Binlog 是目前广泛使用的增量同步组件，可提供准实时备份和同步功能。</p></li><li><p><a href="https://docs.pingcap.com/zh/tidb/stable/tispark-deployment-topology">增加 TiSpark 拓扑架构</a></p><p>包含最小拓扑的基础上，同时部署 TiSpark 组件。TiSpark 是 PingCAP 为解决用户复杂 OLAP 需求而推出的产品。TiUP cluster 组件对 TiSpark 的支持目前为实验性特性。</p></li><li><p><a href="https://docs.pingcap.com/zh/tidb/stable/hybrid-deployment-topology">混合部署拓扑架构</a></p><p>适用于单台机器，混合部署多个实例的情况，也包括单机多实例，需要额外增加目录、端口、资源配比、label 等配置。</p></li><li><p><a href="https://docs.pingcap.com/zh/tidb/stable/geo-distributed-deployment-topology">跨机房部署拓扑架构</a></p><p>以典型的 <code>两地三中心</code> 架构为例，介绍跨机房部署架构，以及需要注意的关键设置。</p></li></ul><blockquote><p><strong>注意：</strong></p><ul><li><code>topology.yaml</code>配置文件内不能使用主机名，需要使用ip地址。使用主机名会在启动时出现报错。</li><li>对于需要全局生效的参数，请在配置文件中 <code>server_configs</code> 的对应组件下配置。</li><li>对于需要某个节点生效的参数，请在具体节点的 <code>config</code> 中配置。</li><li>配置的层次结构使用 <code>.</code> 表示。如：<code>log.slow-threshold</code>。更多格式参考 <a href="https://github.com/pingcap/tiup/blob/master/examples/topology.example.yaml">TiUP 配置参数模版</a>。</li><li>更多参数说明，请参考 <a href="https://github.com/pingcap/tidb/blob/master/config/config.toml.example">TiDB <code>config.toml.example</code></a>、<a href="https://github.com/tikv/tikv/blob/master/etc/config-template.toml">TiKV <code>config.toml.example</code></a> 、 <a href="https://github.com/pingcap/pd/blob/master/conf/config.toml">PD <code>config.toml.example</code></a> 和 <a href="https://docs.pingcap.com/zh/tidb/stable/tiflash-configuration">TiFlash 配置参数</a>。</li></ul></blockquote><h3 id="第-4-步：执行部署命令"><a href="#第-4-步：执行部署命令" class="headerlink" title="第 4 步：执行部署命令"></a>第 4 步：执行部署命令</h3><blockquote><p><strong>注意：</strong></p><p>通过 TiUP 进行集群部署可以使用密钥或者交互密码方式来进行安全认证：</p><ul><li>如果是密钥方式，可以通过 <code>-i</code> 或者 <code>--identity_file</code> 来指定密钥的路径；</li><li>如果是密码方式，可以通过 <code>-p</code> 进入密码交互窗口；</li><li>如果已经配置免密登陆目标机，则不需填写认证。</li></ul><p>一般情况下 TiUP 会在目标机器上创建 <code>topology.yaml</code> 中约定的用户和组，以下情况例外：</p><ul><li><code>topology.yaml</code> 中设置的用户名在目标机器上已存在。</li><li>在命令行上使用了参数 <code>--skip-create-user</code> 明确指定跳过创建用户的步骤。</li></ul></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tiup cluster deploy tidb-test v4.0.0 ./topology.yaml --user root [-p] [-i /home/root/.ssh/gcp_rsa]</span><br></pre></td></tr></table></figure><p>以上部署命令中：</p><ul><li>通过 TiUP cluster 部署的集群名称为 <code>tidb-test</code></li><li>部署版本为 <code>v4.0.0</code>，最新版本可以通过执行 <code>tiup list tidb</code> 来查看 TiUP 支持的版本</li><li>初始化配置文件为 <code>topology.yaml</code></li><li>–user root：通过 root 用户登录到目标主机完成集群部署，该用户需要有 ssh 到目标机器的权限，并且在目标机器有 sudo 权限。也可以用其他有 ssh 和 sudo 权限的用户完成部署。</li><li>[-i] 及 [-p]：非必选项，如果已经配置免密登陆目标机，则不需填写。否则选择其一即可，[-i] 为可登录到目标机的 root 用户（或 –user 指定的其他用户）的私钥，也可使用 [-p] 交互式输入该用户的密码</li><li>如果需要指定在目标机创建的用户组名，可以参考<a href="https://github.com/pingcap/tiup/blob/master/examples/topology.example.yaml#L7">这个例子</a>。</li></ul><p><img src="/2020/09/16/TiDB-%E5%AE%89%E8%A3%85%E6%96%87%E6%A1%A3/tiup-1.png" alt="TiUP-1"></p><p><img src="/2020/09/16/TiDB-%E5%AE%89%E8%A3%85%E6%96%87%E6%A1%A3/tiup-2.png" alt="TiUP-2"></p><p>预期日志结尾输出会有 <code>Deployed cluster </code>tidb-test<code> successfully</code> 关键词，表示部署成功。</p><h3 id="第-5-步：查看-TiUP-管理的集群情况"><a href="#第-5-步：查看-TiUP-管理的集群情况" class="headerlink" title="第 5 步：查看 TiUP 管理的集群情况"></a>第 5 步：查看 TiUP 管理的集群情况</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tiup cluster list</span><br></pre></td></tr></table></figure><p>TiUP 支持管理多个 TiDB 集群，该命令会输出当前通过 TiUP cluster 管理的所有集群信息，包括集群名称、部署用户、版本、密钥信息等：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Starting &#x2F;home&#x2F;tidb&#x2F;.tiup&#x2F;components&#x2F;cluster&#x2F;v1.0.0&#x2F;cluster list</span><br><span class="line">Name              User  Version        Path                                                        PrivateKey</span><br><span class="line">----              ----  -------        ----                                                        ----------</span><br><span class="line">tidb-test         tidb  v4.0.0      &#x2F;home&#x2F;tidb&#x2F;.tiup&#x2F;storage&#x2F;cluster&#x2F;clusters&#x2F;tidb-test         &#x2F;home&#x2F;tidb&#x2F;.tiup&#x2F;storage&#x2F;cluster&#x2F;clusters&#x2F;tidb-test&#x2F;ssh&#x2F;id_rsa</span><br></pre></td></tr></table></figure><p><img src="/2020/09/16/TiDB-%E5%AE%89%E8%A3%85%E6%96%87%E6%A1%A3/tiup-3.png" alt="TiUP-3"></p><h3 id="第-6-步：检查部署的-TiDB-集群情况"><a href="#第-6-步：检查部署的-TiDB-集群情况" class="headerlink" title="第 6 步：检查部署的 TiDB 集群情况"></a>第 6 步：检查部署的 TiDB 集群情况</h3><p>例如，执行如下命令检查 <code>tidb-test</code> 集群情况：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tiup cluster display tidb-test</span><br></pre></td></tr></table></figure><p>预期输出包括 <code>tidb-test</code> 集群中实例 ID、角色、主机、监听端口和状态（由于还未启动，所以状态为 Down/inactive）、目录信息。</p><p><img src="/2020/09/16/TiDB-%E5%AE%89%E8%A3%85%E6%96%87%E6%A1%A3/tiup-4.png" alt="TiUP-4"></p><h3 id="第-7-步：启动集群"><a href="#第-7-步：启动集群" class="headerlink" title="第 7 步：启动集群"></a>第 7 步：启动集群</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tiup cluster start tidb-test</span><br></pre></td></tr></table></figure><p>预期结果输出 <code>Started cluster </code>tidb-test<code> successfully</code> 标志启动成功。</p><p><img src="/2020/09/16/TiDB-%E5%AE%89%E8%A3%85%E6%96%87%E6%A1%A3/tiup-5.png" alt="TiUP-5"></p><p><img src="/2020/09/16/TiDB-%E5%AE%89%E8%A3%85%E6%96%87%E6%A1%A3/tiup-6.png" alt="TiUP-6"></p><h3 id="第-8-步：验证集群运行状态"><a href="#第-8-步：验证集群运行状态" class="headerlink" title="第 8 步：验证集群运行状态"></a>第 8 步：验证集群运行状态</h3><ul><li>通过 TiUP 检查集群状态</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tiup cluster display tidb-test</span><br></pre></td></tr></table></figure><p>预期结果输出，注意 Status 状态信息为 <code>Up</code> 说明集群状态正常</p><p><img src="/2020/09/16/TiDB-%E5%AE%89%E8%A3%85%E6%96%87%E6%A1%A3/tiup-7.png" alt="TiUP-7"></p><ul><li>执行如下命令登录数据库：</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql -u root -h 10.0.1.4 -P 4000</span><br></pre></td></tr></table></figure><p><img src="/2020/09/16/TiDB-%E5%AE%89%E8%A3%85%E6%96%87%E6%A1%A3/tiup-8.png" alt="TiUP-8"></p><p>此外，也需要验证监控系统、<a href="https://docs.pingcap.com/zh/tidb/stable/dashboard-intro">TiDB Dashboard</a> 的运行状态，以及简单命令的执行，验证方式可参考<a href="https://docs.pingcap.com/zh/tidb/stable/post-installation-check">验证集群运行状态</a>。</p><h3 id="TiUP管理命令"><a href="#TiUP管理命令" class="headerlink" title="TiUP管理命令"></a>TiUP管理命令</h3><h4 id="集群管理"><a href="#集群管理" class="headerlink" title="集群管理"></a>集群管理</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查看集群列表</span></span><br><span class="line">tiup cluster list</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看集群状态</span></span><br><span class="line">tiup cluster display tidb-test</span><br><span class="line"></span><br><span class="line"><span class="comment"># 启动集群</span></span><br><span class="line">tiup cluster start tidb-test</span><br><span class="line"></span><br><span class="line"><span class="comment"># 停止集群</span></span><br><span class="line">tiup cluster stop tidb-test</span><br><span class="line"></span><br><span class="line"><span class="comment"># 修改集群参数</span></span><br><span class="line">tiup cluster edit-config tidb-test</span><br><span class="line"></span><br><span class="line"><span class="comment"># 删除集群</span></span><br><span class="line">tiup cluster destroy tidb-test</span><br></pre></td></tr></table></figure><h4 id="集群组件管理"><a href="#集群组件管理" class="headerlink" title="集群组件管理"></a>集群组件管理</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 启动组件所有节点</span></span><br><span class="line">tiup cluster start tidb-test -R pd</span><br><span class="line"></span><br><span class="line"><span class="comment"># 关闭组件所有节点</span></span><br><span class="line">tiup cluster stop tidb-test -R tidb</span><br><span class="line"></span><br><span class="line"><span class="comment"># 启动某几个节点的组件</span></span><br><span class="line">tiup cluster start tidb-test -N &lt;ip&gt;:&lt;port&gt;,&lt;ip&gt;:&lt;port&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 关闭某几个节点的组件</span></span><br><span class="line">tiup cluster stop tidb-test -N &lt;ip&gt;:&lt;port&gt;,&lt;ip&gt;:&lt;port&gt;</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;官方文档：&lt;a href=&quot;https://docs.pingcap.com/zh/tidb/stable/production-deployment-using-tiup&quot;&gt;https://docs.pingcap.com/zh/tidb/stable/productio</summary>
      
    
    
    
    <category term="TiDB" scheme="https://renyb2.github.io/categories/TiDB/"/>
    
    
    <category term="TiDB" scheme="https://renyb2.github.io/tags/TiDB/"/>
    
  </entry>
  
  <entry>
    <title>Oracle 性能测试</title>
    <link href="https://renyb2.github.io/2020/09/15/Oracle-%E6%80%A7%E8%83%BD%E6%B5%8B%E8%AF%95/"/>
    <id>https://renyb2.github.io/2020/09/15/Oracle-%E6%80%A7%E8%83%BD%E6%B5%8B%E8%AF%95/</id>
    <published>2020-09-15T07:45:41.000Z</published>
    <updated>2020-09-17T09:23:23.070Z</updated>
    
    <content type="html"><![CDATA[<h2 id="使用Oracle-SQL测试"><a href="#使用Oracle-SQL测试" class="headerlink" title="使用Oracle SQL测试"></a>使用Oracle SQL测试</h2><blockquote><p>实验环境</p><p>机器：win10虚机</p><p>配置：4c8G + 500G硬盘</p></blockquote><h3 id="持续写入"><a href="#持续写入" class="headerlink" title="持续写入"></a>持续写入</h3><p>每次insert操作后，进行一次commit操作，性能低。<code>实验用时：00:02:39.66</code></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">drop</span> <span class="keyword">table</span> t <span class="keyword">purge</span>;</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> t(x <span class="built_in">int</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 清空共享池，注意在生产环境中千万不能做这步操作</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">system</span> <span class="keyword">flush</span> <span class="keyword">shared_pool</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 定义函数proc</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">or</span> <span class="keyword">replace</span> <span class="keyword">procedure</span> proc</span><br><span class="line"><span class="keyword">as</span></span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="number">1</span> .. <span class="number">1000000</span></span><br><span class="line">        <span class="keyword">loop</span></span><br><span class="line">            <span class="keyword">insert</span> <span class="keyword">into</span> t <span class="keyword">values</span>(i);</span><br><span class="line">            <span class="keyword">commit</span>;</span><br><span class="line">        <span class="keyword">end</span> <span class="keyword">loop</span>;</span><br><span class="line"><span class="keyword">end</span>;</span><br><span class="line">/</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 开启sql时间统计</span></span><br><span class="line"><span class="keyword">set</span> timing <span class="keyword">on</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 运行函数proc</span></span><br><span class="line">exec proc;</span><br></pre></td></tr></table></figure><p><img src="/2020/09/15/Oracle-%E6%80%A7%E8%83%BD%E6%B5%8B%E8%AF%95/%E6%8C%81%E7%BB%AD%E5%86%99%E5%85%A5.png" alt="持续写入"></p><h3 id="批量写入"><a href="#批量写入" class="headerlink" title="批量写入"></a>批量写入</h3><p>对insert操作进行批量提交，性能相较于上者有所提升。<code>实验用时：00:01:25.37</code></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">drop</span> <span class="keyword">table</span> t <span class="keyword">purge</span>;</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> t(x <span class="built_in">int</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 清空共享池，注意在生产环境中千万不能做这步操作</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">system</span> <span class="keyword">flush</span> <span class="keyword">shared_pool</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 定义函数proc</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">or</span> <span class="keyword">replace</span> <span class="keyword">procedure</span> proc</span><br><span class="line"><span class="keyword">as</span></span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="number">1</span> .. <span class="number">1000000</span></span><br><span class="line">        <span class="keyword">loop</span></span><br><span class="line">            <span class="keyword">insert</span> <span class="keyword">into</span> t <span class="keyword">values</span>(i);</span><br><span class="line">        <span class="keyword">end</span> <span class="keyword">loop</span>;</span><br><span class="line">    <span class="keyword">commit</span>;</span><br><span class="line"><span class="keyword">end</span>;</span><br><span class="line">/</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 开启sql时间统计</span></span><br><span class="line"><span class="keyword">set</span> timing <span class="keyword">on</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 运行函数proc</span></span><br><span class="line">exec proc;</span><br></pre></td></tr></table></figure><p><img src="/2020/09/15/Oracle-%E6%80%A7%E8%83%BD%E6%B5%8B%E8%AF%95/%E6%89%B9%E9%87%8F%E5%86%99%E5%85%A5.png" alt="批量写入"></p><h3 id="connect-by方式写入"><a href="#connect-by方式写入" class="headerlink" title="connect by方式写入"></a>connect by方式写入</h3><p>Oracle提供的层次查询（Hierarchical Queries）功能中的connect by子句可以快速插入连续数字。该方法会将数据写入数据缓冲区(data buffer)中，然后刷入磁盘中。<code>实验用时：00:00:01.56</code></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">drop</span> <span class="keyword">table</span> t <span class="keyword">purge</span>;</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> t(x <span class="built_in">int</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 清空共享池，注意在生产环境中千万不能做这步操作</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">system</span> <span class="keyword">flush</span> <span class="keyword">shared_pool</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 开启sql时间统计</span></span><br><span class="line"><span class="keyword">set</span> timing <span class="keyword">on</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 使用connect by level，插入连续数字</span></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> t <span class="keyword">select</span> <span class="keyword">rownum</span> <span class="keyword">from</span> dual <span class="keyword">connect</span> <span class="keyword">by</span> <span class="keyword">level</span>&lt;=<span class="number">1000000</span>;</span><br></pre></td></tr></table></figure><p><img src="/2020/09/15/Oracle-%E6%80%A7%E8%83%BD%E6%B5%8B%E8%AF%95/%E9%9B%86%E5%90%88%E5%86%99%E5%85%A5.png" alt="connect by写入"></p><h3 id="直接路径写入"><a href="#直接路径写入" class="headerlink" title="直接路径写入"></a>直接路径写入</h3><p>该方式跳过了数据缓冲区(data buffer)， 直接写进磁盘中，这种方式称之为直接路径读写方式。<code>实验用时：00:00:00.78</code></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">drop</span> <span class="keyword">table</span> t <span class="keyword">purge</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 清空共享池，注意在生产环境中千万不能做这步操作</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">system</span> <span class="keyword">flush</span> <span class="keyword">shared_pool</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 开启sql时间统计</span></span><br><span class="line"><span class="keyword">set</span> timing <span class="keyword">on</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 使用connect by level，插入连续数字</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> t <span class="keyword">as</span> <span class="keyword">select</span> <span class="keyword">rownum</span> x <span class="keyword">from</span> dual <span class="keyword">connect</span> <span class="keyword">by</span> <span class="keyword">level</span>&lt;=<span class="number">1000000</span>;</span><br></pre></td></tr></table></figure><p><img src="/2020/09/15/Oracle-%E6%80%A7%E8%83%BD%E6%B5%8B%E8%AF%95/%E7%9B%B4%E6%8E%A5%E8%B7%AF%E5%BE%84%E5%86%99%E5%85%A5.png" alt="直接路径写入"></p><h3 id="并行模式直接写入"><a href="#并行模式直接写入" class="headerlink" title="并行模式直接写入"></a>并行模式直接写入</h3><p>并行加直接路径，而且是不写日志。<code>实验用时：00:00:00.67</code></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">drop</span> <span class="keyword">table</span> t <span class="keyword">purge</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 清空共享池，注意在生产环境中千万不能做这步操作</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">system</span> <span class="keyword">flush</span> <span class="keyword">shared_pool</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 开启sql时间统计</span></span><br><span class="line"><span class="keyword">set</span> timing <span class="keyword">on</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 使用connect by level，插入连续数字</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> t nologging <span class="keyword">parallel</span> <span class="number">4</span> <span class="keyword">as</span> <span class="keyword">select</span> <span class="keyword">rownum</span> x <span class="keyword">from</span> dual <span class="keyword">connect</span> <span class="keyword">by</span> <span class="keyword">level</span>&lt;=<span class="number">1000000</span>;</span><br></pre></td></tr></table></figure><p><img src="/2020/09/15/Oracle-%E6%80%A7%E8%83%BD%E6%B5%8B%E8%AF%95/%E5%B9%B6%E8%A1%8C%E6%A8%A1%E5%BC%8F%E5%86%99%E5%85%A5.png" alt="并行模式写入"></p><h3 id="大对象存储"><a href="#大对象存储" class="headerlink" title="大对象存储"></a>大对象存储</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 创建测试表</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> t</span><br><span class="line">(</span><br><span class="line">    tid <span class="built_in">int</span> primary <span class="keyword">key</span>,</span><br><span class="line">    tname <span class="built_in">varchar2</span>(<span class="number">20</span>),</span><br><span class="line">    tcontent <span class="built_in">blob</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 创建普通序列号</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">sequence</span> sequ_t;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 注册目录</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">or</span> <span class="keyword">replace</span> <span class="keyword">directory</span> TEST_DIR <span class="keyword">as</span> <span class="string">&#x27;C:\Users\lenovo\Desktop&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 存储文件对象</span></span><br><span class="line"><span class="keyword">declare</span></span><br><span class="line">    tempimg <span class="built_in">blob</span>;  <span class="comment">-- 定义临时变量存放数据   </span></span><br><span class="line">    tempdir bfile := bfilename(&#x27;TEST_DIR&#x27;,&#x27;test.png&#x27;);  <span class="comment">-- 非常重要：DIR必须大写</span></span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">    <span class="keyword">insert</span> <span class="keyword">into</span> t <span class="keyword">values</span> (sequ_t.nextval,<span class="string">&#x27;test.png&#x27;</span>,empty_blob())</span><br><span class="line">    <span class="keyword">returning</span> tcontent <span class="keyword">into</span> tempimg;</span><br><span class="line"></span><br><span class="line">    <span class="comment">-- 使用内置的包，给tempimg写入数据</span></span><br><span class="line">    dbms_lob.fileopen(tempdir);  <span class="comment">-- 打开指定文件</span></span><br><span class="line">    dbms_lob.loadfromfile(tempimg,tempdir,dbms_lob.getlength(tempdir));</span><br><span class="line">    dbms_lob.fileclose(tempdir);  <span class="comment">-- 关闭文件        </span></span><br><span class="line">    <span class="keyword">commit</span>;</span><br><span class="line"><span class="keyword">end</span> ;</span><br><span class="line">/</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 读取文件对象</span></span><br><span class="line"><span class="keyword">declare</span></span><br><span class="line">    l_file utl_file.file_type;  <span class="comment">-- 定义写入磁盘文件的类型和格式</span></span><br><span class="line">    l_buffer raw(32767);  <span class="comment">-- 定义缓冲区大小</span></span><br><span class="line">    l_amount binary_integer := 3276;  <span class="comment">-- 每次位移个数</span></span><br><span class="line">    l_pos int :=1;  <span class="comment">-- 开始位置</span></span><br><span class="line">    l_blob blob;  <span class="comment">-- 临时数据存放</span></span><br><span class="line">    l_blob_len int;  <span class="comment">-- 总长度</span></span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">    <span class="comment">-- 将数据库中的数据，存放在blob变量中  </span></span><br><span class="line">    <span class="keyword">select</span> tcontent <span class="keyword">into</span> l_blob <span class="keyword">from</span> t <span class="keyword">where</span> tname=<span class="string">&#x27;test.png&#x27;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">-- 获取blob文件的长度</span></span><br><span class="line">    l_blob_len := dbms_lob.getlength(l_blob);</span><br><span class="line"></span><br><span class="line">    <span class="comment">-- 准备写入磁盘文件</span></span><br><span class="line">    l_file := utl_file.fopen(&#x27;TEST_DIR&#x27;,&#x27;t.png&#x27;,&#x27;wb&#x27;);</span><br><span class="line"></span><br><span class="line">    <span class="comment">-- 写入数据</span></span><br><span class="line">    while l_pos&lt;l_blob_len</span><br><span class="line">    loop</span><br><span class="line">        dbms_lob.read(l_blob,l_amount,l_pos,l_buffer);</span><br><span class="line">        utl_file.put_raw(l_file,l_buffer,true);</span><br><span class="line">        l_pos := l_pos + l_amount;</span><br><span class="line">    <span class="keyword">end</span> <span class="keyword">loop</span>;</span><br><span class="line">    utl_file.fclose(l_file); </span><br><span class="line"><span class="keyword">end</span>;</span><br><span class="line">/</span><br></pre></td></tr></table></figure><p><img src="/2020/09/15/Oracle-%E6%80%A7%E8%83%BD%E6%B5%8B%E8%AF%95/%E5%AD%98%E5%82%A8image.png" alt="存储image"></p><p><img src="/2020/09/15/Oracle-%E6%80%A7%E8%83%BD%E6%B5%8B%E8%AF%95/%E8%AF%BB%E5%8F%96image.png" alt="读取image"></p><h2 id="参考文档"><a href="#参考文档" class="headerlink" title="参考文档"></a>参考文档</h2><p><a href="https://docs.oracle.com/database/121/ARPLS/d_lob.htm#ARPLS600">Oracle 官方文档：DBMS_LOB</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;使用Oracle-SQL测试&quot;&gt;&lt;a href=&quot;#使用Oracle-SQL测试&quot; class=&quot;headerlink&quot; title=&quot;使用Oracle SQL测试&quot;&gt;&lt;/a&gt;使用Oracle SQL测试&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;实验环境&lt;/p&gt;
</summary>
      
    
    
    
    <category term="Oracle" scheme="https://renyb2.github.io/categories/Oracle/"/>
    
    
    <category term="性能测试" scheme="https://renyb2.github.io/tags/%E6%80%A7%E8%83%BD%E6%B5%8B%E8%AF%95/"/>
    
  </entry>
  
  <entry>
    <title>Oracle 11.2 快速上手</title>
    <link href="https://renyb2.github.io/2020/09/14/Oracle-11-2-%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B/"/>
    <id>https://renyb2.github.io/2020/09/14/Oracle-11-2-%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B/</id>
    <published>2020-09-14T10:42:02.000Z</published>
    <updated>2020-09-17T10:13:57.728Z</updated>
    
    <content type="html"><![CDATA[<p>Oracle Database，又名Oracle RDBMS，简称Oracle。是甲骨文公司推出的一款关系数据库管理系统。Oracle数据库系统是目前世界上流行的关系数据库管理系统，拥有可移植性好、使用方便、功能强等优点，在各类大、中、小、微机环境中都适用。Oracle是一种高效率、可靠性好的、适应高吞吐量的数据库解决方案。</p><h3 id="Oracle-登录"><a href="#Oracle-登录" class="headerlink" title="Oracle 登录"></a>Oracle 登录</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 格式：sqlplus &lt;username&gt;/&lt;password&gt;[@ip:port/instance name] [as sysdba]</span></span><br><span class="line">sqlplus sys/123@10.121.9.104:49161 as sysdba</span><br></pre></td></tr></table></figure><h3 id="Oracle-用户管理"><a href="#Oracle-用户管理" class="headerlink" title="Oracle 用户管理"></a>Oracle 用户管理</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 查看当前用户</span></span><br><span class="line"><span class="keyword">show</span> <span class="keyword">user</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 修改用户密码</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">user</span> &lt;username&gt; <span class="keyword">identified</span> <span class="keyword">by</span> <span class="string">&quot;&lt;new password&gt;&quot;</span>;</span><br></pre></td></tr></table></figure><h3 id="Oracle-数据库设置"><a href="#Oracle-数据库设置" class="headerlink" title="Oracle 数据库设置"></a>Oracle 数据库设置</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 开启时间统计</span></span><br><span class="line"><span class="keyword">set</span> timing <span class="keyword">on</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 清空共享池</span></span><br><span class="line"><span class="comment">会清空历史sql的缓存记录，清空后再次执行这些sql时会产生大量的硬解析，影响数据库性能</span></span><br><span class="line"><span class="comment">生产环境慎用，系统繁忙时执行，容易导致数据库宕机</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">system</span> <span class="keyword">flush</span> <span class="keyword">shared_pool</span>;</span><br></pre></td></tr></table></figure><h3 id="Oracle-表操作"><a href="#Oracle-表操作" class="headerlink" title="Oracle 表操作"></a>Oracle 表操作</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 查看表结构</span></span><br><span class="line">desc &lt;table name&gt;;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 创建表</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> t</span><br><span class="line">(</span><br><span class="line">    tid <span class="built_in">int</span> primary <span class="keyword">key</span>,</span><br><span class="line">    tname <span class="built_in">varchar2</span>(<span class="number">20</span>),</span><br><span class="line">    tcontent <span class="built_in">blob</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查看表内容</span></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> t;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 删除表，在垃圾桶留下记录，可flashback闪回</span></span><br><span class="line"><span class="keyword">drop</span> <span class="keyword">table</span> &lt;<span class="keyword">table</span> <span class="keyword">name</span>&gt;;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 删除表，不会在垃圾桶留下记录，不可恢复</span></span><br><span class="line"><span class="keyword">drop</span> <span class="keyword">table</span> &lt;<span class="keyword">table</span> <span class="keyword">name</span>&gt; <span class="keyword">purge</span>;</span><br></pre></td></tr></table></figure><h3 id="Oracle-存储过程语法"><a href="#Oracle-存储过程语法" class="headerlink" title="Oracle 存储过程语法"></a>Oracle 存储过程语法</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> [<span class="keyword">or</span> <span class="keyword">replace</span>] <span class="keyword">procedure</span> 存储过程名（param1 <span class="keyword">in</span> <span class="keyword">type</span>，param2 <span class="keyword">out</span> <span class="keyword">type</span>）</span><br><span class="line"><span class="keyword">as</span></span><br><span class="line">    变量<span class="number">1</span> 类型（值范围）;</span><br><span class="line">    变量2 类型（值范围）;</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">    <span class="keyword">select</span> <span class="keyword">count</span>(*) <span class="keyword">into</span> 变量<span class="number">1</span> <span class="keyword">from</span> 表A <span class="keyword">where</span>列名=param1；</span><br><span class="line">    <span class="keyword">if</span> (判断条件) <span class="keyword">then</span></span><br><span class="line">        <span class="keyword">select</span> 列名 <span class="keyword">into</span> 变量<span class="number">2</span> <span class="keyword">from</span> 表A <span class="keyword">where</span>列名=param1；</span><br><span class="line">        dbms_output.Put_line(<span class="string">&#x27;打印信息&#x27;</span>);</span><br><span class="line">    elsif (判断条件) then</span><br><span class="line">        dbms_output.Put_line(&#x27;打印信息&#x27;);</span><br><span class="line">    else</span><br><span class="line">        raise 异常名（NO_DATA_FOUND）;</span><br><span class="line">    <span class="keyword">end</span> <span class="keyword">if</span>;</span><br><span class="line">exception</span><br><span class="line">    when others then</span><br><span class="line">        <span class="keyword">rollback</span>;</span><br><span class="line"><span class="keyword">end</span>;</span><br></pre></td></tr></table></figure><h3 id="参考文档"><a href="#参考文档" class="headerlink" title="参考文档"></a>参考文档</h3><p><a href="https://docs.oracle.com/cd/E11882_01/index.htm?xd_co_f=94201a14-f246-4e54-ba51-c48c9c02f224">Oracle 官方文档</a></p><p><a href="https://www.cnblogs.com/c1024/p/11012016.html">Oracle数据库初学者入门教程</a></p><p><a href="https://www.cnblogs.com/xswt/p/11394032.html">Oracle常用命令</a></p><p><a href="https://www.cnblogs.com/joeyJss/p/11458653.html">Oracle存储过程的语法</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;Oracle Database，又名Oracle RDBMS，简称Oracle。是甲骨文公司推出的一款关系数据库管理系统。Oracle数据库系统是目前世界上流行的关系数据库管理系统，拥有可移植性好、使用方便、功能强等优点，在各类大、中、小、微机环境中都适用。Oracle是一</summary>
      
    
    
    
    <category term="Oracle" scheme="https://renyb2.github.io/categories/Oracle/"/>
    
    
    <category term="Oracle 11.2" scheme="https://renyb2.github.io/tags/Oracle-11-2/"/>
    
  </entry>
  
  <entry>
    <title>Oracle 11.2 安装文档</title>
    <link href="https://renyb2.github.io/2020/09/10/Oracle-11-2-%E5%AE%89%E8%A3%85%E6%96%87%E6%A1%A3/"/>
    <id>https://renyb2.github.io/2020/09/10/Oracle-11-2-%E5%AE%89%E8%A3%85%E6%96%87%E6%A1%A3/</id>
    <published>2020-09-10T07:06:56.000Z</published>
    <updated>2020-09-18T08:51:19.235Z</updated>
    
    <content type="html"><![CDATA[<h2 id="win10安装"><a href="#win10安装" class="headerlink" title="win10安装"></a>win10安装</h2><h3 id="安装包"><a href="#安装包" class="headerlink" title="安装包"></a>安装包</h3><p>版本：Oracle 11.2.0.1.0</p><p>链接：<a href="https://pan.baidu.com/s/12ctlN7GaU4JbIOuawpsiqA">https://pan.baidu.com/s/12ctlN7GaU4JbIOuawpsiqA</a> </p><p>提取码：bah3</p><h3 id="安装步骤"><a href="#安装步骤" class="headerlink" title="安装步骤"></a>安装步骤</h3><h4 id="开始安装"><a href="#开始安装" class="headerlink" title="开始安装"></a>开始安装</h4><p>解压后，双击setup.exe。目录建议全英文</p><p><img src="/2020/09/10/Oracle-11-2-%E5%AE%89%E8%A3%85%E6%96%87%E6%A1%A3/win10-1.png" alt="win10-1"></p><h4 id="环境检测"><a href="#环境检测" class="headerlink" title="环境检测"></a>环境检测</h4><p>双击setup.exe后，自动启动安装程序，检测环境配置。</p><p>我本次目的是测试安装流程，点击是继续安装即可。对安装无影响，对性能有影响。</p><p><img src="/2020/09/10/Oracle-11-2-%E5%AE%89%E8%A3%85%E6%96%87%E6%A1%A3/win10-2.png" alt="win10-2"></p><h4 id="配置安全更新"><a href="#配置安全更新" class="headerlink" title="配置安全更新"></a>配置安全更新</h4><p>电子邮箱配置自己的即可，会接受安全问题通知，也可以不填</p><p><img src="/2020/09/10/Oracle-11-2-%E5%AE%89%E8%A3%85%E6%96%87%E6%A1%A3/win10-3.png" alt="win10-3"></p><h4 id="安装选项"><a href="#安装选项" class="headerlink" title="安装选项"></a>安装选项</h4><p>选择创建和配置数据库，点击下一步</p><p><img src="/2020/09/10/Oracle-11-2-%E5%AE%89%E8%A3%85%E6%96%87%E6%A1%A3/win10-4.png" alt="win10-4"></p><h4 id="系统类"><a href="#系统类" class="headerlink" title="系统类"></a>系统类</h4><p>这里在win10上实验，选择的桌面类</p><p><img src="/2020/09/10/Oracle-11-2-%E5%AE%89%E8%A3%85%E6%96%87%E6%A1%A3/win10-5.png" alt="win10-5"></p><h4 id="典型安装"><a href="#典型安装" class="headerlink" title="典型安装"></a>典型安装</h4><p>设置数据库文件存储目录、数据库版本、字符集、数据库名及管理口令（用户名为<code>system</code>）</p><p><img src="/2020/09/10/Oracle-11-2-%E5%AE%89%E8%A3%85%E6%96%87%E6%A1%A3/win10-6.png" alt="win10-6"></p><h4 id="后续步骤"><a href="#后续步骤" class="headerlink" title="后续步骤"></a>后续步骤</h4><p>典型安装完成后，按照流程下一步即可完成安装</p><h4 id="登录"><a href="#登录" class="headerlink" title="登录"></a>登录</h4><p>CMD：<code>sqlplus system/&lt;system password&gt;</code></p><p>网页：<code>https://localhost:1158/em</code>，用户名<code>system</code>，口令为典型安装中配置的管理口令</p><p><img src="/2020/09/10/Oracle-11-2-%E5%AE%89%E8%A3%85%E6%96%87%E6%A1%A3/win10-8.png" alt="win10-8"></p><p><img src="/2020/09/10/Oracle-11-2-%E5%AE%89%E8%A3%85%E6%96%87%E6%A1%A3/win10-7.png" alt="win10-7"></p><h2 id="Ubuntu-18-Docker安装"><a href="#Ubuntu-18-Docker安装" class="headerlink" title="Ubuntu 18 Docker安装"></a>Ubuntu 18 Docker安装</h2><h3 id="安装包-1"><a href="#安装包-1" class="headerlink" title="安装包"></a>安装包</h3><p>版本：Oracle Express Edition 11g Release 2</p><p>GitHub：<a href="https://github.com/wnameless/docker-oracle-xe-11g">https://github.com/wnameless/docker-oracle-xe-11g</a></p><h3 id="安装步骤-1"><a href="#安装步骤-1" class="headerlink" title="安装步骤"></a>安装步骤</h3><h4 id="Docker安装"><a href="#Docker安装" class="headerlink" title="Docker安装"></a>Docker安装</h4><p>参考文档：<a href="https://www.runoob.com/docker/ubuntu-docker-install.html">https://www.runoob.com/docker/ubuntu-docker-install.html</a></p><p>安装命令如下：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -fsSL https://get.docker.com | bash -s docker --mirror Aliyun</span><br></pre></td></tr></table></figure><p>也可以使用国内 daocloud 一键安装命令：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -sSL https://get.daocloud.io/docker | sh</span><br></pre></td></tr></table></figure><h4 id="安装Oracle-11G"><a href="#安装Oracle-11G" class="headerlink" title="安装Oracle 11G"></a>安装Oracle 11G</h4><h5 id="Installation-Local"><a href="#Installation-Local" class="headerlink" title="Installation(Local)"></a>Installation(Local)</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git clone https://github.com/wnameless/docker-oracle-xe-11g.git</span><br><span class="line">cd docker-oracle-xe-11g</span><br><span class="line">docker build -t wnameless/oracle-xe-11g .</span><br></pre></td></tr></table></figure><h5 id="Installation-DockerHub"><a href="#Installation-DockerHub" class="headerlink" title="Installation(DockerHub)"></a>Installation(DockerHub)</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker pull wnameless/oracle-xe-11g-r2</span><br></pre></td></tr></table></figure><p>SSH server has been removed since 18.04, please use “docker exec”</p><h4 id="运行"><a href="#运行" class="headerlink" title="运行"></a>运行</h4><p>Run with 1521 port opened:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -d -p 49161:1521 wnameless/oracle-xe-11g-r2</span><br></pre></td></tr></table></figure><p>Run this, if you want the database to be connected remotely:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -d -p 49161:1521 -e ORACLE_ALLOW_REMOTE=true wnameless/oracle-xe-11g-r2</span><br></pre></td></tr></table></figure><h4 id="默认信息"><a href="#默认信息" class="headerlink" title="默认信息"></a>默认信息</h4><p>By default, the password verification is disable(password never expired)<br>Connect database with following setting:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">hostname: localhost</span><br><span class="line">port: 49161</span><br><span class="line">sid: xe</span><br><span class="line">username: system</span><br><span class="line">password: oracle</span><br></pre></td></tr></table></figure><p>Password for SYS &amp; SYSTEM</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">oracle</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;win10安装&quot;&gt;&lt;a href=&quot;#win10安装&quot; class=&quot;headerlink&quot; title=&quot;win10安装&quot;&gt;&lt;/a&gt;win10安装&lt;/h2&gt;&lt;h3 id=&quot;安装包&quot;&gt;&lt;a href=&quot;#安装包&quot; class=&quot;headerlink&quot; title=</summary>
      
    
    
    
    <category term="Oracle" scheme="https://renyb2.github.io/categories/Oracle/"/>
    
    
    <category term="Oracle 11.2" scheme="https://renyb2.github.io/tags/Oracle-11-2/"/>
    
  </entry>
  
  <entry>
    <title>Hexo</title>
    <link href="https://renyb2.github.io/2020/09/10/Hexo/"/>
    <id>https://renyb2.github.io/2020/09/10/Hexo/</id>
    <published>2020-09-10T06:47:47.000Z</published>
    <updated>2020-09-11T03:30:35.944Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Hexo-简介"><a href="#Hexo-简介" class="headerlink" title="Hexo 简介"></a>Hexo 简介</h2><blockquote><p>Hexo 是一个快速、简洁且高效的博客框架。</p><p>Hexo 使用Markdown（或其他渲染引擎）解析文章，在几秒内，即可利用靓丽的主题生成静态网页。</p><p>官方文档：<a href="https://hexo.bootcss.com/docs/">https://hexo.bootcss.com/docs/</a></p></blockquote><a id="more"></a><h2 id="Hexo-安装"><a href="#Hexo-安装" class="headerlink" title="Hexo 安装"></a>Hexo 安装</h2><h2 id="Hexo-GitHub"><a href="#Hexo-GitHub" class="headerlink" title="Hexo + GitHub"></a>Hexo + GitHub</h2><h2 id="Hexo-CMD"><a href="#Hexo-CMD" class="headerlink" title="Hexo CMD"></a>Hexo CMD</h2><h3 id="init"><a href="#init" class="headerlink" title="init"></a>init</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> hexo init [folder]</span></span><br></pre></td></tr></table></figure><p>新建一个网站。如果没有设置 <code>folder</code> ，Hexo 默认在目前的文件夹建立网站。</p><h3 id="new"><a href="#new" class="headerlink" title="new"></a>new</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> hexo new [layout] &lt;title&gt;</span></span><br></pre></td></tr></table></figure><p>新建一篇文章。如果没有设置 <code>layout</code> 的话，默认使用 <a href="https://hexo.bootcss.com/docs/configuration.html">_config.yml</a> 中的 <code>default_layout</code> 参数代替。如果标题包含空格的话，请使用引号括起来。</p><h3 id="generate"><a href="#generate" class="headerlink" title="generate"></a>generate</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> hexo generate</span></span><br></pre></td></tr></table></figure><p>生成静态文件。</p><table><thead><tr><th align="left">选项</th><th align="left">描述</th></tr></thead><tbody><tr><td align="left"><code>-d</code>, <code>--deploy</code></td><td align="left">文件生成后立即部署网站</td></tr><tr><td align="left"><code>-w</code>, <code>--watch</code></td><td align="left">监视文件变动</td></tr></tbody></table><p>该命令可以简写为</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> hexo g</span></span><br></pre></td></tr></table></figure><h3 id="publish"><a href="#publish" class="headerlink" title="publish"></a>publish</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> hexo publish [layout] &lt;filename&gt;</span></span><br></pre></td></tr></table></figure><p>发表草稿。</p><h3 id="server"><a href="#server" class="headerlink" title="server"></a>server</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> hexo server</span></span><br></pre></td></tr></table></figure><p>启动服务器。默认情况下，访问网址为： <code>http://localhost:4000/</code>。</p><table><thead><tr><th align="left">选项</th><th align="left">描述</th></tr></thead><tbody><tr><td align="left"><code>-p</code>, <code>--port</code></td><td align="left">重设端口</td></tr><tr><td align="left"><code>-s</code>, <code>--static</code></td><td align="left">只使用静态文件</td></tr><tr><td align="left"><code>-l</code>, <code>--log</code></td><td align="left">启动日记记录，使用覆盖记录格式</td></tr></tbody></table><h3 id="deploy"><a href="#deploy" class="headerlink" title="deploy"></a>deploy</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> hexo deploy</span></span><br></pre></td></tr></table></figure><p>部署网站。</p><table><thead><tr><th align="left">参数</th><th align="left">描述</th></tr></thead><tbody><tr><td align="left"><code>-g</code>, <code>--generate</code></td><td align="left">部署之前预先生成静态文件</td></tr></tbody></table><p>该命令可以简写为：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo d</span><br></pre></td></tr></table></figure><h3 id="render"><a href="#render" class="headerlink" title="render"></a>render</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> hexo render &lt;file1&gt; [file2] ...</span></span><br></pre></td></tr></table></figure><p>渲染文件。</p><table><thead><tr><th align="left">参数</th><th align="left">描述</th></tr></thead><tbody><tr><td align="left"><code>-o</code>, <code>--output</code></td><td align="left">设置输出路径</td></tr></tbody></table><h3 id="migrate"><a href="#migrate" class="headerlink" title="migrate"></a>migrate</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> hexo migrate &lt;<span class="built_in">type</span>&gt;</span></span><br></pre></td></tr></table></figure><p>从其他博客系统 <a href="https://hexo.bootcss.com/docs/migration.html">迁移内容</a>。</p><h3 id="clean"><a href="#clean" class="headerlink" title="clean"></a>clean</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> hexo clean</span></span><br></pre></td></tr></table></figure><p>清除缓存文件 (<code>db.json</code>) 和已生成的静态文件 (<code>public</code>)。</p><p>在某些情况（尤其是更换主题后），如果发现您对站点的更改无论如何也不生效，您可能需要运行该命令。</p><h3 id="list"><a href="#list" class="headerlink" title="list"></a>list</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> hexo list &lt;<span class="built_in">type</span>&gt;</span></span><br></pre></td></tr></table></figure><p>列出网站资料。</p><h3 id="version"><a href="#version" class="headerlink" title="version"></a>version</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> hexo version</span></span><br></pre></td></tr></table></figure><p>显示 Hexo 版本。</p>]]></content>
    
    
    <summary type="html">&lt;h2 id=&quot;Hexo-简介&quot;&gt;&lt;a href=&quot;#Hexo-简介&quot; class=&quot;headerlink&quot; title=&quot;Hexo 简介&quot;&gt;&lt;/a&gt;Hexo 简介&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;Hexo 是一个快速、简洁且高效的博客框架。&lt;/p&gt;
&lt;p&gt;Hexo 使用Markdown（或其他渲染引擎）解析文章，在几秒内，即可利用靓丽的主题生成静态网页。&lt;/p&gt;
&lt;p&gt;官方文档：&lt;a href=&quot;https://hexo.bootcss.com/docs/&quot;&gt;https://hexo.bootcss.com/docs/&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;</summary>
    
    
    
    <category term="Hexo" scheme="https://renyb2.github.io/categories/Hexo/"/>
    
    
    <category term="Hexo" scheme="https://renyb2.github.io/tags/Hexo/"/>
    
  </entry>
  
</feed>
