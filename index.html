<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>任翌博的个人博客 - Welcome to my blog...</title><meta name="description" content="美食，滑雪"><meta name="keywords" content="coding"><meta name="author" content="任翌博"><meta name="copyright" content="任翌博"><meta name="format-detection" content="telephone=no"><link rel="shortcut icon" href="/img/icon.png"><link rel="canonical" href="https://renyb2.github.io/"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//fonts.googleapis.com" crossorigin="crossorigin"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><meta property="og:type" content="website"><meta property="og:title" content="任翌博的个人博客"><meta property="og:url" content="https://renyb2.github.io/"><meta property="og:site_name" content="任翌博的个人博客"><meta property="og:description" content="美食，滑雪"><meta property="og:image" content="https://renyb2.github.io/img/avatar.png"><meta property="article:published_time" content="2021-09-24T01:45:14.335Z"><meta property="article:modified_time" content="2021-09-24T01:45:14.335Z"><meta name="twitter:card" content="summary"><script>var activateDarkMode = function () {
  document.documentElement.setAttribute('data-theme', 'dark')
  if (document.querySelector('meta[name="theme-color"]') !== null) {
    document.querySelector('meta[name="theme-color"]').setAttribute('content', '#000')
  }
}
var activateLightMode = function () {
  document.documentElement.setAttribute('data-theme', 'light')
  if (document.querySelector('meta[name="theme-color"]') !== null) {
    document.querySelector('meta[name="theme-color"]').setAttribute('content', '#fff')
  }
}

var getCookies = function (name) {
  const value = `; ${document.cookie}`
  const parts = value.split(`; ${name}=`)
  if (parts.length === 2) return parts.pop().split(';').shift()
}

var autoChangeMode = 'false'
var t = getCookies('theme')
if (autoChangeMode === '1') {
  var isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
  var isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
  var isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
  var hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

  if (t === undefined) {
    if (isLightMode) activateLightMode()
    else if (isDarkMode) activateDarkMode()
    else if (isNotSpecified || hasNoSupport) {
      console.log('You specified no preference for a color scheme or your browser does not support it. I Schedule dark mode during night time.')
      var now = new Date()
      var hour = now.getHours()
      var isNight = hour <= 6 || hour >= 18
      isNight ? activateDarkMode() : activateLightMode()
    }
    window.matchMedia('(prefers-color-scheme: dark)').addListener(function (e) {
      if (Cookies.get('theme') === undefined) {
        e.matches ? activateDarkMode() : activateLightMode()
      }
    })
  } else if (t === 'light') activateLightMode()
  else activateDarkMode()
} else if (autoChangeMode === '2') {
  now = new Date()
  hour = now.getHours()
  isNight = hour <= 6 || hour >= 18
  if (t === undefined) isNight ? activateDarkMode() : activateLightMode()
  else if (t === 'light') activateLightMode()
  else activateDarkMode()
} else {
  if (t === 'dark') activateDarkMode()
  else if (t === 'light') activateLightMode()
}</script><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web&amp;display=swap"><script>var GLOBAL_CONFIG = { 
  root: '/',
  hexoversion: '5.1.1',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"找不到您查询的内容：${query}"}},
  translate: undefined,
  noticeOutdate: undefined,
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  bookmark: {
    message_prev: '按',
    message_next: '键将本页加入书签'
  },
  runtime_unit: '天',
  runtime: false,
  copyright: undefined,
  ClickShowText: undefined,
  medium_zoom: false,
  fancybox: true,
  Snackbar: undefined,
  justifiedGallery: {
    js: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
    css: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
  },
  baiduPush: false,
  highlightCopy: true,
  highlightLang: true,
  isPhotoFigcaption: false,
  islazyload: false,
  isanchor: false    
}</script><script id="config_change">var GLOBAL_CONFIG_SITE = { 
  isPost: false,
  isHome: true,
  isHighlightShrink: false,
  isSidebar: false,
  postUpdate: '2021-09-24 09:45:14'
}</script><noscript><style>
#nav {
  opacity: 1
}
.justified-gallery img {
  opacity: 1
}
</style></noscript><meta name="generator" content="Hexo 5.1.1"><link rel="alternate" href="/atom.xml" title="任翌博的个人博客" type="application/atom+xml">
</head><body><div id="mobile-sidebar"><div id="menu_mask"></div><div id="mobile-sidebar-menus"><div class="mobile_author_icon"><img class="avatar-img" src="/img/avatar.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="mobile_post_data"><div class="mobile_data_item is-center"><div class="mobile_data_link"><a href="/archives/"><div class="headline">文章</div><div class="length_num">46</div></a></div></div><div class="mobile_data_item is-center">      <div class="mobile_data_link"><a href="/tags/"><div class="headline">标签</div><div class="length_num">40</div></a></div></div><div class="mobile_data_item is-center">     <div class="mobile_data_link"><a href="/categories/"><div class="headline">分类</div><div class="length_num">15</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div></div></div><div id="body-wrap"><header class="full_page" id="page-header" style="background-image: url(https://static01.imgkr.com/temp/36e94ac91f96409e88de5dd7009e81e7.jpeg)"><nav id="nav"><span class="pull-left" id="blog_name"><a class="blog_title" id="site-name" href="/">任翌博的个人博客</a></span><span class="pull-right menus"><div id="search_button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div><span class="toggle-menu close"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></span></span></nav><div id="site-info"><h1 id="site_title">任翌博的个人博客</h1><div id="site_subtitle"><span id="subtitle"></span></div><div id="site_social_icons"><a class="social-icon" href="https://github.com/renyb2" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="mailto:renybworking@163.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a></div></div><div id="scroll_down"><i class="fas fa-angle-down scroll-down-effects"></i></div></header><main class="layout_page" id="content-inner"><div class="recent-posts" id="recent-posts"><div class="recent-post-item"><div class="post_cover left_radius"><a href="/2021/09/06/OpenStack%E9%83%A8%E7%BD%B2%EF%BC%9AGlance%E5%AF%B9%E6%8E%A5Cinder/" title="OpenStack部署：Glance对接Cinder">     <img class="post_bg" src="https://tse1-mm.cn.bing.net/th/id/R-C.f7fb3fa204c4bca5cffe872f1647bd63?rik=qMT5LReAqlK%2b8g&amp;riu=http%3a%2f%2farticles.csdn.net%2fuploads%2fallimg%2f121012%2f145_121012152139_1.jpg&amp;ehk=lf9gNAsavUUuzA4ylpYKWJ5UC7JuypbkWW37yOFFg0Y%3d&amp;risl=&amp;pid=ImgRaw&amp;r=0" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="OpenStack部署：Glance对接Cinder"></a></div><div class="recent-post-info"><a class="article-title" href="/2021/09/06/OpenStack%E9%83%A8%E7%BD%B2%EF%BC%9AGlance%E5%AF%B9%E6%8E%A5Cinder/" title="OpenStack部署：Glance对接Cinder">OpenStack部署：Glance对接Cinder</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2021-09-06T02:10:18.000Z" title="发表于 2021-09-06 10:10:18">2021-09-06</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox article-meta__icon"></i><a class="article-meta__categories" href="/categories/OpenStack/">OpenStack</a><i class="fas fa-angle-right"></i><a class="article-meta__categories" href="/categories/OpenStack/Train/">Train</a><i class="fas fa-angle-right"></i><a class="article-meta__categories" href="/categories/OpenStack/Train/Glance/">Glance</a></span></div><div class="content">Glance/Cinder-store-proposalGlance Cinder DriverThere is currently a Cinder store in Glance, however it does not support uploads and downloads. This is a proposal to allow Cinder to act as a data store for Glance images that supports upload and download by using Cinder volumes as containers for image data. There would be a 1-to-1 mapping of Glance images to Cinder volumes.
What are the benefits of this approach?This will allow Glance to store images on the large and diverse array of SAN and NAS  ...</div></div></div><div class="recent-post-item"><div class="post_cover right_radius"><a href="/2021/08/05/OpenStack%E9%83%A8%E7%BD%B2%EF%BC%9ATrove/" title="OpenStack部署：Trove">     <img class="post_bg" src="https://tse1-mm.cn.bing.net/th/id/R-C.f7fb3fa204c4bca5cffe872f1647bd63?rik=qMT5LReAqlK%2b8g&amp;riu=http%3a%2f%2farticles.csdn.net%2fuploads%2fallimg%2f121012%2f145_121012152139_1.jpg&amp;ehk=lf9gNAsavUUuzA4ylpYKWJ5UC7JuypbkWW37yOFFg0Y%3d&amp;risl=&amp;pid=ImgRaw&amp;r=0" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="OpenStack部署：Trove"></a></div><div class="recent-post-info"><a class="article-title" href="/2021/08/05/OpenStack%E9%83%A8%E7%BD%B2%EF%BC%9ATrove/" title="OpenStack部署：Trove">OpenStack部署：Trove</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2021-08-05T00:49:35.000Z" title="发表于 2021-08-05 08:49:35">2021-08-05</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox article-meta__icon"></i><a class="article-meta__categories" href="/categories/OpenStack/">OpenStack</a></span></div><div class="content">Building guest image1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950# 构建镜像踩的坑（基于Wallaby版源码做的修改）：# 1. apt、pip源为国外源，下载慢，大概率失败，需要替换为国内源# 2. 编译ubuntu镜像时，宿主机为centos，导致pkg_map解析包名错误。需增加如下环境变量：export DISTRO_NAME=$&#123;guest_os&#125;# 3. root密码没有，无法登陆。需下functions_qemu文件中，增加local root_password=&quot;inspur_trove@123&quot;# 4. elements guest-agent中source-repository-guest-agent获取位置需要修改，调整为本地代码库及本地文件# 5. v版之后，guest-agent镜像切换为docker，docker image从docker源上下载。如果本地为htt ...</div></div></div><div class="recent-post-item"><div class="post_cover left_radius"><a href="/2021/07/27/MongoDB%E4%BD%BF%E7%94%A8%EF%BC%9A%E9%80%9A%E7%94%A8%E6%89%8B%E5%86%8C/" title="MongoDB使用：通用手册">     <img class="post_bg" src="https://www.viafirma.com/blog-xnoccio/wp-content/uploads/sites/3/2017/12/MongoDB.jpeg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="MongoDB使用：通用手册"></a></div><div class="recent-post-info"><a class="article-title" href="/2021/07/27/MongoDB%E4%BD%BF%E7%94%A8%EF%BC%9A%E9%80%9A%E7%94%A8%E6%89%8B%E5%86%8C/" title="MongoDB使用：通用手册">MongoDB使用：通用手册</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2021-07-27T08:44:20.000Z" title="发表于 2021-07-27 16:44:20">2021-07-27</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox article-meta__icon"></i><a class="article-meta__categories" href="/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/">数据库</a></span></div><div class="content">安装参考：https://www.runoob.com/mongodb/mongodb-linux-install.html
下载：https://www.mongodb.com/try/download/community
常见问题管理命令远程连接1mongo 192.168.122.12:27017/admin -u admin -p inspur@123



用户管理123# 创建admin用户&gt; db.createUser(&#123;user:&quot;admin&quot;,pwd:&quot;inspur@123&quot;,roles:[&#123;&quot;role&quot;:&quot;userAdminAnyDatabase&quot;,&quot;db&quot;:&quot;admin&quot;&#125;]&#125;)







</div></div></div><div class="recent-post-item"><div class="post_cover right_radius"><a href="/2021/07/27/MySQL%E4%BD%BF%E7%94%A8%EF%BC%9A%E9%80%9A%E7%94%A8%E6%89%8B%E5%86%8C/" title="MySQL使用：通用手册">     <img class="post_bg" src="https://devacademy.it/wp-content/uploads/2019/12/MySQL-grande.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="MySQL使用：通用手册"></a></div><div class="recent-post-info"><a class="article-title" href="/2021/07/27/MySQL%E4%BD%BF%E7%94%A8%EF%BC%9A%E9%80%9A%E7%94%A8%E6%89%8B%E5%86%8C/" title="MySQL使用：通用手册">MySQL使用：通用手册</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2021-07-27T08:10:36.000Z" title="发表于 2021-07-27 16:10:36">2021-07-27</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox article-meta__icon"></i><a class="article-meta__categories" href="/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/">数据库</a></span></div><div class="content">安装参考：https://www.runoob.com/mysql/mysql-install.html
下载：http://repo.mysql.com/
常见问题需求：初始化后，重置root密码12345678# 初始化方式：mysqld --initialize# 查看初始化密码[root@localhost log]# cat /var/log/mysqld.log  | grep &#x27;temporary password&#x27;2021-07-27T07:56:26.750789Z 6 [Note] [MY-010454] [Server] A temporary password is generated for root@localhost: t-:33aMYyaC+# 更改root密码[root@localhost log]# mysqladmin -uroot -pt-:33aMYyaC+ password inspur@123





管理命令远程连接1mysql -uroot -pinspur@123 -h 111.111.19.236



用户管 ...</div></div></div><div class="recent-post-item"><div class="post_cover left_radius"><a href="/2021/07/16/Kubernetes%E9%83%A8%E7%BD%B2%EF%BC%9AKube-VIP%E5%AE%9E%E7%8E%B0%E9%AB%98%E5%8F%AF%E7%94%A8/" title="Kubernetes部署：Kube-VIP实现高可用">     <img class="post_bg" src="https://kube-vip.io/kube-vip.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Kubernetes部署：Kube-VIP实现高可用"></a></div><div class="recent-post-info"><a class="article-title" href="/2021/07/16/Kubernetes%E9%83%A8%E7%BD%B2%EF%BC%9AKube-VIP%E5%AE%9E%E7%8E%B0%E9%AB%98%E5%8F%AF%E7%94%A8/" title="Kubernetes部署：Kube-VIP实现高可用">Kubernetes部署：Kube-VIP实现高可用</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2021-07-16T01:28:30.000Z" title="发表于 2021-07-16 09:28:30">2021-07-16</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox article-meta__icon"></i><a class="article-meta__categories" href="/categories/Kubernetes/">Kubernetes</a></span></div><div class="content">简介Kube vip为社区开源的一套Kubernetes HA解决方案，基于GO语言开发。轻量级，性能待验证。官方介绍如下：
Kubernetes Virtual IP and Load-Balancer for both control plane and Kubernetes services
The idea behind kube-vip is a small self-contained Highly-Available option for all environments, especially:

Bare-Metal
On-Prem
Edge (ARM / Raspberry PI)
Virtualisation
Pretty much anywhere else :)

Kubernetes 高可用As an alternative to the more “traditional” approach of keepalived and haproxy, kube-vip implements both management of a virtual IP and  ...</div></div></div><div class="recent-post-item"><div class="post_cover right_radius"><a href="/2021/07/15/Ceph%E4%BD%BF%E7%94%A8%EF%BC%9A%E9%80%9A%E7%94%A8%E6%89%8B%E5%86%8C/" title="Ceph使用：通用手册">     <img class="post_bg" src="https://perlubantuan.com/wp-content/uploads/2020/07/ceph_logo.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Ceph使用：通用手册"></a></div><div class="recent-post-info"><a class="article-title" href="/2021/07/15/Ceph%E4%BD%BF%E7%94%A8%EF%BC%9A%E9%80%9A%E7%94%A8%E6%89%8B%E5%86%8C/" title="Ceph使用：通用手册">Ceph使用：通用手册</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2021-07-15T01:20:32.000Z" title="发表于 2021-07-15 09:20:32">2021-07-15</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox article-meta__icon"></i><a class="article-meta__categories" href="/categories/Ceph/">Ceph</a></span></div><div class="content">常用命令Ceph管理123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354# 查看ceph状态[root@rook-ceph-tools-69f7b87b57-vwl67 /]# ceph -s  cluster:    id:     e3f8d4d7-6888-4f67-b740-5a80da34b3dc    health: HEALTH_WARN            Degraded data redundancy: 988/11616 objects degraded (8.506%), 142 pgs degraded, 192 pgs undersized            application not enabled on 2 pool(s)  services:    mon: 1 daemons, quorum a (age 7d)    mgr: a(active, since 20h)    mds: myfs: ...</div></div></div><div class="recent-post-item"><div class="post_cover left_radius"><a href="/2021/06/03/Linux%E9%85%8D%E7%BD%AE%EF%BC%9AHAProxy/" title="Linux配置：HAProxy">     <img class="post_bg" src="https://ss2.bdstatic.com/70cFvnSh_Q1YnxGkpoWK1HF6hhy/it/u=2734045988,4035371764&amp;fm=26&amp;gp=0.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Linux配置：HAProxy"></a></div><div class="recent-post-info"><a class="article-title" href="/2021/06/03/Linux%E9%85%8D%E7%BD%AE%EF%BC%9AHAProxy/" title="Linux配置：HAProxy">Linux配置：HAProxy</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2021-06-03T01:07:51.000Z" title="发表于 2021-06-03 09:07:51">2021-06-03</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox article-meta__icon"></i><a class="article-meta__categories" href="/categories/Linux/">Linux</a></span></div><div class="content">用法Backend 配置域名HAProxy 版本1.6开始支持域名解析功能
1234567891011121314151617181920212223242526resolvers mynameservers    nameserver ns1 10.96.0.10:53                                # 配置DNS服务器地址，ns1为服务器代号，可自定义    parse-resolv-conf                                           # 加载主机/etc/resolve.conf文件内的DNS配置信息    resolve_retries       3    timeout resolve       1s    timeout retry         1s    hold other           10s    hold refused         10s    hold nx              10s    hold timeout         10s    hold val ...</div></div></div><div class="recent-post-item"><div class="post_cover right_radius"><a href="/2021/05/15/Kubernetes%E9%83%A8%E7%BD%B2%EF%BC%9ARabbitMQ/" title="Kubernetes部署：RabbitMQ">     <img class="post_bg" src="https://tse2-mm.cn.bing.net/th/id/OIP.tjjNfhLYgQ-yMWTkapIfiAHaE8?pid=ImgDet&amp;rs=1" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Kubernetes部署：RabbitMQ"></a></div><div class="recent-post-info"><a class="article-title" href="/2021/05/15/Kubernetes%E9%83%A8%E7%BD%B2%EF%BC%9ARabbitMQ/" title="Kubernetes部署：RabbitMQ">Kubernetes部署：RabbitMQ</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2021-05-15T01:46:23.000Z" title="发表于 2021-05-15 09:46:23">2021-05-15</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox article-meta__icon"></i><a class="article-meta__categories" href="/categories/Kubernetes/">Kubernetes</a></span></div><div class="content">简述本文用来记录 Kubernetes 上部署的 RabbitMQ 集群遇到的一个问题。基础信息如下：

宿主机系统：Centos 7.8
Docker Server版本：18.09.6
Kubernetes版本：v1.19.0
RabbitMQ部署方式：stx-openstack 3.0
RabbitMQ镜像版本：3.7.13

问题描述3节点集群，由于非同时节点关机（如机房掉电），概率导致集群仲裁失败。故障现象是pod 为Running 状态，但是几分钟以后依然不能readay 1/1。pod日志显示” Waiting for Mnesia tables”
问题原因rabbitmq集群pod分0、1、2，共3节点。服务器掉电，最后退出的pod认为自己具有最新的数据，所以启动时应从最后退出的pod启动。但Kubernetes Statefulset维护的pod，启动方式为0 - 1 - 2顺序启动，只有0运行起来后才会运行后面的pod。如果0不是最后退出，则会启动卡住，等待最后退出的节点运行，形成死循环
解决办法pod 0 启动方式调整为强制启动，删除pod后自动重建，会强制拉起。命 ...</div></div></div><div class="recent-post-item"><div class="post_cover left_radius"><a href="/2021/05/07/Linux%E4%BD%BF%E7%94%A8%EF%BC%9A%E9%80%9A%E7%94%A8%E6%89%8B%E5%86%8C/" title="Linux使用：通用手册">     <img class="post_bg" src="https://ss2.bdstatic.com/70cFvnSh_Q1YnxGkpoWK1HF6hhy/it/u=2734045988,4035371764&amp;fm=26&amp;gp=0.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Linux使用：通用手册"></a></div><div class="recent-post-info"><a class="article-title" href="/2021/05/07/Linux%E4%BD%BF%E7%94%A8%EF%BC%9A%E9%80%9A%E7%94%A8%E6%89%8B%E5%86%8C/" title="Linux使用：通用手册">Linux使用：通用手册</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2021-05-07T03:26:39.000Z" title="发表于 2021-05-07 11:26:39">2021-05-07</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox article-meta__icon"></i><a class="article-meta__categories" href="/categories/Linux/">Linux</a></span></div><div class="content">常见场景tar.gz 压缩拆分12345678# 压缩拆分tar zcvf - k8s_install/ | split -b 3G - iECI_v210430.tar.gz.# PS:# split -b 指定拆分小包的大小# 生成iECI_v210430.tar.gz.开头，aa、ab、ac...等小包# 解压拆分cat iECI_v210430.tar.gz.* | tar zxv





常用命令</div></div></div><div class="recent-post-item"><div class="post_cover right_radius"><a href="/2021/04/23/Kubernetes%E5%BC%80%E5%8F%91%EF%BC%9AHelm/" title="Kubernetes开发：Helm">     <img class="post_bg" src="https://ss0.bdstatic.com/70cFuHSh_Q1YnxGkpoWK1HF6hhy/it/u=175322010,70959622&amp;fm=26&amp;gp=0.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Kubernetes开发：Helm"></a></div><div class="recent-post-info"><a class="article-title" href="/2021/04/23/Kubernetes%E5%BC%80%E5%8F%91%EF%BC%9AHelm/" title="Kubernetes开发：Helm">Kubernetes开发：Helm</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2021-04-23T07:06:06.000Z" title="发表于 2021-04-23 15:06:06">2021-04-23</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox article-meta__icon"></i><a class="article-meta__categories" href="/categories/Kubernetes/">Kubernetes</a></span></div><div class="content">简述Helm是Kubernetes的包管理工具，类似于操作系统中的yum，apt-get。Helm提供应用的编排部署、升级、卸载等管理操作。
快速开始
在开始之前，我们简单理解一下Helm template的基本原理。其实也很简单，Helm使用gotemplate模板语言来编写代表Kubernetes资源（deployment,service, etc…）的模板文件，并提供让用户配置这些模板变量的能力。在部署时Helm通过模板引擎将模板渲染成真正的Kubernetes资源文件，并将它们部署到节点上。

创建Helm包1helm create myapp



目录结构自动生成的模板目录结构如下：
1234567891011121314myapp├── Chart.yaml├── charts├── templates│   ├── NOTES.txt│   ├── _helpers.tpl│   ├── deployment.yaml│   ├── hpa.yaml│   ├── ingress.yaml│   ├── service.yaml│   ├── serviceaccoun ...</div></div></div><nav id="pagination"><div class="pagination"><span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><span class="space">&hellip;</span><a class="page-number" href="/page/5/">5</a><a class="extend next" rel="next" href="/page/2/"><i class="fas fa-chevron-right fa-fw"></i></a></div></nav></div><div class="aside_content" id="aside_content"><div class="card-widget card-info"><div class="card-content"><div class="card-info-avatar is-center"><img class="avatar-img" src="/img/avatar.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/><div class="author-info__name">任翌博</div><div class="author-info__description">美食，滑雪</div></div><div class="card-info-data"><div class="card-info-data-item is-center"><a href="/archives"><div class="headline">文章</div><div class="length_num">46</div></a></div><div class="card-info-data-item is-center">      <a href="/tags"><div class="headline">标签</div><div class="length_num">40</div></a></div><div class="card-info-data-item is-center"><a href="/categories"><div class="headline">分类</div><div class="length_num">15</div></a></div></div><a class="button--animated" id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/renyb2"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/renyb2" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="mailto:renybworking@163.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a></div></div></div><div class="card-widget card-announcement"><div class="card-content"><div class="item-headline"><i class="fas fa-bullhorn card-announcement-animation"></i><span>公告</span></div><div class="announcement_content">欢迎来到我的博客 ~</div></div></div><div class="card-widget card-recent-post"><div class="card-content"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-recent-item"><div class="aside-recent-post"><a class="aside-post-cover" href="/2021/09/06/OpenStack%E9%83%A8%E7%BD%B2%EF%BC%9AGlance%E5%AF%B9%E6%8E%A5Cinder/" title="OpenStack部署：Glance对接Cinder"><img class="aside-post-bg" src="https://tse1-mm.cn.bing.net/th/id/R-C.f7fb3fa204c4bca5cffe872f1647bd63?rik=qMT5LReAqlK%2b8g&amp;riu=http%3a%2f%2farticles.csdn.net%2fuploads%2fallimg%2f121012%2f145_121012152139_1.jpg&amp;ehk=lf9gNAsavUUuzA4ylpYKWJ5UC7JuypbkWW37yOFFg0Y%3d&amp;risl=&amp;pid=ImgRaw&amp;r=0" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="OpenStack部署：Glance对接Cinder"/></a><div class="aside-post-info"><a class="aside-post-title" href="/2021/09/06/OpenStack%E9%83%A8%E7%BD%B2%EF%BC%9AGlance%E5%AF%B9%E6%8E%A5Cinder/" title="OpenStack部署：Glance对接Cinder">OpenStack部署：Glance对接Cinder</a><time class="aside-post_meta post-meta-date" datetime="2021-09-06T02:10:18.000Z" title="发表于 2021-09-06 10:10:18">2021-09-06</time></div></div><div class="aside-recent-post"><a class="aside-post-cover" href="/2021/08/05/OpenStack%E9%83%A8%E7%BD%B2%EF%BC%9ATrove/" title="OpenStack部署：Trove"><img class="aside-post-bg" src="https://tse1-mm.cn.bing.net/th/id/R-C.f7fb3fa204c4bca5cffe872f1647bd63?rik=qMT5LReAqlK%2b8g&amp;riu=http%3a%2f%2farticles.csdn.net%2fuploads%2fallimg%2f121012%2f145_121012152139_1.jpg&amp;ehk=lf9gNAsavUUuzA4ylpYKWJ5UC7JuypbkWW37yOFFg0Y%3d&amp;risl=&amp;pid=ImgRaw&amp;r=0" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="OpenStack部署：Trove"/></a><div class="aside-post-info"><a class="aside-post-title" href="/2021/08/05/OpenStack%E9%83%A8%E7%BD%B2%EF%BC%9ATrove/" title="OpenStack部署：Trove">OpenStack部署：Trove</a><time class="aside-post_meta post-meta-date" datetime="2021-08-05T00:49:35.000Z" title="发表于 2021-08-05 08:49:35">2021-08-05</time></div></div><div class="aside-recent-post"><a class="aside-post-cover" href="/2021/07/27/MongoDB%E4%BD%BF%E7%94%A8%EF%BC%9A%E9%80%9A%E7%94%A8%E6%89%8B%E5%86%8C/" title="MongoDB使用：通用手册"><img class="aside-post-bg" src="https://www.viafirma.com/blog-xnoccio/wp-content/uploads/sites/3/2017/12/MongoDB.jpeg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="MongoDB使用：通用手册"/></a><div class="aside-post-info"><a class="aside-post-title" href="/2021/07/27/MongoDB%E4%BD%BF%E7%94%A8%EF%BC%9A%E9%80%9A%E7%94%A8%E6%89%8B%E5%86%8C/" title="MongoDB使用：通用手册">MongoDB使用：通用手册</a><time class="aside-post_meta post-meta-date" datetime="2021-07-27T08:44:20.000Z" title="发表于 2021-07-27 16:44:20">2021-07-27</time></div></div><div class="aside-recent-post"><a class="aside-post-cover" href="/2021/07/27/MySQL%E4%BD%BF%E7%94%A8%EF%BC%9A%E9%80%9A%E7%94%A8%E6%89%8B%E5%86%8C/" title="MySQL使用：通用手册"><img class="aside-post-bg" src="https://devacademy.it/wp-content/uploads/2019/12/MySQL-grande.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="MySQL使用：通用手册"/></a><div class="aside-post-info"><a class="aside-post-title" href="/2021/07/27/MySQL%E4%BD%BF%E7%94%A8%EF%BC%9A%E9%80%9A%E7%94%A8%E6%89%8B%E5%86%8C/" title="MySQL使用：通用手册">MySQL使用：通用手册</a><time class="aside-post_meta post-meta-date" datetime="2021-07-27T08:10:36.000Z" title="发表于 2021-07-27 16:10:36">2021-07-27</time></div></div><div class="aside-recent-post"><a class="aside-post-cover" href="/2021/07/16/Kubernetes%E9%83%A8%E7%BD%B2%EF%BC%9AKube-VIP%E5%AE%9E%E7%8E%B0%E9%AB%98%E5%8F%AF%E7%94%A8/" title="Kubernetes部署：Kube-VIP实现高可用"><img class="aside-post-bg" src="https://kube-vip.io/kube-vip.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Kubernetes部署：Kube-VIP实现高可用"/></a><div class="aside-post-info"><a class="aside-post-title" href="/2021/07/16/Kubernetes%E9%83%A8%E7%BD%B2%EF%BC%9AKube-VIP%E5%AE%9E%E7%8E%B0%E9%AB%98%E5%8F%AF%E7%94%A8/" title="Kubernetes部署：Kube-VIP实现高可用">Kubernetes部署：Kube-VIP实现高可用</a><time class="aside-post_meta post-meta-date" datetime="2021-07-16T01:28:30.000Z" title="发表于 2021-07-16 09:28:30">2021-07-16</time></div></div></div></div></div><div class="card-widget card-categories"><div class="card-content"><div class="item-headline"><i class="fas fa-folder-open"></i><span>分类</span></div><ul class="card-category-list">
            <li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Ceph/"><span class="card-category-list-name">Ceph</span><span class="card-category-list-count">1</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Docker/"><span class="card-category-list-name">Docker</span><span class="card-category-list-count">1</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Git/"><span class="card-category-list-name">Git</span><span class="card-category-list-count">1</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Hexo/"><span class="card-category-list-name">Hexo</span><span class="card-category-list-count">2</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Kubernetes/"><span class="card-category-list-name">Kubernetes</span><span class="card-category-list-count">7</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Linux/"><span class="card-category-list-name">Linux</span><span class="card-category-list-count">11</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/OpenStack/"><span class="card-category-list-name">OpenStack</span><span class="card-category-list-count">10</span></a></li><ul class="card-category-list child"><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/OpenStack/Train/"><span class="card-category-list-name">Train</span><span class="card-category-list-count">1</span></a></li></ul>
            <li class="card-category-list-item more is-center"><a class="card-category-list-link-more" href="/categories">
                <span>查看更多</span><i class="fas fa-angle-right"></i></a></li>           
            </ul></div></div><div class="card-widget card-tags"><div class="card-content"><div class="item-headline"><i class="fas fa-tags"></i><span>标签</span></div><div class="card-tag-cloud"><a href="/tags/Ceph/" style="font-size: 16px; color: #999">Ceph</a> <a href="/tags/Curl/" style="font-size: 16px; color: #999">Curl</a> <a href="/tags/Docker/" style="font-size: 16px; color: #999">Docker</a> <a href="/tags/GNOME/" style="font-size: 16px; color: #999">GNOME</a> <a href="/tags/Git/" style="font-size: 16px; color: #999">Git</a> <a href="/tags/Glance/" style="font-size: 17px; color: #999c9f">Glance</a> <a href="/tags/Google/" style="font-size: 16px; color: #999">Google</a> <a href="/tags/HA/" style="font-size: 16px; color: #999">HA</a> <a href="/tags/HAProxy/" style="font-size: 16px; color: #999">HAProxy</a> <a href="/tags/HTTPS/" style="font-size: 17px; color: #999c9f">HTTPS</a> <a href="/tags/Helm/" style="font-size: 16px; color: #999">Helm</a> <a href="/tags/Hexo/" style="font-size: 17px; color: #999c9f">Hexo</a> <a href="/tags/IPTABLES/" style="font-size: 16px; color: #999">IPTABLES</a> <a href="/tags/IPv6/" style="font-size: 16px; color: #999">IPv6</a> <a href="/tags/Jmeter/" style="font-size: 16px; color: #999">Jmeter</a> <a href="/tags/Kubernetes/" style="font-size: 20px; color: #99a4b2">Kubernetes</a> <a href="/tags/LVM/" style="font-size: 16px; color: #999">LVM</a> <a href="/tags/Linux/" style="font-size: 21px; color: #99a6b9">Linux</a> <a href="/tags/MQTT/" style="font-size: 16px; color: #999">MQTT</a> <a href="/tags/MySQL/" style="font-size: 17px; color: #999c9f">MySQL</a> <a href="/tags/OpenStack/" style="font-size: 22px; color: #99a9bf">OpenStack</a> <a href="/tags/Oracle/" style="font-size: 17px; color: #999c9f">Oracle</a> <a href="/tags/RabbitMQ/" style="font-size: 16px; color: #999">RabbitMQ</a> <a href="/tags/TiDB/" style="font-size: 16px; color: #999">TiDB</a> <a href="/tags/Train/" style="font-size: 19px; color: #99a1ac">Train</a> <a href="/tags/Trove/" style="font-size: 16px; color: #999">Trove</a> <a href="/tags/Ubuntu/" style="font-size: 16px; color: #999">Ubuntu</a> <a href="/tags/VNC/" style="font-size: 16px; color: #999">VNC</a> <a href="/tags/Vim/" style="font-size: 16px; color: #999">Vim</a> <a href="/tags/kubeadm/" style="font-size: 16px; color: #999">kubeadm</a> <a href="/tags/novaclient/" style="font-size: 16px; color: #999">novaclient</a> <a href="/tags/%E4%BB%A3%E7%90%86/" style="font-size: 16px; color: #999">代理</a> <a href="/tags/%E5%A4%A7%E9%A1%B5%E5%86%85%E5%AD%98/" style="font-size: 16px; color: #999">大页内存</a> <a href="/tags/%E5%BC%80%E5%8F%91%E5%B0%8F%E5%B7%A5%E5%85%B7/" style="font-size: 16px; color: #999">开发小工具</a> <a href="/tags/%E6%80%A7%E8%83%BD%E6%B5%8B%E8%AF%95/" style="font-size: 17px; color: #999c9f">性能测试</a> <a href="/tags/%E7%AE%97%E6%B3%95/" style="font-size: 18px; color: #999ea6">算法</a> <a href="/tags/%E7%BD%91%E5%8D%A1/" style="font-size: 16px; color: #999">网卡</a> <a href="/tags/%E7%BF%BB%E5%A2%99/" style="font-size: 16px; color: #999">翻墙</a> <a href="/tags/%E9%80%9A%E7%94%A8%E6%89%8B%E5%86%8C/" style="font-size: 18px; color: #999ea6">通用手册</a> <a href="/tags/%E9%95%9C%E5%83%8F%E5%88%B6%E4%BD%9C/" style="font-size: 16px; color: #999">镜像制作</a></div></div></div><div class="card-widget card-archives"><div class="card-content"><div class="item-headline"><i class="fas fa-archive"></i><span>归档</span></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2021/09/"><span class="card-archive-list-date">九月 2021</span><span class="card-archive-list-count">1</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2021/08/"><span class="card-archive-list-date">八月 2021</span><span class="card-archive-list-count">1</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2021/07/"><span class="card-archive-list-date">七月 2021</span><span class="card-archive-list-count">4</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2021/06/"><span class="card-archive-list-date">六月 2021</span><span class="card-archive-list-count">1</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2021/05/"><span class="card-archive-list-date">五月 2021</span><span class="card-archive-list-count">2</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2021/04/"><span class="card-archive-list-date">四月 2021</span><span class="card-archive-list-count">1</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2021/03/"><span class="card-archive-list-date">三月 2021</span><span class="card-archive-list-count">2</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2021/02/"><span class="card-archive-list-date">二月 2021</span><span class="card-archive-list-count">2</span></a></li><li class="card-archive-list-item more is-center"><a class="card-archive-list-link-more" href="/archives">
              <span>查看更多</span><i class="fas fa-angle-right"  ></i></a></li></ul></div></div><div class="card-widget card-webinfo"><div class="card-content"><div class="item-headline"><i class="fas fa-chart-line"></i><span>网站资讯</span></div><div class="webinfo"><div class="webinfo-item"><div class="webinfo-article-name">文章数目 :</div><div class="webinfo-article-count">46</div></div><div class="webinfo-item">      <div class="webinfo-site-uv-name">本站访客数 :</div><div class="webinfo-site-uv-count" id="busuanzi_value_site_uv"></div></div><div class="webinfo-item"><div class="webinfo-site-name">本站总访问量 :</div><div class="webinfo-site-pv-count" id="busuanzi_value_site_pv"></div></div></div></div></div></div></main><footer id="footer" data-type="color"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2021 By 任翌博</div></div></footer></div><section id="rightside"><div id="rightside-config-hide"><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog"></i></button><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></section><div class="search-dialog" id="local-search"><div class="search-dialog__title" id="local-search-title">本地搜索</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div></div><hr/><div id="local-search-results"><div id="local-hits"></div><div id="local-stats"><div class="local-search-stats__hr" id="hr"><span>由</span> <a target="_blank" rel="noopener" href="https://github.com/wzpan/hexo-generator-search" style="color:#49B1F5;">hexo-generator-search</a>
 <span>提供支持</span></div></div></div><span class="search-close-button"><i class="fas fa-times"></i></span></div><div id="search-mask"></div><div><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page/instantpage.min.js" type="module" defer></script><script src="/js/search/local-search.js"></script><div class="js-pjax"><script>function subtitleType () {
  if (true) { 
    var typed = new Typed("#subtitle", {
      strings: "生命不息，学习不止 ~".split(","),
      startDelay: 300,
      typeSpeed: 150,
      loop: true,
      backSpeed: 50
    })
  } else {
    document.getElementById("subtitle").innerHTML = '生'
  }
}

if (true) {
  if (typeof Typed === 'function') subtitleType()
  else $.getScript('https://cdn.jsdelivr.net/npm/typed.js/lib/typed.min.js', subtitleType)
} else {
  subtitleType()
}</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div><script defer="defer" id="ribbon_piao" mobile="false" src="/js/third-party/piao.js"></script></div></body></html>