<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>任翌博的个人博客 - Welcome to my blog...</title><meta name="description" content="美食，滑雪"><meta name="keywords" content="coding"><meta name="author" content="任翌博"><meta name="copyright" content="任翌博"><meta name="format-detection" content="telephone=no"><link rel="shortcut icon" href="/img/icon.png"><link rel="canonical" href="https://renyb2.github.io/"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//fonts.googleapis.com" crossorigin="crossorigin"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><meta property="og:type" content="website"><meta property="og:title" content="任翌博的个人博客"><meta property="og:url" content="https://renyb2.github.io/"><meta property="og:site_name" content="任翌博的个人博客"><meta property="og:description" content="美食，滑雪"><meta property="og:image" content="https://renyb2.github.io/img/avatar.png"><meta property="article:published_time" content="2022-12-10T09:44:04.081Z"><meta property="article:modified_time" content="2022-12-10T09:44:04.081Z"><meta name="twitter:card" content="summary"><script>var activateDarkMode = function () {
  document.documentElement.setAttribute('data-theme', 'dark')
  if (document.querySelector('meta[name="theme-color"]') !== null) {
    document.querySelector('meta[name="theme-color"]').setAttribute('content', '#000')
  }
}
var activateLightMode = function () {
  document.documentElement.setAttribute('data-theme', 'light')
  if (document.querySelector('meta[name="theme-color"]') !== null) {
    document.querySelector('meta[name="theme-color"]').setAttribute('content', '#fff')
  }
}

var getCookies = function (name) {
  const value = `; ${document.cookie}`
  const parts = value.split(`; ${name}=`)
  if (parts.length === 2) return parts.pop().split(';').shift()
}

var autoChangeMode = 'false'
var t = getCookies('theme')
if (autoChangeMode === '1') {
  var isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
  var isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
  var isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
  var hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

  if (t === undefined) {
    if (isLightMode) activateLightMode()
    else if (isDarkMode) activateDarkMode()
    else if (isNotSpecified || hasNoSupport) {
      console.log('You specified no preference for a color scheme or your browser does not support it. I Schedule dark mode during night time.')
      var now = new Date()
      var hour = now.getHours()
      var isNight = hour <= 6 || hour >= 18
      isNight ? activateDarkMode() : activateLightMode()
    }
    window.matchMedia('(prefers-color-scheme: dark)').addListener(function (e) {
      if (Cookies.get('theme') === undefined) {
        e.matches ? activateDarkMode() : activateLightMode()
      }
    })
  } else if (t === 'light') activateLightMode()
  else activateDarkMode()
} else if (autoChangeMode === '2') {
  now = new Date()
  hour = now.getHours()
  isNight = hour <= 6 || hour >= 18
  if (t === undefined) isNight ? activateDarkMode() : activateLightMode()
  else if (t === 'light') activateLightMode()
  else activateDarkMode()
} else {
  if (t === 'dark') activateDarkMode()
  else if (t === 'light') activateLightMode()
}</script><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web&amp;display=swap"><script>var GLOBAL_CONFIG = { 
  root: '/',
  hexoversion: '5.1.1',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"找不到您查询的内容：${query}"}},
  translate: undefined,
  noticeOutdate: undefined,
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  bookmark: {
    message_prev: '按',
    message_next: '键将本页加入书签'
  },
  runtime_unit: '天',
  runtime: false,
  copyright: {"limitCount":50,"languages":{"author":"作者: 任翌博","link":"链接: ","source":"来源: 任翌博的个人博客","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。"}},
  ClickShowText: undefined,
  medium_zoom: false,
  fancybox: true,
  Snackbar: undefined,
  justifiedGallery: {
    js: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
    css: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
  },
  baiduPush: false,
  highlightCopy: true,
  highlightLang: true,
  isPhotoFigcaption: false,
  islazyload: false,
  isanchor: false    
}</script><script id="config_change">var GLOBAL_CONFIG_SITE = { 
  isPost: false,
  isHome: true,
  isHighlightShrink: false,
  isSidebar: false,
  postUpdate: '2022-12-10 17:44:04'
}</script><noscript><style>
#nav {
  opacity: 1
}
.justified-gallery img {
  opacity: 1
}
</style></noscript><meta name="generator" content="Hexo 5.1.1"><link rel="alternate" href="/atom.xml" title="任翌博的个人博客" type="application/atom+xml">
</head><body><div id="mobile-sidebar"><div id="menu_mask"></div><div id="mobile-sidebar-menus"><div class="mobile_author_icon"><img class="avatar-img" src="/img/avatar.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="mobile_post_data"><div class="mobile_data_item is-center"><div class="mobile_data_link"><a href="/archives/"><div class="headline">文章</div><div class="length_num">85</div></a></div></div><div class="mobile_data_item is-center">      <div class="mobile_data_link"><a href="/tags/"><div class="headline">标签</div><div class="length_num">64</div></a></div></div><div class="mobile_data_item is-center">     <div class="mobile_data_link"><a href="/categories/"><div class="headline">分类</div><div class="length_num">18</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div></div></div><div id="body-wrap"><header class="full_page" id="page-header" style="background-image: url(https://pic4.zhimg.com/v2-5bde4b779cbcb801ab41d79509231ec4_r.jpg)"><nav id="nav"><span class="pull-left" id="blog_name"><a class="blog_title" id="site-name" href="/">任翌博的个人博客</a></span><span class="pull-right menus"><div id="search_button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div><span class="toggle-menu close"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></span></span></nav><div id="site-info"><h1 id="site_title">任翌博的个人博客</h1><div id="site_subtitle"><span id="subtitle"></span></div><div id="site_social_icons"><a class="social-icon" href="https://github.com/renyb2" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="mailto:renybworking@163.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a></div></div><div id="scroll_down"><i class="fas fa-angle-down scroll-down-effects"></i></div></header><main class="layout_page" id="content-inner"><div class="recent-posts" id="recent-posts"><div class="recent-post-item"><div class="post_cover left_radius"><a href="/2022/12/10/NVIDIA%E7%A0%94%E5%8F%91%EF%BC%9AvGPU-Unlock/" title="NVIDIA研发：vGPU Unlock">     <img class="post_bg" src="https://www.numerama.com/content/uploads/2019/05/nvidia-logo.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="NVIDIA研发：vGPU Unlock"></a></div><div class="recent-post-info"><a class="article-title" href="/2022/12/10/NVIDIA%E7%A0%94%E5%8F%91%EF%BC%9AvGPU-Unlock/" title="NVIDIA研发：vGPU Unlock">NVIDIA研发：vGPU Unlock</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2022-12-10T08:17:22.000Z" title="发表于 2022-12-10 16:17:22">2022-12-10</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox article-meta__icon"></i><a class="article-meta__categories" href="/categories/Accelerator/">Accelerator</a></span></div><div class="content">简介This tool enables the use of Geforce and Quadro GPUs with the NVIDIA vGPU graphics virtualization technology. NVIDIA vGPU normally only supports a few datacenter Teslas and professional Quadro GPUs by design, but not consumer graphics cards through a software limitation. This vgpu_unlock tool aims to remove this limitation on Linux based systems, thus enabling most Maxwell, Pascal, Volta (untested), and Turing based GPUs to use the vGPU technology. Ampere support is currently a work in progres ...</div></div></div><div class="recent-post-item"><div class="post_cover right_radius"><a href="/2022/11/30/NVIDIA%E4%BD%BF%E7%94%A8%EF%BC%9ACUDA%E5%AE%89%E8%A3%85/" title="NVIDIA使用：CUDA安装">     <img class="post_bg" src="https://www.numerama.com/content/uploads/2019/05/nvidia-logo.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="NVIDIA使用：CUDA安装"></a></div><div class="recent-post-info"><a class="article-title" href="/2022/11/30/NVIDIA%E4%BD%BF%E7%94%A8%EF%BC%9ACUDA%E5%AE%89%E8%A3%85/" title="NVIDIA使用：CUDA安装">NVIDIA使用：CUDA安装</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2022-11-30T09:07:46.000Z" title="发表于 2022-11-30 17:07:46">2022-11-30</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox article-meta__icon"></i><a class="article-meta__categories" href="/categories/Accelerator/">Accelerator</a></span></div><div class="content">安装资源包下载根据NVIDIA GPU Driver Version，在官网寻找合适的CUDA版本：Release Notes :: CUDA Toolkit Documentation
CUDA Toolkit下载地址：CUDA Toolkit 11.2 Downloads | NVIDIA Developer
cuDNN下载地址：官方cuDNN下载



CUDA Toolkit
Toolkit Driver Version




—
Linux x86_64 Driver Version
Windows x86_64 Driver Version


CUDA 11.8 GA
&gt;=520.61.05
&gt;=522.06


CUDA 11.7 Update 1
&gt;=515.48.07
&gt;=516.31


CUDA 11.7 GA
&gt;=515.43.04
&gt;=516.01


CUDA 11.6 Update 2
&gt;=510.47.03
&gt;=511.65


CUDA 11.6 Update 1
&gt;=510.47.03
&gt ...</div></div></div><div class="recent-post-item"><div class="post_cover left_radius"><a href="/2022/11/30/Libvirt%E7%A0%94%E5%8F%91%EF%BC%9A9p-virtio/" title="Libvirt研发：9p virtio">     <img class="post_bg" src="https://pic4.zhimg.com/v2-13ad0113980b93e8f8841ca1f6542157_r.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Libvirt研发：9p virtio"></a></div><div class="recent-post-info"><a class="article-title" href="/2022/11/30/Libvirt%E7%A0%94%E5%8F%91%EF%BC%9A9p-virtio/" title="Libvirt研发：9p virtio">Libvirt研发：9p virtio</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2022-11-30T09:04:48.000Z" title="发表于 2022-11-30 17:04:48">2022-11-30</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox article-meta__icon"></i><a class="article-meta__categories" href="/categories/Libvirt/">Libvirt</a></span></div><div class="content">简介主要需求是透传主机目录至虚机内部使用，9p virtio可以提供该能力，9p的官方介绍如下：
With QEMU’s 9pfs you can create virtual filesystem devices (virtio-9p-device) and expose them to guests, which essentially means that a certain directory on host machine is made directly accessible by a guest OS as a pass-through file system by using the 9P network protocol for communication between host and guest, if desired even accessible, shared by several guests simultaniously.
This section details the steps involved in setting up VirtFS (Pla ...</div></div></div><div class="recent-post-item"><div class="post_cover right_radius"><a href="/2022/11/30/Libvirt%E7%A0%94%E5%8F%91%EF%BC%9AQemu%E7%BC%96%E8%AF%91/" title="Libvirt研发：Qemu编译">     <img class="post_bg" src="https://pic4.zhimg.com/v2-13ad0113980b93e8f8841ca1f6542157_r.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Libvirt研发：Qemu编译"></a></div><div class="recent-post-info"><a class="article-title" href="/2022/11/30/Libvirt%E7%A0%94%E5%8F%91%EF%BC%9AQemu%E7%BC%96%E8%AF%91/" title="Libvirt研发：Qemu编译">Libvirt研发：Qemu编译</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2022-11-30T05:49:49.000Z" title="发表于 2022-11-30 13:49:49">2022-11-30</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox article-meta__icon"></i><a class="article-meta__categories" href="/categories/Libvirt/">Libvirt</a></span></div><div class="content">简介QEMU is a generic and open source machine &amp; userspace emulator and virtualizer.
QEMU is capable of emulating a complete machine in software without any need for hardware virtualization support. By using dynamic translation, it achieves very good performance. QEMU can also integrate with the Xen and KVM hypervisors to provide emulated hardware while allowing the hypervisor to manage the CPU. With hypervisor support, QEMU can achieve near native performance for CPUs. When QEMU emulates CPUs  ...</div></div></div><div class="recent-post-item"><div class="post_cover left_radius"><a href="/2022/11/22/NVIDIA%E4%BD%BF%E7%94%A8%EF%BC%9AGPU%E9%A9%B1%E5%8A%A8%E5%AE%89%E8%A3%85/" title="NVIDIA使用：GPU驱动安装">     <img class="post_bg" src="https://www.numerama.com/content/uploads/2019/05/nvidia-logo.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="NVIDIA使用：GPU驱动安装"></a></div><div class="recent-post-info"><a class="article-title" href="/2022/11/22/NVIDIA%E4%BD%BF%E7%94%A8%EF%BC%9AGPU%E9%A9%B1%E5%8A%A8%E5%AE%89%E8%A3%85/" title="NVIDIA使用：GPU驱动安装">NVIDIA使用：GPU驱动安装</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2022-11-22T08:12:56.000Z" title="发表于 2022-11-22 16:12:56">2022-11-22</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox article-meta__icon"></i><a class="article-meta__categories" href="/categories/Accelerator/">Accelerator</a></span></div><div class="content">安装安装依赖环境要装的两个依赖分别是：gcc、kernel-devel，其中需要注意的是，kernel-devel的版本需要与当前内核的版本一致，不然后面会出现找不到文件的情况。
1）查看我的内核版本：
12[root@k104 vGPU]# uname -r3.10.0-1127.el7.x86_64

2）查看一下可以安装的版本，安装对应内核版本：
12[root@k104 vGPU]# yum list | grep kernel-develkernel-devel.x86_64                       3.10.0-1127.el7              @/kernel-devel-3.10.0-1127.el7.x86_64

3）安装依赖
1yum install kernel-devel-$(uname -r) gcc dkms -y

屏蔽系统自带的nouveau（重启生效）123456789101112echo &quot;blacklist nouveau&quot; &gt;&gt; /lib/modprobe.d/dist-blackl ...</div></div></div><div class="recent-post-item"><div class="post_cover right_radius"><a href="/2022/11/22/NVIDIA%E7%A0%94%E5%8F%91%EF%BC%9AGPU-Manager%E9%83%A8%E7%BD%B2/" title="NVIDIA研发：GPU Manager部署">     <img class="post_bg" src="https://www.numerama.com/content/uploads/2019/05/nvidia-logo.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="NVIDIA研发：GPU Manager部署"></a></div><div class="recent-post-info"><a class="article-title" href="/2022/11/22/NVIDIA%E7%A0%94%E5%8F%91%EF%BC%9AGPU-Manager%E9%83%A8%E7%BD%B2/" title="NVIDIA研发：GPU Manager部署">NVIDIA研发：GPU Manager部署</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2022-11-22T03:13:04.000Z" title="发表于 2022-11-22 11:13:04">2022-11-22</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox article-meta__icon"></i><a class="article-meta__categories" href="/categories/Accelerator/">Accelerator</a></span></div><div class="content">简介本文介绍GPU Manager的部署流程，其原理本文不做介绍，原理可参考：论文笔记《GaiaGPU：Sharing GPUs in Container Clouds》
源码地址1234# Githubgpu-quota-admission     https://github.com/tkestack/gpu-admissiongpu-manager             https://github.com/tkestack/gpu-managervcuda-controller        https://github.com/tkestack/vcuda-controller

环境信息123456789[root@k104 vGPU]# uname -aLinux k104 3.10.0-1127.el7.x86_64 #1 SMP Tue Mar 31 23:36:51 UTC 2020 x86_64 x86_64 x86_64 GNU/Linux[root@k104 vGPU]# cat /etc/centos-releaseCentOS Linux release ...</div></div></div><div class="recent-post-item"><div class="post_cover left_radius"><a href="/2022/11/16/Chrome%E4%BD%BF%E7%94%A8%EF%BC%9A%E9%80%9A%E7%94%A8%E6%89%8B%E5%86%8C/" title="Chrome使用：通用手册">     <img class="post_bg" src="https://cdn0.tnwcdn.com/wp-content/blogs.dir/1/files/2016/08/Chrome-OS.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Chrome使用：通用手册"></a></div><div class="recent-post-info"><a class="article-title" href="/2022/11/16/Chrome%E4%BD%BF%E7%94%A8%EF%BC%9A%E9%80%9A%E7%94%A8%E6%89%8B%E5%86%8C/" title="Chrome使用：通用手册">Chrome使用：通用手册</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2022-11-16T07:50:18.000Z" title="发表于 2022-11-16 15:50:18">2022-11-16</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox article-meta__icon"></i><a class="article-meta__categories" href="/categories/%E7%A0%94%E5%8F%91%E5%B7%A5%E5%85%B7/">研发工具</a></span></div><div class="content">常见问题NET::ERR_CERT_INVALID

在chrome该页面上，直接键盘敲入这12个字符：thisisunsafe
注意：鼠标点击当前页面任意位置，让页面处于最上层即可输入
</div></div></div><div class="recent-post-item"><div class="post_cover right_radius"><a href="/2022/11/15/OpenStack%E7%A0%94%E5%8F%91%EF%BC%9Acinderclient/" title="OpenStack研发：cinderclient">     <img class="post_bg" src="https://www.leixue.com/uploads/2019/07/OpenStack.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="OpenStack研发：cinderclient"></a></div><div class="recent-post-info"><a class="article-title" href="/2022/11/15/OpenStack%E7%A0%94%E5%8F%91%EF%BC%9Acinderclient/" title="OpenStack研发：cinderclient">OpenStack研发：cinderclient</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2022-11-15T09:42:02.000Z" title="发表于 2022-11-15 17:42:02">2022-11-15</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox article-meta__icon"></i><a class="article-meta__categories" href="/categories/OpenStack/">OpenStack</a></span></div><div class="content">研发环境
python：2.7.5
python-cinderclient   5.0.2

源码cinderclient调用方法123456789101112131415161718192021222324252627from keystoneauth1 import identityfrom keystoneauth1 import sessionfrom cinderclient import clientusername=&#x27;admin&#x27;password=&#x27;Inspur@123&#x27;project_name=&#x27;admin&#x27;project_domain_id=&#x27;default&#x27;user_domain_id=&#x27;default&#x27;auth_url=&#x27;http://111.111.9.207:35357/v3&#x27;CINDER_API_VERSION = &quot;3.0&quot;auth = identity.Password(auth_url=auth_url,      ...</div></div></div><div class="recent-post-item"><div class="post_cover left_radius"><a href="/2022/11/15/Libvirt%E7%A0%94%E5%8F%91%EF%BC%9A%E8%99%9A%E6%8B%9F%E5%8C%96%E7%89%B9%E6%80%A7%E6%A3%80%E6%B5%8B/" title="Libvirt研发：虚拟化特性检测">     <img class="post_bg" src="https://pic4.zhimg.com/v2-13ad0113980b93e8f8841ca1f6542157_r.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Libvirt研发：虚拟化特性检测"></a></div><div class="recent-post-info"><a class="article-title" href="/2022/11/15/Libvirt%E7%A0%94%E5%8F%91%EF%BC%9A%E8%99%9A%E6%8B%9F%E5%8C%96%E7%89%B9%E6%80%A7%E6%A3%80%E6%B5%8B/" title="Libvirt研发：虚拟化特性检测">Libvirt研发：虚拟化特性检测</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2022-11-15T03:35:10.000Z" title="发表于 2022-11-15 11:35:10">2022-11-15</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox article-meta__icon"></i><a class="article-meta__categories" href="/categories/Libvirt/">Libvirt</a></span></div><div class="content">简介目前虚拟机环境检测有两个金标准，分别是Al-khaser和Pafish。这两个开源项目几乎一网打尽了所有公开常见的VM检测技术。
国外SANS安全组织的研究人员总结出当前各种虚拟机检测手段不外乎以下四类：●    搜索虚拟环境中的进程，文件系统，注册表；●    搜索虚拟环境中的内存●    搜索虚拟环境中的特定虚拟硬件●    搜索虚拟环境中的特定处理器指令和功能
Al-khaserGithub：https://github.com/LordNoteworthy/al-khaser
PafishGithub：https://github.com/a0rtega/pafish
12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879808182838485868788899091929394959697* Pafish (Paranoid Fi ...</div></div></div><div class="recent-post-item"><div class="post_cover right_radius"><a href="/2022/11/10/Libvirt%E7%A0%94%E5%8F%91%EF%BC%9A%E5%B1%8F%E8%94%BD%E8%99%9A%E6%8B%9F%E5%8C%96%E7%89%B9%E6%80%A7/" title="Libvirt研发：屏蔽虚拟化特性">     <img class="post_bg" src="https://pic4.zhimg.com/v2-13ad0113980b93e8f8841ca1f6542157_r.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Libvirt研发：屏蔽虚拟化特性"></a></div><div class="recent-post-info"><a class="article-title" href="/2022/11/10/Libvirt%E7%A0%94%E5%8F%91%EF%BC%9A%E5%B1%8F%E8%94%BD%E8%99%9A%E6%8B%9F%E5%8C%96%E7%89%B9%E6%80%A7/" title="Libvirt研发：屏蔽虚拟化特性">Libvirt研发：屏蔽虚拟化特性</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2022-11-10T08:30:45.000Z" title="发表于 2022-11-10 16:30:45">2022-11-10</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox article-meta__icon"></i><a class="article-meta__categories" href="/categories/Libvirt/">Libvirt</a></span></div><div class="content">简介记录如何解决虚机内软件、游戏启动报错：Sorry, This Application Cannot Run Under A Virtual Machine
关键点
虚拟化检测点可参考文档：操作系统能否知道自己处于虚拟机中?

CPU model and topology
禁用CPU的hypervisor功能。
使用host-passthrough模式，透传主机CPU能力。

参考xml相关配置：
123456789...&lt;cpu mode=&#x27;host-passthrough&#x27; check=&#x27;none&#x27;&gt;  &lt;topology sockets=&#x27;2&#x27; cores=&#x27;2&#x27; threads=&#x27;2&#x27;/&gt;  &lt;feature policy=&#x27;disable&#x27; name=&#x27;hypervisor&#x27;/&gt;  &lt;numa&gt;    &lt;cell id=&#x27;0&#x27; cpus=&#x27;0-7&#x2 ...</div></div></div><nav id="pagination"><div class="pagination"><span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><span class="space">&hellip;</span><a class="page-number" href="/page/9/">9</a><a class="extend next" rel="next" href="/page/2/"><i class="fas fa-chevron-right fa-fw"></i></a></div></nav></div><div class="aside_content" id="aside_content"><div class="card-widget card-info"><div class="card-content"><div class="card-info-avatar is-center"><img class="avatar-img" src="/img/avatar.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/><div class="author-info__name">任翌博</div><div class="author-info__description">美食，滑雪</div></div><div class="card-info-data"><div class="card-info-data-item is-center"><a href="/archives"><div class="headline">文章</div><div class="length_num">85</div></a></div><div class="card-info-data-item is-center">      <a href="/tags"><div class="headline">标签</div><div class="length_num">64</div></a></div><div class="card-info-data-item is-center"><a href="/categories"><div class="headline">分类</div><div class="length_num">18</div></a></div></div><a class="button--animated" id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/renyb2"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/renyb2" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="mailto:renybworking@163.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a></div></div></div><div class="card-widget card-announcement"><div class="card-content"><div class="item-headline"><i class="fas fa-bullhorn card-announcement-animation"></i><span>公告</span></div><div class="announcement_content">欢迎来到我的博客 ~</div></div></div><div class="card-widget card-recent-post"><div class="card-content"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-recent-item"><div class="aside-recent-post"><a class="aside-post-cover" href="/2022/12/10/NVIDIA%E7%A0%94%E5%8F%91%EF%BC%9AvGPU-Unlock/" title="NVIDIA研发：vGPU Unlock"><img class="aside-post-bg" src="https://www.numerama.com/content/uploads/2019/05/nvidia-logo.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="NVIDIA研发：vGPU Unlock"/></a><div class="aside-post-info"><a class="aside-post-title" href="/2022/12/10/NVIDIA%E7%A0%94%E5%8F%91%EF%BC%9AvGPU-Unlock/" title="NVIDIA研发：vGPU Unlock">NVIDIA研发：vGPU Unlock</a><time class="aside-post_meta post-meta-date" datetime="2022-12-10T08:17:22.000Z" title="发表于 2022-12-10 16:17:22">2022-12-10</time></div></div><div class="aside-recent-post"><a class="aside-post-cover" href="/2022/11/30/NVIDIA%E4%BD%BF%E7%94%A8%EF%BC%9ACUDA%E5%AE%89%E8%A3%85/" title="NVIDIA使用：CUDA安装"><img class="aside-post-bg" src="https://www.numerama.com/content/uploads/2019/05/nvidia-logo.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="NVIDIA使用：CUDA安装"/></a><div class="aside-post-info"><a class="aside-post-title" href="/2022/11/30/NVIDIA%E4%BD%BF%E7%94%A8%EF%BC%9ACUDA%E5%AE%89%E8%A3%85/" title="NVIDIA使用：CUDA安装">NVIDIA使用：CUDA安装</a><time class="aside-post_meta post-meta-date" datetime="2022-11-30T09:07:46.000Z" title="发表于 2022-11-30 17:07:46">2022-11-30</time></div></div><div class="aside-recent-post"><a class="aside-post-cover" href="/2022/11/30/Libvirt%E7%A0%94%E5%8F%91%EF%BC%9A9p-virtio/" title="Libvirt研发：9p virtio"><img class="aside-post-bg" src="https://pic4.zhimg.com/v2-13ad0113980b93e8f8841ca1f6542157_r.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Libvirt研发：9p virtio"/></a><div class="aside-post-info"><a class="aside-post-title" href="/2022/11/30/Libvirt%E7%A0%94%E5%8F%91%EF%BC%9A9p-virtio/" title="Libvirt研发：9p virtio">Libvirt研发：9p virtio</a><time class="aside-post_meta post-meta-date" datetime="2022-11-30T09:04:48.000Z" title="发表于 2022-11-30 17:04:48">2022-11-30</time></div></div><div class="aside-recent-post"><a class="aside-post-cover" href="/2022/11/30/Libvirt%E7%A0%94%E5%8F%91%EF%BC%9AQemu%E7%BC%96%E8%AF%91/" title="Libvirt研发：Qemu编译"><img class="aside-post-bg" src="https://pic4.zhimg.com/v2-13ad0113980b93e8f8841ca1f6542157_r.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Libvirt研发：Qemu编译"/></a><div class="aside-post-info"><a class="aside-post-title" href="/2022/11/30/Libvirt%E7%A0%94%E5%8F%91%EF%BC%9AQemu%E7%BC%96%E8%AF%91/" title="Libvirt研发：Qemu编译">Libvirt研发：Qemu编译</a><time class="aside-post_meta post-meta-date" datetime="2022-11-30T05:49:49.000Z" title="发表于 2022-11-30 13:49:49">2022-11-30</time></div></div><div class="aside-recent-post"><a class="aside-post-cover" href="/2022/11/22/NVIDIA%E4%BD%BF%E7%94%A8%EF%BC%9AGPU%E9%A9%B1%E5%8A%A8%E5%AE%89%E8%A3%85/" title="NVIDIA使用：GPU驱动安装"><img class="aside-post-bg" src="https://www.numerama.com/content/uploads/2019/05/nvidia-logo.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="NVIDIA使用：GPU驱动安装"/></a><div class="aside-post-info"><a class="aside-post-title" href="/2022/11/22/NVIDIA%E4%BD%BF%E7%94%A8%EF%BC%9AGPU%E9%A9%B1%E5%8A%A8%E5%AE%89%E8%A3%85/" title="NVIDIA使用：GPU驱动安装">NVIDIA使用：GPU驱动安装</a><time class="aside-post_meta post-meta-date" datetime="2022-11-22T08:12:56.000Z" title="发表于 2022-11-22 16:12:56">2022-11-22</time></div></div></div></div></div><div class="card-widget card-categories"><div class="card-content"><div class="item-headline"><i class="fas fa-folder-open"></i><span>分类</span></div><ul class="card-category-list">
            <li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Accelerator/"><span class="card-category-list-name">Accelerator</span><span class="card-category-list-count">7</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Algorithm/"><span class="card-category-list-name">Algorithm</span><span class="card-category-list-count">3</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Ceph/"><span class="card-category-list-name">Ceph</span><span class="card-category-list-count">1</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Docker/"><span class="card-category-list-name">Docker</span><span class="card-category-list-count">1</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Git/"><span class="card-category-list-name">Git</span><span class="card-category-list-count">1</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Hexo/"><span class="card-category-list-name">Hexo</span><span class="card-category-list-count">2</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Kubernetes/"><span class="card-category-list-name">Kubernetes</span><span class="card-category-list-count">7</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Libvirt/"><span class="card-category-list-name">Libvirt</span><span class="card-category-list-count">5</span></a></li>
            <li class="card-category-list-item more is-center"><a class="card-category-list-link-more" href="/categories">
                <span>查看更多</span><i class="fas fa-angle-right"></i></a></li>           
            </ul></div></div><div class="card-widget card-tags"><div class="card-content"><div class="item-headline"><i class="fas fa-tags"></i><span>标签</span></div><div class="card-tag-cloud"><a href="/tags/Accelerator/" style="font-size: 20.67px; color: #99a5b7">Accelerator</a> <a href="/tags/ActiveMQ/" style="font-size: 16px; color: #999">ActiveMQ</a> <a href="/tags/Algorithm/" style="font-size: 17.33px; color: #999da1">Algorithm</a> <a href="/tags/CLI/" style="font-size: 17.33px; color: #999da1">CLI</a> <a href="/tags/CPU/" style="font-size: 16.67px; color: #999b9d">CPU</a> <a href="/tags/Ceph/" style="font-size: 16px; color: #999">Ceph</a> <a href="/tags/Chrome/" style="font-size: 16.67px; color: #999b9d">Chrome</a> <a href="/tags/Curl/" style="font-size: 16px; color: #999">Curl</a> <a href="/tags/Cyborg/" style="font-size: 17.33px; color: #999da1">Cyborg</a> <a href="/tags/Docker/" style="font-size: 16px; color: #999">Docker</a> <a href="/tags/GNOME/" style="font-size: 16px; color: #999">GNOME</a> <a href="/tags/Galera/" style="font-size: 16px; color: #999">Galera</a> <a href="/tags/Git/" style="font-size: 16px; color: #999">Git</a> <a href="/tags/Glance/" style="font-size: 17.33px; color: #999da1">Glance</a> <a href="/tags/Google/" style="font-size: 16.67px; color: #999b9d">Google</a> <a href="/tags/HA/" style="font-size: 16px; color: #999">HA</a> <a href="/tags/HAProxy/" style="font-size: 16px; color: #999">HAProxy</a> <a href="/tags/HTTPS/" style="font-size: 16.67px; color: #999b9d">HTTPS</a> <a href="/tags/Helm/" style="font-size: 16px; color: #999">Helm</a> <a href="/tags/Hexo/" style="font-size: 16.67px; color: #999b9d">Hexo</a> <a href="/tags/IPTABLES/" style="font-size: 16px; color: #999">IPTABLES</a> <a href="/tags/IPv6/" style="font-size: 16px; color: #999">IPv6</a> <a href="/tags/Jmeter/" style="font-size: 16px; color: #999">Jmeter</a> <a href="/tags/Jupyter/" style="font-size: 16px; color: #999">Jupyter</a> <a href="/tags/KVM/" style="font-size: 18.67px; color: #99a0aa">KVM</a> <a href="/tags/Kubernetes/" style="font-size: 20px; color: #99a4b2">Kubernetes</a> <a href="/tags/LVM/" style="font-size: 16px; color: #999">LVM</a> <a href="/tags/Libvirt/" style="font-size: 18.67px; color: #99a0aa">Libvirt</a> <a href="/tags/Linux/" style="font-size: 21.33px; color: #99a7bb">Linux</a> <a href="/tags/MQTT/" style="font-size: 16px; color: #999">MQTT</a> <a href="/tags/MongoDB/" style="font-size: 16px; color: #999">MongoDB</a> <a href="/tags/MySQL/" style="font-size: 19.33px; color: #99a2ae">MySQL</a> <a href="/tags/NVIDIA/" style="font-size: 20px; color: #99a4b2">NVIDIA</a> <a href="/tags/Nginx/" style="font-size: 16px; color: #999">Nginx</a> <a href="/tags/Nova/" style="font-size: 16px; color: #999">Nova</a> <a href="/tags/OpenStack/" style="font-size: 22px; color: #99a9bf">OpenStack</a> <a href="/tags/Oracle/" style="font-size: 18px; color: #999ea6">Oracle</a> <a href="/tags/Percona/" style="font-size: 16.67px; color: #999b9d">Percona</a> <a href="/tags/PostgreSQL/" style="font-size: 16px; color: #999">PostgreSQL</a> <a href="/tags/Python/" style="font-size: 16px; color: #999">Python</a></div></div></div><div class="card-widget card-archives"><div class="card-content"><div class="item-headline"><i class="fas fa-archive"></i><span>归档</span></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/12/"><span class="card-archive-list-date">十二月 2022</span><span class="card-archive-list-count">1</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/11/"><span class="card-archive-list-date">十一月 2022</span><span class="card-archive-list-count">9</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/08/"><span class="card-archive-list-date">八月 2022</span><span class="card-archive-list-count">1</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/07/"><span class="card-archive-list-date">七月 2022</span><span class="card-archive-list-count">4</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/06/"><span class="card-archive-list-date">六月 2022</span><span class="card-archive-list-count">1</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/05/"><span class="card-archive-list-date">五月 2022</span><span class="card-archive-list-count">3</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/04/"><span class="card-archive-list-date">四月 2022</span><span class="card-archive-list-count">5</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/03/"><span class="card-archive-list-date">三月 2022</span><span class="card-archive-list-count">3</span></a></li><li class="card-archive-list-item more is-center"><a class="card-archive-list-link-more" href="/archives">
              <span>查看更多</span><i class="fas fa-angle-right"  ></i></a></li></ul></div></div><div class="card-widget card-webinfo"><div class="card-content"><div class="item-headline"><i class="fas fa-chart-line"></i><span>网站资讯</span></div><div class="webinfo"><div class="webinfo-item"><div class="webinfo-article-name">文章数目 :</div><div class="webinfo-article-count">85</div></div><div class="webinfo-item">      <div class="webinfo-site-uv-name">本站访客数 :</div><div class="webinfo-site-uv-count" id="busuanzi_value_site_uv"></div></div><div class="webinfo-item"><div class="webinfo-site-name">本站总访问量 :</div><div class="webinfo-site-pv-count" id="busuanzi_value_site_pv"></div></div></div></div></div></div></main><footer id="footer" data-type="color"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2022 By 任翌博</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><section id="rightside"><div id="rightside-config-hide"><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog"></i></button><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></section><div class="search-dialog" id="local-search"><div class="search-dialog__title" id="local-search-title">本地搜索</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div></div><hr/><div id="local-search-results"><div id="local-hits"></div><div id="local-stats"><div class="local-search-stats__hr" id="hr"><span>由</span> <a target="_blank" rel="noopener" href="https://github.com/wzpan/hexo-generator-search" style="color:#49B1F5;">hexo-generator-search</a>
 <span>提供支持</span></div></div></div><span class="search-close-button"><i class="fas fa-times"></i></span></div><div id="search-mask"></div><div><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page/instantpage.min.js" type="module" defer></script><script src="/js/search/local-search.js"></script><div class="js-pjax"><script>function subtitleType () {
  if (true) { 
    var typed = new Typed("#subtitle", {
      strings: "生命不息，学习不止 ~".split(","),
      startDelay: 300,
      typeSpeed: 150,
      loop: true,
      backSpeed: 50
    })
  } else {
    document.getElementById("subtitle").innerHTML = '生'
  }
}

if (true) {
  if (typeof Typed === 'function') subtitleType()
  else $.getScript('https://cdn.jsdelivr.net/npm/typed.js/lib/typed.min.js', subtitleType)
} else {
  subtitleType()
}</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div><canvas class="fireworks"></canvas><script src="https://cdn.jsdelivr.net/npm/animejs@latest/anime.min.js"></script><script src="/js/third-party/fireworks.js"></script><script defer="defer" id="ribbon_piao" mobile="false" src="/js/third-party/piao.js"></script></div></body></html>