<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>任翌博的个人博客 - Welcome to my blog...</title><meta name="description" content="美食，滑雪"><meta name="keywords" content="coding"><meta name="author" content="任翌博"><meta name="copyright" content="任翌博"><meta name="format-detection" content="telephone=no"><link rel="shortcut icon" href="/img/icon.png"><link rel="canonical" href="https://renyb2.github.io/page/2/"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//fonts.googleapis.com" crossorigin="crossorigin"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><meta property="og:type" content="website"><meta property="og:title" content="任翌博的个人博客"><meta property="og:url" content="https://renyb2.github.io/page/2/"><meta property="og:site_name" content="任翌博的个人博客"><meta property="og:description" content="美食，滑雪"><meta property="og:image" content="https://renyb2.github.io/img/avatar.png"><meta property="article:published_time" content="2021-09-24T01:59:37.239Z"><meta property="article:modified_time" content="2021-09-24T01:59:37.239Z"><meta name="twitter:card" content="summary"><script>var activateDarkMode = function () {
  document.documentElement.setAttribute('data-theme', 'dark')
  if (document.querySelector('meta[name="theme-color"]') !== null) {
    document.querySelector('meta[name="theme-color"]').setAttribute('content', '#000')
  }
}
var activateLightMode = function () {
  document.documentElement.setAttribute('data-theme', 'light')
  if (document.querySelector('meta[name="theme-color"]') !== null) {
    document.querySelector('meta[name="theme-color"]').setAttribute('content', '#fff')
  }
}

var getCookies = function (name) {
  const value = `; ${document.cookie}`
  const parts = value.split(`; ${name}=`)
  if (parts.length === 2) return parts.pop().split(';').shift()
}

var autoChangeMode = 'false'
var t = getCookies('theme')
if (autoChangeMode === '1') {
  var isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
  var isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
  var isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
  var hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

  if (t === undefined) {
    if (isLightMode) activateLightMode()
    else if (isDarkMode) activateDarkMode()
    else if (isNotSpecified || hasNoSupport) {
      console.log('You specified no preference for a color scheme or your browser does not support it. I Schedule dark mode during night time.')
      var now = new Date()
      var hour = now.getHours()
      var isNight = hour <= 6 || hour >= 18
      isNight ? activateDarkMode() : activateLightMode()
    }
    window.matchMedia('(prefers-color-scheme: dark)').addListener(function (e) {
      if (Cookies.get('theme') === undefined) {
        e.matches ? activateDarkMode() : activateLightMode()
      }
    })
  } else if (t === 'light') activateLightMode()
  else activateDarkMode()
} else if (autoChangeMode === '2') {
  now = new Date()
  hour = now.getHours()
  isNight = hour <= 6 || hour >= 18
  if (t === undefined) isNight ? activateDarkMode() : activateLightMode()
  else if (t === 'light') activateLightMode()
  else activateDarkMode()
} else {
  if (t === 'dark') activateDarkMode()
  else if (t === 'light') activateLightMode()
}</script><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web&amp;display=swap"><script>var GLOBAL_CONFIG = { 
  root: '/',
  hexoversion: '5.1.1',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"找不到您查询的内容：${query}"}},
  translate: undefined,
  noticeOutdate: undefined,
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  bookmark: {
    message_prev: '按',
    message_next: '键将本页加入书签'
  },
  runtime_unit: '天',
  runtime: false,
  copyright: undefined,
  ClickShowText: undefined,
  medium_zoom: false,
  fancybox: true,
  Snackbar: undefined,
  justifiedGallery: {
    js: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
    css: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
  },
  baiduPush: false,
  highlightCopy: true,
  highlightLang: true,
  isPhotoFigcaption: false,
  islazyload: false,
  isanchor: false    
}</script><script id="config_change">var GLOBAL_CONFIG_SITE = { 
  isPost: false,
  isHome: true,
  isHighlightShrink: false,
  isSidebar: false,
  postUpdate: '2021-09-24 09:59:37'
}</script><noscript><style>
#nav {
  opacity: 1
}
.justified-gallery img {
  opacity: 1
}
</style></noscript><meta name="generator" content="Hexo 5.1.1"><link rel="alternate" href="/atom.xml" title="任翌博的个人博客" type="application/atom+xml">
</head><body><div id="mobile-sidebar"><div id="menu_mask"></div><div id="mobile-sidebar-menus"><div class="mobile_author_icon"><img class="avatar-img" src="/img/avatar.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="mobile_post_data"><div class="mobile_data_item is-center"><div class="mobile_data_link"><a href="/archives/"><div class="headline">文章</div><div class="length_num">45</div></a></div></div><div class="mobile_data_item is-center">      <div class="mobile_data_link"><a href="/tags/"><div class="headline">标签</div><div class="length_num">39</div></a></div></div><div class="mobile_data_item is-center">     <div class="mobile_data_link"><a href="/categories/"><div class="headline">分类</div><div class="length_num">13</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div></div></div><div id="body-wrap"><header class="full_page" id="page-header" style="background-image: url(https://static01.imgkr.com/temp/36e94ac91f96409e88de5dd7009e81e7.jpeg)"><nav id="nav"><span class="pull-left" id="blog_name"><a class="blog_title" id="site-name" href="/">任翌博的个人博客</a></span><span class="pull-right menus"><div id="search_button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div><span class="toggle-menu close"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></span></span></nav><div id="site-info"><h1 id="site_title">任翌博的个人博客</h1><div id="site_subtitle"><span id="subtitle"></span></div><div id="site_social_icons"><a class="social-icon" href="https://github.com/renyb2" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="mailto:renybworking@163.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a></div></div><div id="scroll_down"><i class="fas fa-angle-down scroll-down-effects"></i></div></header><main class="layout_page" id="content-inner"><div class="recent-posts" id="recent-posts"><div class="recent-post-item"><div class="post_cover left_radius"><a href="/2021/03/08/Kubernetes%E4%BD%BF%E7%94%A8%EF%BC%9A%E9%80%9A%E7%94%A8%E6%89%8B%E5%86%8C/" title="Kubernetes使用：通用手册">     <img class="post_bg" src="https://ss0.bdstatic.com/70cFuHSh_Q1YnxGkpoWK1HF6hhy/it/u=175322010,70959622&amp;fm=26&amp;gp=0.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Kubernetes使用：通用手册"></a></div><div class="recent-post-info"><a class="article-title" href="/2021/03/08/Kubernetes%E4%BD%BF%E7%94%A8%EF%BC%9A%E9%80%9A%E7%94%A8%E6%89%8B%E5%86%8C/" title="Kubernetes使用：通用手册">Kubernetes使用：通用手册</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2021-03-08T02:57:29.000Z" title="发表于 2021-03-08 10:57:29">2021-03-08</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox article-meta__icon"></i><a class="article-meta__categories" href="/categories/Kubernetes/">Kubernetes</a></span></div><div class="content">常用命令1234567891011121314151617181920212223242526272829# 查看pod状态kubectl get pods -o wide# 查看部署任务状态kubectl get deployment# 查看服务状态kubectl get svc# 查看pod详情kubectl describe pod# 从yaml文件中创建kubectl create -f &lt;yaml file&gt;# 创建部署任务kubectl create deployment &lt;deployment name&gt; --image=&lt;image url&gt;# 删除部署任务kubectl delete deployment &lt;deployment name&gt;# 删除服务kubectl delete svc &lt;service name&gt;# 节点添加labelkubectl label nodes --overwrite=true &lt;node_name&gt; &lt;key&gt;=&lt;value&gt;# 节点删除l ...</div></div></div><div class="recent-post-item"><div class="post_cover right_radius"><a href="/2021/02/18/Linux%E9%85%8D%E7%BD%AE%EF%BC%9A%E5%BC%80%E5%90%AF%E5%A4%A7%E9%A1%B5%E5%86%85%E5%AD%98/" title="Linux配置：开启大页内存">     <img class="post_bg" src="https://ss2.bdstatic.com/70cFvnSh_Q1YnxGkpoWK1HF6hhy/it/u=2734045988,4035371764&amp;fm=26&amp;gp=0.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Linux配置：开启大页内存"></a></div><div class="recent-post-info"><a class="article-title" href="/2021/02/18/Linux%E9%85%8D%E7%BD%AE%EF%BC%9A%E5%BC%80%E5%90%AF%E5%A4%A7%E9%A1%B5%E5%86%85%E5%AD%98/" title="Linux配置：开启大页内存">Linux配置：开启大页内存</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2021-02-18T07:52:22.000Z" title="发表于 2021-02-18 15:52:22">2021-02-18</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox article-meta__icon"></i><a class="article-meta__categories" href="/categories/Linux/">Linux</a></span></div><div class="content">大页内存Centos 开启大页内存
系统：CentOS Linux release 7.7.1908 (Core)

编辑 /etc/default/grub ，在 GRUB_CMDLINE_LINUX 字段增加如下：

default_hugepagesz ：默认大页每页大小
hugepagesz ：大页每页大小，可选值：4K、2M（默认）、1G
hugepages ：大页数量

12345678GRUB_TIMEOUT=5GRUB_DISTRIBUTOR=&quot;$(sed &#x27;s, release .*$,,g&#x27; /etc/system-release)&quot;GRUB_DEFAULT=savedGRUB_DISABLE_SUBMENU=trueGRUB_TERMINAL_OUTPUT=&quot;console&quot;GRUB_CMDLINE_LINUX=&quot;crashkernel=auto rd.lvm.lv=centos_centos/root rd.lvm.lv=centos_centos/swap rhgb quiet&quot;G ...</div></div></div><div class="recent-post-item"><div class="post_cover left_radius"><a href="/2021/02/18/Linux%E9%85%8D%E7%BD%AE%EF%BC%9AUbuntu%E9%85%8D%E7%BD%AE%E7%BD%91%E5%8D%A1/" title="Linux配置：Ubuntu配置网卡">     <img class="post_bg" src="https://ss0.bdstatic.com/70cFuHSh_Q1YnxGkpoWK1HF6hhy/it/u=3064103475,1887916631&amp;fm=26&amp;gp=0.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Linux配置：Ubuntu配置网卡"></a></div><div class="recent-post-info"><a class="article-title" href="/2021/02/18/Linux%E9%85%8D%E7%BD%AE%EF%BC%9AUbuntu%E9%85%8D%E7%BD%AE%E7%BD%91%E5%8D%A1/" title="Linux配置：Ubuntu配置网卡">Linux配置：Ubuntu配置网卡</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2021-02-18T07:33:28.000Z" title="发表于 2021-02-18 15:33:28">2021-02-18</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox article-meta__icon"></i><a class="article-meta__categories" href="/categories/Linux/">Linux</a></span></div><div class="content">环境信息系统：Ubuntu 18.04.5 LTS
内核：GNU/Linux 4.15.0-112-generic x86_64
流程编辑 /etc/netplan/00-installer-config.yaml ，增加网卡配置信息。PS：不同安装方式，yaml文件名略有不同，需自行在 /etc/netplan/ 目录下寻找
123456789# This is the network config written by &#x27;subiquity&#x27;network:  ethernets:    ens160:      addresses: [111.111.111.61/24]      gateway4: 111.111.111.1      nameservers:        addresses: [114.114.114.114]  version: 2

执行命令 netplan apply 让配置直接生效
参考文档Ubuntu18.04的网络配置（静态IP和动态IP）
</div></div></div><div class="recent-post-item"><div class="post_cover right_radius"><a href="/2021/01/26/Kubernetes%E9%83%A8%E7%BD%B2%EF%BC%9AIPv4-IPv6%E5%8F%8C%E6%A0%88/" title="Kubernetes部署：IPv4/IPv6双栈">     <img class="post_bg" src="https://ss0.bdstatic.com/70cFuHSh_Q1YnxGkpoWK1HF6hhy/it/u=175322010,70959622&amp;fm=26&amp;gp=0.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Kubernetes部署：IPv4/IPv6双栈"></a></div><div class="recent-post-info"><a class="article-title" href="/2021/01/26/Kubernetes%E9%83%A8%E7%BD%B2%EF%BC%9AIPv4-IPv6%E5%8F%8C%E6%A0%88/" title="Kubernetes部署：IPv4/IPv6双栈">Kubernetes部署：IPv4/IPv6双栈</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2021-01-26T02:51:40.000Z" title="发表于 2021-01-26 10:51:40">2021-01-26</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox article-meta__icon"></i><a class="article-meta__categories" href="/categories/Kubernetes/">Kubernetes</a></span></div><div class="content">简述需求：OpenStack跑在Kubernetes上，OpenStack需要配置为IPv6网络。
Kubernetes IPv4/IPv6 双协议栈能够将 IPv4 和 IPv6 地址分配给 Pod 和 Service。

支持的功能
在 Kubernetes 集群上启用 IPv4/IPv6 双协议栈可提供下面的功能：

双协议栈 pod 网络 (每个 pod 分配一个 IPv4 和 IPv6 地址)
IPv4 和 IPv6 启用的服务 (每个服务必须是一个单独的地址族)
Pod 的集群外出口通过 IPv4 和 IPv6 路由


环境信息
系统：CentOS Linux release 7.7.1908 (Core)
Kubernetes版本：v1.19.0
OpenStack版本：Train
Kubernetes部署方式：kubeadm
Kubernetes网络组件：Calico v3.15.3

节点IP信息，/etc/hosts 内容如下：
123456127.0.0.1   localhost localhost.localdomain localhost4 localho ...</div></div></div><div class="recent-post-item"><div class="post_cover left_radius"><a href="/2021/01/22/Kubernetes%E9%83%A8%E7%BD%B2%EF%BC%9AOpenStack%E6%9C%8D%E5%8A%A1%E9%85%8D%E7%BD%AEHTTPS/" title="Kubernetes部署：OpenStack服务配置HTTPS">     <img class="post_bg" src="https://ss0.bdstatic.com/70cFuHSh_Q1YnxGkpoWK1HF6hhy/it/u=175322010,70959622&amp;fm=26&amp;gp=0.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Kubernetes部署：OpenStack服务配置HTTPS"></a></div><div class="recent-post-info"><a class="article-title" href="/2021/01/22/Kubernetes%E9%83%A8%E7%BD%B2%EF%BC%9AOpenStack%E6%9C%8D%E5%8A%A1%E9%85%8D%E7%BD%AEHTTPS/" title="Kubernetes部署：OpenStack服务配置HTTPS">Kubernetes部署：OpenStack服务配置HTTPS</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2021-01-22T09:31:24.000Z" title="发表于 2021-01-22 17:31:24">2021-01-22</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox article-meta__icon"></i><a class="article-meta__categories" href="/categories/Kubernetes/">Kubernetes</a></span></div><div class="content">简述需求：OpenStack endpoint 统一格式为 https + ip
环境信息
系统：CentOS Linux release 7.7.1908 (Core)

Kubernetes版本：v1.19.0

OpenStack版本：Train

部署方式：StarlingX Armada部署


网络架构Kubernetes上部署的OpenStack，通过以下3中方式提供服务：

nodePort：OpenStack Horizon服务使用该方式。将端口映射至宿主机的端口，可通过宿主机ip + 端口方式访问。
ingress：OpenStack admin和public类型的endpoint使用该方式。
service：OpenStack internal类型的endpoint使用该方式。

以上3种方式的网络，升级为HTTPS方案分别如下：

nodePort：通过HAProxy进行HTTPS的证书验证和卸载，转发至后端nodePort端口

ingress：ingress运行在7层，支持配置HTTPS，在ingress增加tls模块即可

service：service运 ...</div></div></div><div class="recent-post-item"><div class="post_cover right_radius"><a href="/2021/01/19/Linux%E9%85%8D%E7%BD%AE%EF%BC%9ALVM/" title="Linux配置：LVM">     <img class="post_bg" src="https://ss2.bdstatic.com/70cFvnSh_Q1YnxGkpoWK1HF6hhy/it/u=2734045988,4035371764&amp;fm=26&amp;gp=0.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Linux配置：LVM"></a></div><div class="recent-post-info"><a class="article-title" href="/2021/01/19/Linux%E9%85%8D%E7%BD%AE%EF%BC%9ALVM/" title="Linux配置：LVM">Linux配置：LVM</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2021-01-19T11:46:22.000Z" title="发表于 2021-01-19 19:46:22">2021-01-19</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox article-meta__icon"></i><a class="article-meta__categories" href="/categories/Linux/">Linux</a></span></div><div class="content">简介
​        LVM是 Logical Volume Manager(逻辑卷管理)的简写，它由Heinz Mauelshagen在Linux 2.4内核上实现。LVM将一个或多个硬盘的分区在逻辑上集合，相当于一个大硬盘来使用，当硬盘的空间不够使用的时候，可以继续将其它的硬盘的分区加入其中，这样可以实现磁盘空间的动态管理，相对于普通的磁盘分区有很大的灵活性。
​        与传统的磁盘与分区相比，LVM为计算机提供了更高层次的磁盘存储。它使系统管理员可以更方便的为应用与用户分配存储空间。在LVM管理下的存储卷可以按需要随时改变大小与移除(可能需对文件系统工具进行升级)。LVM也允许按用户组对存储卷进行管理，允许管理员用更直观的名称(如”sales’、 ‘development’)代替物理磁盘名(如’sda’、’sdb’)来标识存储卷。

LVM基本术语前面谈到，LVM是在磁盘分区和文件系统之间添加的一个逻辑层，来为文件系统屏蔽下层磁盘分区布局，提供一个抽象的盘卷，在盘卷上建立文件系统。首先我们讨论以下几个LVM术语：

物理存储介质（The physical media）： ...</div></div></div><div class="recent-post-item"><div class="post_cover left_radius"><a href="/2021/01/19/OpenStack%E9%83%A8%E7%BD%B2%EF%BC%9AHTTPS/" title="OpenStack部署：HTTPS">     <img class="post_bg" src="https://tse1-mm.cn.bing.net/th/id/R-C.f7fb3fa204c4bca5cffe872f1647bd63?rik=qMT5LReAqlK%2b8g&amp;riu=http%3a%2f%2farticles.csdn.net%2fuploads%2fallimg%2f121012%2f145_121012152139_1.jpg&amp;ehk=lf9gNAsavUUuzA4ylpYKWJ5UC7JuypbkWW37yOFFg0Y%3d&amp;risl=&amp;pid=ImgRaw&amp;r=0" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="OpenStack部署：HTTPS"></a></div><div class="recent-post-info"><a class="article-title" href="/2021/01/19/OpenStack%E9%83%A8%E7%BD%B2%EF%BC%9AHTTPS/" title="OpenStack部署：HTTPS">OpenStack部署：HTTPS</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2021-01-19T10:31:14.000Z" title="发表于 2021-01-19 18:31:14">2021-01-19</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox article-meta__icon"></i><a class="article-meta__categories" href="/categories/OpenStack/">OpenStack</a></span></div><div class="content">简述需求：需要为openstack所有服务更新为https方式访问
方案：使用HAProxy进行负载均衡和https证书卸载，通过HAProxy frontend进行https证书验证，验证通过后，转发至backend的后端http server。openstack各服务之间，通过https进行访问，需要配置各个服务的CA证书，同时更新keystone的endpoint

环境
系统：CentOS Linux release 7.7.1908 (Core)
OpenStack版本：Train
kolla-ansible版本：9.2.0
Docker版本：docker-ce-18.09.6-3.el7.x86_64
OpenStack部署方式：kolla-ansible部署（OpenStack服务运行在Docker上）
OpenStack部署规模：control节点1台，compute节点3台

步骤TLS证书生成证书
1234567891011121314151617181920# 使用kolla生成证书kolla-ansible certificates# openssl-kolla ...</div></div></div><div class="recent-post-item"><div class="post_cover right_radius"><a href="/2021/01/12/Linux%E9%85%8D%E7%BD%AE%EF%BC%9A%E4%BF%AE%E6%94%B9%E7%BD%91%E5%8D%A1%E5%90%8D%E7%A7%B0/" title="Linux配置：修改网卡名称">     <img class="post_bg" src="https://ss2.bdstatic.com/70cFvnSh_Q1YnxGkpoWK1HF6hhy/it/u=2734045988,4035371764&amp;fm=26&amp;gp=0.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Linux配置：修改网卡名称"></a></div><div class="recent-post-info"><a class="article-title" href="/2021/01/12/Linux%E9%85%8D%E7%BD%AE%EF%BC%9A%E4%BF%AE%E6%94%B9%E7%BD%91%E5%8D%A1%E5%90%8D%E7%A7%B0/" title="Linux配置：修改网卡名称">Linux配置：修改网卡名称</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2021-01-12T09:10:46.000Z" title="发表于 2021-01-12 17:10:46">2021-01-12</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox article-meta__icon"></i><a class="article-meta__categories" href="/categories/Linux/">Linux</a></span></div><div class="content">
网上资料都是要修改 /etc/default/grub 文件，增加 net.ifnames=0, biosdevname=0 参数。该方法重启后，网卡名称统一变为eth开头，无法达到任意修改的目的。整理如下方法，亲测 Centos 7.8 可行。

环境信息：CentOS Linux release 7.8.2003 (Core)
网卡信息：
123456789101112131415161718192021222324root@renyb: rules.d # ip a1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1000    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00    inet 127.0.0.1/8 scope host lo       valid_lft forever preferred_lft forever    inet6 ::1/128 scope hos ...</div></div></div><div class="recent-post-item"><div class="post_cover left_radius"><a href="/2021/01/05/OpenStack%E5%BC%80%E5%8F%91%EF%BC%9AGlance-Image-Soft-Delete/" title="OpenStack开发：Glance Image Soft Delete">     <img class="post_bg" src="https://www.pinclipart.com/picdir/big/201-2017709_a-quick-study-guide-for-the-coa-exam.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="OpenStack开发：Glance Image Soft Delete"></a></div><div class="recent-post-info"><a class="article-title" href="/2021/01/05/OpenStack%E5%BC%80%E5%8F%91%EF%BC%9AGlance-Image-Soft-Delete/" title="OpenStack开发：Glance Image Soft Delete">OpenStack开发：Glance Image Soft Delete</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2021-01-05T03:44:45.000Z" title="发表于 2021-01-05 11:44:45">2021-01-05</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox article-meta__icon"></i><a class="article-meta__categories" href="/categories/OpenStack/">OpenStack</a></span></div><div class="content">Configuration options for the Image Soft DeleteConfig File：glance-api.conf
123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354[DEFAULT]## Turn on/off delayed delete.## Typically when an image is deleted, the ``glance-api`` service puts the image# into ``deleted`` state and deletes its data at the same time. Delayed delete# is a feature in Glance that delays the actual deletion of image data until a# later point in time (as determined by the configu ...</div></div></div><div class="recent-post-item"><div class="post_cover right_radius"><a href="/2020/12/22/OpenStack%E5%BC%80%E5%8F%91%EF%BC%9AGlance-Image-Cache/" title="OpenStack开发：Glance Image Cache">     <img class="post_bg" src="https://www.pinclipart.com/picdir/big/201-2017709_a-quick-study-guide-for-the-coa-exam.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="OpenStack开发：Glance Image Cache"></a></div><div class="recent-post-info"><a class="article-title" href="/2020/12/22/OpenStack%E5%BC%80%E5%8F%91%EF%BC%9AGlance-Image-Cache/" title="OpenStack开发：Glance Image Cache">OpenStack开发：Glance Image Cache</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2020-12-22T02:49:59.000Z" title="发表于 2020-12-22 10:49:59">2020-12-22</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox article-meta__icon"></i><a class="article-meta__categories" href="/categories/OpenStack/">OpenStack</a></span></div><div class="content">The Glance Image Cache
The Glance API server may be configured to have an optional local image cache. A local image cache stores a copy of image files, essentially enabling multiple API servers to serve the same image file, resulting in an increase in scalability due to an increased number of endpoints serving an image file.
This local image cache is transparent to the end user – in other words, the end user doesn’t know that the Glance API is streaming an image file from its local cache or from ...</div></div></div><nav id="pagination"><div class="pagination"><a class="extend prev" rel="prev" href="/"><i class="fas fa-chevron-left fa-fw"></i></a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><span class="space">&hellip;</span><a class="page-number" href="/page/5/">5</a><a class="extend next" rel="next" href="/page/3/"><i class="fas fa-chevron-right fa-fw"></i></a></div></nav></div><div class="aside_content" id="aside_content"><div class="card-widget card-info"><div class="card-content"><div class="card-info-avatar is-center"><img class="avatar-img" src="/img/avatar.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/><div class="author-info__name">任翌博</div><div class="author-info__description">美食，滑雪</div></div><div class="card-info-data"><div class="card-info-data-item is-center"><a href="/archives"><div class="headline">文章</div><div class="length_num">45</div></a></div><div class="card-info-data-item is-center">      <a href="/tags"><div class="headline">标签</div><div class="length_num">39</div></a></div><div class="card-info-data-item is-center"><a href="/categories"><div class="headline">分类</div><div class="length_num">13</div></a></div></div><a class="button--animated" id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/renyb2"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/renyb2" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="mailto:renybworking@163.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a></div></div></div><div class="card-widget card-announcement"><div class="card-content"><div class="item-headline"><i class="fas fa-bullhorn card-announcement-animation"></i><span>公告</span></div><div class="announcement_content">欢迎来到我的博客 ~</div></div></div><div class="card-widget card-recent-post"><div class="card-content"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-recent-item"><div class="aside-recent-post"><a class="aside-post-cover" href="/2021/08/05/OpenStack%E9%83%A8%E7%BD%B2%EF%BC%9ATrove/" title="OpenStack部署：Trove"><img class="aside-post-bg" src="https://tse1-mm.cn.bing.net/th/id/R-C.f7fb3fa204c4bca5cffe872f1647bd63?rik=qMT5LReAqlK%2b8g&amp;riu=http%3a%2f%2farticles.csdn.net%2fuploads%2fallimg%2f121012%2f145_121012152139_1.jpg&amp;ehk=lf9gNAsavUUuzA4ylpYKWJ5UC7JuypbkWW37yOFFg0Y%3d&amp;risl=&amp;pid=ImgRaw&amp;r=0" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="OpenStack部署：Trove"/></a><div class="aside-post-info"><a class="aside-post-title" href="/2021/08/05/OpenStack%E9%83%A8%E7%BD%B2%EF%BC%9ATrove/" title="OpenStack部署：Trove">OpenStack部署：Trove</a><time class="aside-post_meta post-meta-date" datetime="2021-08-05T00:49:35.000Z" title="发表于 2021-08-05 08:49:35">2021-08-05</time></div></div><div class="aside-recent-post"><a class="aside-post-cover" href="/2021/07/27/MongoDB%E4%BD%BF%E7%94%A8%EF%BC%9A%E9%80%9A%E7%94%A8%E6%89%8B%E5%86%8C/" title="MongoDB使用：通用手册"><img class="aside-post-bg" src="https://www.viafirma.com/blog-xnoccio/wp-content/uploads/sites/3/2017/12/MongoDB.jpeg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="MongoDB使用：通用手册"/></a><div class="aside-post-info"><a class="aside-post-title" href="/2021/07/27/MongoDB%E4%BD%BF%E7%94%A8%EF%BC%9A%E9%80%9A%E7%94%A8%E6%89%8B%E5%86%8C/" title="MongoDB使用：通用手册">MongoDB使用：通用手册</a><time class="aside-post_meta post-meta-date" datetime="2021-07-27T08:44:20.000Z" title="发表于 2021-07-27 16:44:20">2021-07-27</time></div></div><div class="aside-recent-post"><a class="aside-post-cover" href="/2021/07/27/MySQL%E4%BD%BF%E7%94%A8%EF%BC%9A%E9%80%9A%E7%94%A8%E6%89%8B%E5%86%8C/" title="MySQL使用：通用手册"><img class="aside-post-bg" src="https://devacademy.it/wp-content/uploads/2019/12/MySQL-grande.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="MySQL使用：通用手册"/></a><div class="aside-post-info"><a class="aside-post-title" href="/2021/07/27/MySQL%E4%BD%BF%E7%94%A8%EF%BC%9A%E9%80%9A%E7%94%A8%E6%89%8B%E5%86%8C/" title="MySQL使用：通用手册">MySQL使用：通用手册</a><time class="aside-post_meta post-meta-date" datetime="2021-07-27T08:10:36.000Z" title="发表于 2021-07-27 16:10:36">2021-07-27</time></div></div><div class="aside-recent-post"><a class="aside-post-cover" href="/2021/07/16/Kubernetes%E9%83%A8%E7%BD%B2%EF%BC%9AKube-VIP%E5%AE%9E%E7%8E%B0%E9%AB%98%E5%8F%AF%E7%94%A8/" title="Kubernetes部署：Kube-VIP实现高可用"><img class="aside-post-bg" src="https://kube-vip.io/kube-vip.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Kubernetes部署：Kube-VIP实现高可用"/></a><div class="aside-post-info"><a class="aside-post-title" href="/2021/07/16/Kubernetes%E9%83%A8%E7%BD%B2%EF%BC%9AKube-VIP%E5%AE%9E%E7%8E%B0%E9%AB%98%E5%8F%AF%E7%94%A8/" title="Kubernetes部署：Kube-VIP实现高可用">Kubernetes部署：Kube-VIP实现高可用</a><time class="aside-post_meta post-meta-date" datetime="2021-07-16T01:28:30.000Z" title="发表于 2021-07-16 09:28:30">2021-07-16</time></div></div><div class="aside-recent-post"><a class="aside-post-cover" href="/2021/07/15/Ceph%E4%BD%BF%E7%94%A8%EF%BC%9A%E9%80%9A%E7%94%A8%E6%89%8B%E5%86%8C/" title="Ceph使用：通用手册"><img class="aside-post-bg" src="https://perlubantuan.com/wp-content/uploads/2020/07/ceph_logo.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Ceph使用：通用手册"/></a><div class="aside-post-info"><a class="aside-post-title" href="/2021/07/15/Ceph%E4%BD%BF%E7%94%A8%EF%BC%9A%E9%80%9A%E7%94%A8%E6%89%8B%E5%86%8C/" title="Ceph使用：通用手册">Ceph使用：通用手册</a><time class="aside-post_meta post-meta-date" datetime="2021-07-15T01:20:32.000Z" title="发表于 2021-07-15 09:20:32">2021-07-15</time></div></div></div></div></div><div class="card-widget card-categories"><div class="card-content"><div class="item-headline"><i class="fas fa-folder-open"></i><span>分类</span></div><ul class="card-category-list">
            <li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Ceph/"><span class="card-category-list-name">Ceph</span><span class="card-category-list-count">1</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Docker/"><span class="card-category-list-name">Docker</span><span class="card-category-list-count">1</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Git/"><span class="card-category-list-name">Git</span><span class="card-category-list-count">1</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Hexo/"><span class="card-category-list-name">Hexo</span><span class="card-category-list-count">2</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Kubernetes/"><span class="card-category-list-name">Kubernetes</span><span class="card-category-list-count">7</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Linux/"><span class="card-category-list-name">Linux</span><span class="card-category-list-count">11</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/OpenStack/"><span class="card-category-list-name">OpenStack</span><span class="card-category-list-count">9</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Oracle/"><span class="card-category-list-name">Oracle</span><span class="card-category-list-count">1</span></a></li>
            <li class="card-category-list-item more is-center"><a class="card-category-list-link-more" href="/categories">
                <span>查看更多</span><i class="fas fa-angle-right"></i></a></li>           
            </ul></div></div><div class="card-widget card-tags"><div class="card-content"><div class="item-headline"><i class="fas fa-tags"></i><span>标签</span></div><div class="card-tag-cloud"><a href="/tags/Ceph/" style="font-size: 16px; color: #999">Ceph</a> <a href="/tags/Curl/" style="font-size: 16px; color: #999">Curl</a> <a href="/tags/Docker/" style="font-size: 16px; color: #999">Docker</a> <a href="/tags/GNOME/" style="font-size: 16px; color: #999">GNOME</a> <a href="/tags/Git/" style="font-size: 16px; color: #999">Git</a> <a href="/tags/Glance/" style="font-size: 17.5px; color: #999da3">Glance</a> <a href="/tags/Google/" style="font-size: 16px; color: #999">Google</a> <a href="/tags/HA/" style="font-size: 16px; color: #999">HA</a> <a href="/tags/HAProxy/" style="font-size: 16px; color: #999">HAProxy</a> <a href="/tags/HTTPS/" style="font-size: 17.5px; color: #999da3">HTTPS</a> <a href="/tags/Helm/" style="font-size: 16px; color: #999">Helm</a> <a href="/tags/Hexo/" style="font-size: 17.5px; color: #999da3">Hexo</a> <a href="/tags/IPTABLES/" style="font-size: 16px; color: #999">IPTABLES</a> <a href="/tags/IPv6/" style="font-size: 16px; color: #999">IPv6</a> <a href="/tags/Jmeter/" style="font-size: 16px; color: #999">Jmeter</a> <a href="/tags/Kubernetes/" style="font-size: 20.5px; color: #99a5b6">Kubernetes</a> <a href="/tags/LVM/" style="font-size: 16px; color: #999">LVM</a> <a href="/tags/Linux/" style="font-size: 22px; color: #99a9bf">Linux</a> <a href="/tags/MQTT/" style="font-size: 16px; color: #999">MQTT</a> <a href="/tags/MySQL/" style="font-size: 17.5px; color: #999da3">MySQL</a> <a href="/tags/OpenStack/" style="font-size: 22px; color: #99a9bf">OpenStack</a> <a href="/tags/Oracle/" style="font-size: 17.5px; color: #999da3">Oracle</a> <a href="/tags/RabbitMQ/" style="font-size: 16px; color: #999">RabbitMQ</a> <a href="/tags/TiDB/" style="font-size: 16px; color: #999">TiDB</a> <a href="/tags/Trove/" style="font-size: 16px; color: #999">Trove</a> <a href="/tags/Ubuntu/" style="font-size: 16px; color: #999">Ubuntu</a> <a href="/tags/VNC/" style="font-size: 16px; color: #999">VNC</a> <a href="/tags/Vim/" style="font-size: 16px; color: #999">Vim</a> <a href="/tags/kubeadm/" style="font-size: 16px; color: #999">kubeadm</a> <a href="/tags/novaclient/" style="font-size: 16px; color: #999">novaclient</a> <a href="/tags/%E4%BB%A3%E7%90%86/" style="font-size: 16px; color: #999">代理</a> <a href="/tags/%E5%A4%A7%E9%A1%B5%E5%86%85%E5%AD%98/" style="font-size: 16px; color: #999">大页内存</a> <a href="/tags/%E5%BC%80%E5%8F%91%E5%B0%8F%E5%B7%A5%E5%85%B7/" style="font-size: 16px; color: #999">开发小工具</a> <a href="/tags/%E6%80%A7%E8%83%BD%E6%B5%8B%E8%AF%95/" style="font-size: 17.5px; color: #999da3">性能测试</a> <a href="/tags/%E7%AE%97%E6%B3%95/" style="font-size: 19px; color: #99a1ac">算法</a> <a href="/tags/%E7%BD%91%E5%8D%A1/" style="font-size: 16px; color: #999">网卡</a> <a href="/tags/%E7%BF%BB%E5%A2%99/" style="font-size: 16px; color: #999">翻墙</a> <a href="/tags/%E9%80%9A%E7%94%A8%E6%89%8B%E5%86%8C/" style="font-size: 19px; color: #99a1ac">通用手册</a> <a href="/tags/%E9%95%9C%E5%83%8F%E5%88%B6%E4%BD%9C/" style="font-size: 16px; color: #999">镜像制作</a></div></div></div><div class="card-widget card-archives"><div class="card-content"><div class="item-headline"><i class="fas fa-archive"></i><span>归档</span></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2021/08/"><span class="card-archive-list-date">八月 2021</span><span class="card-archive-list-count">1</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2021/07/"><span class="card-archive-list-date">七月 2021</span><span class="card-archive-list-count">4</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2021/06/"><span class="card-archive-list-date">六月 2021</span><span class="card-archive-list-count">1</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2021/05/"><span class="card-archive-list-date">五月 2021</span><span class="card-archive-list-count">2</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2021/04/"><span class="card-archive-list-date">四月 2021</span><span class="card-archive-list-count">1</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2021/03/"><span class="card-archive-list-date">三月 2021</span><span class="card-archive-list-count">2</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2021/02/"><span class="card-archive-list-date">二月 2021</span><span class="card-archive-list-count">2</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2021/01/"><span class="card-archive-list-date">一月 2021</span><span class="card-archive-list-count">6</span></a></li><li class="card-archive-list-item more is-center"><a class="card-archive-list-link-more" href="/archives">
              <span>查看更多</span><i class="fas fa-angle-right"  ></i></a></li></ul></div></div><div class="card-widget card-webinfo"><div class="card-content"><div class="item-headline"><i class="fas fa-chart-line"></i><span>网站资讯</span></div><div class="webinfo"><div class="webinfo-item"><div class="webinfo-article-name">文章数目 :</div><div class="webinfo-article-count">45</div></div><div class="webinfo-item">      <div class="webinfo-site-uv-name">本站访客数 :</div><div class="webinfo-site-uv-count" id="busuanzi_value_site_uv"></div></div><div class="webinfo-item"><div class="webinfo-site-name">本站总访问量 :</div><div class="webinfo-site-pv-count" id="busuanzi_value_site_pv"></div></div></div></div></div></div></main><footer id="footer" data-type="color"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2021 By 任翌博</div></div></footer></div><section id="rightside"><div id="rightside-config-hide"><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog"></i></button><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></section><div class="search-dialog" id="local-search"><div class="search-dialog__title" id="local-search-title">本地搜索</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div></div><hr/><div id="local-search-results"><div id="local-hits"></div><div id="local-stats"><div class="local-search-stats__hr" id="hr"><span>由</span> <a target="_blank" rel="noopener" href="https://github.com/wzpan/hexo-generator-search" style="color:#49B1F5;">hexo-generator-search</a>
 <span>提供支持</span></div></div></div><span class="search-close-button"><i class="fas fa-times"></i></span></div><div id="search-mask"></div><div><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page/instantpage.min.js" type="module" defer></script><script src="/js/search/local-search.js"></script><div class="js-pjax"><script>function subtitleType () {
  if (true) { 
    var typed = new Typed("#subtitle", {
      strings: "生命不息，学习不止 ~".split(","),
      startDelay: 300,
      typeSpeed: 150,
      loop: true,
      backSpeed: 50
    })
  } else {
    document.getElementById("subtitle").innerHTML = '生'
  }
}

if (true) {
  if (typeof Typed === 'function') subtitleType()
  else $.getScript('https://cdn.jsdelivr.net/npm/typed.js/lib/typed.min.js', subtitleType)
} else {
  subtitleType()
}</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div><script defer="defer" id="ribbon_piao" mobile="false" src="/js/third-party/piao.js"></script></div></body></html>